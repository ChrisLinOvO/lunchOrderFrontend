{"ast":null,"code":"import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp;\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { polyfill } from 'react-lifecycles-compat';\nimport classnames from 'classnames';\nimport moment from 'moment';\nimport Overlay from '../overlay';\nimport Input from '../input';\nimport Icon from '../icon';\nimport Calendar from '../calendar';\nimport nextLocale from '../locale/zh-cn';\nimport { func, obj } from '../util';\nimport { checkDateValue, formatDateValue, onDateKeydown } from './util';\nvar Popup = Overlay.Popup;\n/**\n * DatePicker.YearPicker\n */\n\nvar YearPicker = (_temp = _class = function (_Component) {\n  _inherits(YearPicker, _Component);\n\n  function YearPicker(props, context) {\n    _classCallCheck(this, YearPicker);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props, context));\n\n    _this.onValueChange = function (newValue) {\n      var ret = _this.state.inputAsString && newValue ? newValue.format(_this.props.format) : newValue;\n\n      _this.props.onChange(ret);\n    };\n\n    _this.onSelectCalendarPanel = function (value) {\n      // const { format } = this.props;\n      var prevSelectedMonth = _this.state.value;\n      var selectedMonth = value.clone().month(0).date(1).hour(0).minute(0).second(0);\n\n      _this.handleChange(selectedMonth, prevSelectedMonth, {\n        inputing: false\n      }, function () {\n        _this.onVisibleChange(false, 'calendarSelect');\n      });\n    };\n\n    _this.clearValue = function () {\n      _this.setState({\n        dateInputStr: ''\n      });\n\n      _this.handleChange(null, _this.state.value);\n    };\n\n    _this.onDateInputChange = function (inputStr, e, eventType) {\n      if (eventType === 'clear' || !inputStr) {\n        e.stopPropagation();\n\n        _this.clearValue();\n      } else {\n        _this.setState({\n          dateInputStr: inputStr,\n          inputing: true\n        });\n      }\n    };\n\n    _this.onDateInputBlur = function () {\n      var dateInputStr = _this.state.dateInputStr;\n\n      if (dateInputStr) {\n        var _this$props = _this.props,\n            disabledDate = _this$props.disabledDate,\n            format = _this$props.format;\n        var parsed = moment(dateInputStr, format, true);\n\n        _this.setState({\n          dateInputStr: '',\n          inputing: false\n        });\n\n        if (parsed.isValid() && !disabledDate(parsed, 'year')) {\n          _this.handleChange(parsed, _this.state.value);\n        }\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      var format = _this.props.format;\n      var _this$state = _this.state,\n          dateInputStr = _this$state.dateInputStr,\n          value = _this$state.value;\n      var dateStr = onDateKeydown(e, {\n        format: format,\n        dateInputStr: dateInputStr,\n        value: value\n      }, 'year');\n      if (!dateStr) return;\n\n      _this.onDateInputChange(dateStr);\n    };\n\n    _this.handleChange = function (newValue, prevValue) {\n      var others = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments[3];\n\n      if (!('value' in _this.props)) {\n        _this.setState(_extends({\n          value: newValue\n        }, others));\n      } else {\n        _this.setState(_extends({}, others));\n      }\n\n      var format = _this.props.format;\n      var newValueOf = newValue ? newValue.format(format) : null;\n      var preValueOf = prevValue ? prevValue.format(format) : null;\n\n      if (newValueOf !== preValueOf) {\n        _this.onValueChange(newValue);\n\n        if (typeof callback === 'function') {\n          return callback();\n        }\n      }\n    };\n\n    _this.onVisibleChange = function (visible, reason) {\n      if (!('visible' in _this.props)) {\n        _this.setState({\n          visible: visible\n        });\n      }\n\n      _this.props.onVisibleChange(visible, reason);\n    };\n\n    _this.state = {\n      value: formatDateValue(props.defaultValue, props.format),\n      dateInputStr: '',\n      inputing: false,\n      visible: props.defaultVisible,\n      inputAsString: typeof props.defaultValue === 'string' // 判断用户输入是否是字符串\n\n    };\n    return _this;\n  }\n\n  YearPicker.getDerivedStateFromProps = function getDerivedStateFromProps(props) {\n    var states = {};\n\n    if ('value' in props) {\n      states.value = formatDateValue(props.value, props.format);\n      states.inputAsString = typeof props.value === 'string';\n    }\n\n    if ('visible' in props) {\n      states.visible = props.visible;\n    }\n\n    return states;\n  };\n\n  YearPicker.prototype.renderPreview = function renderPreview(others) {\n    var _props = this.props,\n        prefix = _props.prefix,\n        format = _props.format,\n        className = _props.className,\n        renderPreview = _props.renderPreview;\n    var value = this.state.value;\n    var previewCls = classnames(className, prefix + 'form-preview');\n    var label = value ? value.format(format) : '';\n\n    if (typeof renderPreview === 'function') {\n      return React.createElement('div', _extends({}, others, {\n        className: previewCls\n      }), renderPreview(value, this.props));\n    }\n\n    return React.createElement('p', _extends({}, others, {\n      className: previewCls\n    }), label);\n  };\n\n  YearPicker.prototype.render = function render() {\n    var _classnames, _classnames2, _classnames3;\n\n    var _props2 = this.props,\n        prefix = _props2.prefix,\n        rtl = _props2.rtl,\n        locale = _props2.locale,\n        label = _props2.label,\n        state = _props2.state,\n        format = _props2.format,\n        disabledDate = _props2.disabledDate,\n        footerRender = _props2.footerRender,\n        placeholder = _props2.placeholder,\n        size = _props2.size,\n        disabled = _props2.disabled,\n        hasClear = _props2.hasClear,\n        popupTriggerType = _props2.popupTriggerType,\n        popupAlign = _props2.popupAlign,\n        popupContainer = _props2.popupContainer,\n        popupStyle = _props2.popupStyle,\n        popupClassName = _props2.popupClassName,\n        popupProps = _props2.popupProps,\n        popupComponent = _props2.popupComponent,\n        popupContent = _props2.popupContent,\n        followTrigger = _props2.followTrigger,\n        className = _props2.className,\n        inputProps = _props2.inputProps,\n        dateInputAriaLabel = _props2.dateInputAriaLabel,\n        yearCellRender = _props2.yearCellRender,\n        isPreview = _props2.isPreview,\n        others = _objectWithoutProperties(_props2, ['prefix', 'rtl', 'locale', 'label', 'state', 'format', 'disabledDate', 'footerRender', 'placeholder', 'size', 'disabled', 'hasClear', 'popupTriggerType', 'popupAlign', 'popupContainer', 'popupStyle', 'popupClassName', 'popupProps', 'popupComponent', 'popupContent', 'followTrigger', 'className', 'inputProps', 'dateInputAriaLabel', 'yearCellRender', 'isPreview']);\n\n    var _state = this.state,\n        visible = _state.visible,\n        value = _state.value,\n        dateInputStr = _state.dateInputStr,\n        inputing = _state.inputing;\n    var yearPickerCls = classnames((_classnames = {}, _classnames[prefix + 'year-picker'] = true, _classnames), className);\n    var triggerInputCls = classnames((_classnames2 = {}, _classnames2[prefix + 'year-picker-input'] = true, _classnames2[prefix + 'error'] = false, _classnames2));\n    var panelBodyClassName = classnames((_classnames3 = {}, _classnames3[prefix + 'year-picker-body'] = true, _classnames3));\n\n    if (rtl) {\n      others.dir = 'rtl';\n    }\n\n    if (isPreview) {\n      return this.renderPreview(obj.pickOthers(others, YearPicker.PropTypes));\n    }\n\n    var panelInputCls = prefix + 'year-picker-panel-input';\n\n    var sharedInputProps = _extends({}, inputProps, {\n      size: size,\n      disabled: disabled,\n      onChange: this.onDateInputChange,\n      onBlur: this.onDateInputBlur,\n      onPressEnter: this.onDateInputBlur,\n      onKeyDown: this.onKeyDown\n    });\n\n    var dateInputValue = inputing ? dateInputStr : value && value.format(format) || '';\n    var triggerInputValue = dateInputValue;\n    var dateInput = React.createElement(Input, _extends({}, sharedInputProps, {\n      'aria-label': dateInputAriaLabel,\n      value: dateInputValue,\n      placeholder: format,\n      className: panelInputCls\n    }));\n    var datePanel = React.createElement(Calendar, {\n      shape: 'panel',\n      modes: ['year'],\n      value: value,\n      yearCellRender: yearCellRender,\n      onSelect: this.onSelectCalendarPanel,\n      disabledDate: disabledDate\n    });\n    var panelBody = datePanel;\n    var panelFooter = footerRender();\n    var allowClear = value && hasClear;\n    var trigger = React.createElement('div', {\n      className: prefix + 'year-picker-trigger'\n    }, React.createElement(Input, _extends({}, sharedInputProps, {\n      label: label,\n      state: state,\n      value: triggerInputValue,\n      role: 'combobox',\n      'aria-expanded': visible,\n      readOnly: true,\n      placeholder: placeholder || locale.yearPlaceholder,\n      hint: React.createElement(Icon, {\n        type: 'calendar',\n        className: prefix + 'date-picker-symbol-calendar-icon'\n      }),\n      hasClear: allowClear,\n      className: triggerInputCls\n    })));\n    var PopupComponent = popupComponent ? popupComponent : Popup;\n    return React.createElement('div', _extends({}, obj.pickOthers(YearPicker.propTypes, others), {\n      className: yearPickerCls\n    }), React.createElement(PopupComponent, _extends({\n      autoFocus: true,\n      align: popupAlign\n    }, popupProps, {\n      followTrigger: followTrigger,\n      disabled: disabled,\n      visible: visible,\n      onVisibleChange: this.onVisibleChange,\n      triggerType: popupTriggerType,\n      container: popupContainer,\n      style: popupStyle,\n      className: popupClassName,\n      trigger: trigger\n    }), popupContent ? popupContent : React.createElement('div', {\n      dir: others.dir,\n      className: panelBodyClassName\n    }, React.createElement('div', {\n      className: prefix + 'year-picker-panel-header'\n    }, dateInput), panelBody, panelFooter)));\n  };\n\n  return YearPicker;\n}(Component), _class.propTypes = {\n  prefix: PropTypes.string,\n  rtl: PropTypes.bool,\n\n  /**\n   * 输入框内置标签\n   */\n  label: PropTypes.node,\n\n  /**\n   * 输入框状态\n   */\n  state: PropTypes.oneOf(['success', 'loading', 'error']),\n\n  /**\n   * 输入提示\n   */\n  placeholder: PropTypes.string,\n\n  /**\n   * 日期值（受控）moment 对象\n   */\n  value: checkDateValue,\n\n  /**\n   * 初始日期值，moment 对象\n   */\n  defaultValue: checkDateValue,\n\n  /**\n   * 日期值的格式（用于限定用户输入和展示）\n   */\n  format: PropTypes.string,\n\n  /**\n   * 禁用日期函数\n   * @param {MomentObject} 日期值\n   * @param {String} view 当前视图类型，year: 年， month: 月, date: 日\n   * @return {Boolean} 是否禁用\n   */\n  disabledDate: PropTypes.func,\n\n  /**\n   * 自定义面板页脚\n   * @return {Node} 自定义的面板页脚组件\n   */\n  footerRender: PropTypes.func,\n\n  /**\n   * 日期值改变时的回调\n   * @param {MomentObject|String} value 日期值\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * 输入框尺寸\n   */\n  size: PropTypes.oneOf(['small', 'medium', 'large']),\n\n  /**\n   * 是否禁用\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * 是否显示清空按钮\n   */\n  hasClear: PropTypes.bool,\n\n  /**\n   * 弹层显示状态\n   */\n  visible: PropTypes.bool,\n\n  /**\n   * 弹层默认是否显示\n   */\n  defaultVisible: PropTypes.bool,\n\n  /**\n   * 弹层展示状态变化时的回调\n   * @param {Boolean} visible 弹层是否显示\n   * @param {String} reason 触发弹层显示和隐藏的来源 calendarSelect 表示由日期表盘的选择触发； fromTrigger 表示由trigger的点击触发； docClick 表示由document的点击触发\n   */\n  onVisibleChange: PropTypes.func,\n\n  /**\n   * 弹层触发方式\n   */\n  popupTriggerType: PropTypes.oneOf(['click', 'hover']),\n\n  /**\n   * 弹层对齐方式, 具体含义见 OverLay文档\n   */\n  popupAlign: PropTypes.string,\n\n  /**\n   * 弹层容器\n   * @param {Element} target 目标元素\n   * @return {Element} 弹层的容器元素\n   */\n  popupContainer: PropTypes.any,\n\n  /**\n   * 弹层自定义样式\n   */\n  popupStyle: PropTypes.object,\n\n  /**\n   * 弹层自定义样式类\n   */\n  popupClassName: PropTypes.string,\n\n  /**\n   * 弹层其他属性\n   */\n  popupProps: PropTypes.object,\n\n  /**\n   * 是否跟随滚动\n   */\n  followTrigger: PropTypes.bool,\n\n  /**\n   * 输入框其他属性\n   */\n  inputProps: PropTypes.object,\n  yearCellRender: PropTypes.func,\n  // 兼容 0.x yearCellRender\n\n  /**\n   * 日期输入框的 aria-label 属性\n   */\n  dateInputAriaLabel: PropTypes.string,\n\n  /**\n   * 是否为预览态\n   */\n  isPreview: PropTypes.bool,\n\n  /**\n   * 预览态模式下渲染的内容\n   * @param {MomentObject} value 年份\n   */\n  renderPreview: PropTypes.func,\n  locale: PropTypes.object,\n  className: PropTypes.string,\n  name: PropTypes.string,\n  popupComponent: PropTypes.elementType,\n  popupContent: PropTypes.node\n}, _class.defaultProps = {\n  prefix: 'next-',\n  rtl: false,\n  format: 'YYYY',\n  size: 'medium',\n  disabledDate: function disabledDate() {\n    return false;\n  },\n  footerRender: function footerRender() {\n    return null;\n  },\n  hasClear: true,\n  popupTriggerType: 'click',\n  popupAlign: 'tl tl',\n  locale: nextLocale.DatePicker,\n  onChange: func.noop,\n  onVisibleChange: func.noop\n}, _temp);\nYearPicker.displayName = 'YearPicker';\nexport default polyfill(YearPicker);","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/date-picker/year-picker.js"],"names":["_objectWithoutProperties","_extends","_classCallCheck","_possibleConstructorReturn","_inherits","_class","_temp","React","Component","PropTypes","polyfill","classnames","moment","Overlay","Input","Icon","Calendar","nextLocale","func","obj","checkDateValue","formatDateValue","onDateKeydown","Popup","YearPicker","_Component","props","context","_this","call","onValueChange","newValue","ret","state","inputAsString","format","onChange","onSelectCalendarPanel","value","prevSelectedMonth","selectedMonth","clone","month","date","hour","minute","second","handleChange","inputing","onVisibleChange","clearValue","setState","dateInputStr","onDateInputChange","inputStr","e","eventType","stopPropagation","onDateInputBlur","_this$props","disabledDate","parsed","isValid","onKeyDown","_this$state","dateStr","prevValue","others","arguments","length","undefined","callback","newValueOf","preValueOf","visible","reason","defaultValue","defaultVisible","getDerivedStateFromProps","states","prototype","renderPreview","_props","prefix","className","previewCls","label","createElement","render","_classnames","_classnames2","_classnames3","_props2","rtl","locale","footerRender","placeholder","size","disabled","hasClear","popupTriggerType","popupAlign","popupContainer","popupStyle","popupClassName","popupProps","popupComponent","popupContent","followTrigger","inputProps","dateInputAriaLabel","yearCellRender","isPreview","_state","yearPickerCls","triggerInputCls","panelBodyClassName","dir","pickOthers","panelInputCls","sharedInputProps","onBlur","onPressEnter","dateInputValue","triggerInputValue","dateInput","datePanel","shape","modes","onSelect","panelBody","panelFooter","allowClear","trigger","role","readOnly","yearPlaceholder","hint","type","PopupComponent","propTypes","autoFocus","align","triggerType","container","style","string","bool","node","oneOf","any","object","name","elementType","defaultProps","DatePicker","noop","displayName"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp;\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { polyfill } from 'react-lifecycles-compat';\nimport classnames from 'classnames';\nimport moment from 'moment';\nimport Overlay from '../overlay';\nimport Input from '../input';\nimport Icon from '../icon';\nimport Calendar from '../calendar';\nimport nextLocale from '../locale/zh-cn';\nimport { func, obj } from '../util';\nimport { checkDateValue, formatDateValue, onDateKeydown } from './util';\n\nvar Popup = Overlay.Popup;\n\n/**\n * DatePicker.YearPicker\n */\n\nvar YearPicker = (_temp = _class = function (_Component) {\n    _inherits(YearPicker, _Component);\n\n    function YearPicker(props, context) {\n        _classCallCheck(this, YearPicker);\n\n        var _this = _possibleConstructorReturn(this, _Component.call(this, props, context));\n\n        _this.onValueChange = function (newValue) {\n            var ret = _this.state.inputAsString && newValue ? newValue.format(_this.props.format) : newValue;\n            _this.props.onChange(ret);\n        };\n\n        _this.onSelectCalendarPanel = function (value) {\n            // const { format } = this.props;\n            var prevSelectedMonth = _this.state.value;\n            var selectedMonth = value.clone().month(0).date(1).hour(0).minute(0).second(0);\n\n            _this.handleChange(selectedMonth, prevSelectedMonth, { inputing: false }, function () {\n                _this.onVisibleChange(false, 'calendarSelect');\n            });\n        };\n\n        _this.clearValue = function () {\n            _this.setState({\n                dateInputStr: ''\n            });\n\n            _this.handleChange(null, _this.state.value);\n        };\n\n        _this.onDateInputChange = function (inputStr, e, eventType) {\n            if (eventType === 'clear' || !inputStr) {\n                e.stopPropagation();\n                _this.clearValue();\n            } else {\n                _this.setState({\n                    dateInputStr: inputStr,\n                    inputing: true\n                });\n            }\n        };\n\n        _this.onDateInputBlur = function () {\n            var dateInputStr = _this.state.dateInputStr;\n\n            if (dateInputStr) {\n                var _this$props = _this.props,\n                    disabledDate = _this$props.disabledDate,\n                    format = _this$props.format;\n\n                var parsed = moment(dateInputStr, format, true);\n\n                _this.setState({\n                    dateInputStr: '',\n                    inputing: false\n                });\n\n                if (parsed.isValid() && !disabledDate(parsed, 'year')) {\n                    _this.handleChange(parsed, _this.state.value);\n                }\n            }\n        };\n\n        _this.onKeyDown = function (e) {\n            var format = _this.props.format;\n            var _this$state = _this.state,\n                dateInputStr = _this$state.dateInputStr,\n                value = _this$state.value;\n\n            var dateStr = onDateKeydown(e, { format: format, dateInputStr: dateInputStr, value: value }, 'year');\n            if (!dateStr) return;\n            _this.onDateInputChange(dateStr);\n        };\n\n        _this.handleChange = function (newValue, prevValue) {\n            var others = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n            var callback = arguments[3];\n\n            if (!('value' in _this.props)) {\n                _this.setState(_extends({\n                    value: newValue\n                }, others));\n            } else {\n                _this.setState(_extends({}, others));\n            }\n\n            var format = _this.props.format;\n\n\n            var newValueOf = newValue ? newValue.format(format) : null;\n            var preValueOf = prevValue ? prevValue.format(format) : null;\n\n            if (newValueOf !== preValueOf) {\n                _this.onValueChange(newValue);\n                if (typeof callback === 'function') {\n                    return callback();\n                }\n            }\n        };\n\n        _this.onVisibleChange = function (visible, reason) {\n            if (!('visible' in _this.props)) {\n                _this.setState({\n                    visible: visible\n                });\n            }\n            _this.props.onVisibleChange(visible, reason);\n        };\n\n        _this.state = {\n            value: formatDateValue(props.defaultValue, props.format),\n            dateInputStr: '',\n            inputing: false,\n            visible: props.defaultVisible,\n            inputAsString: typeof props.defaultValue === 'string' // 判断用户输入是否是字符串\n        };\n        return _this;\n    }\n\n    YearPicker.getDerivedStateFromProps = function getDerivedStateFromProps(props) {\n        var states = {};\n        if ('value' in props) {\n            states.value = formatDateValue(props.value, props.format);\n            states.inputAsString = typeof props.value === 'string';\n        }\n\n        if ('visible' in props) {\n            states.visible = props.visible;\n        }\n\n        return states;\n    };\n\n    YearPicker.prototype.renderPreview = function renderPreview(others) {\n        var _props = this.props,\n            prefix = _props.prefix,\n            format = _props.format,\n            className = _props.className,\n            renderPreview = _props.renderPreview;\n        var value = this.state.value;\n\n        var previewCls = classnames(className, prefix + 'form-preview');\n\n        var label = value ? value.format(format) : '';\n\n        if (typeof renderPreview === 'function') {\n            return React.createElement(\n                'div',\n                _extends({}, others, { className: previewCls }),\n                renderPreview(value, this.props)\n            );\n        }\n\n        return React.createElement(\n            'p',\n            _extends({}, others, { className: previewCls }),\n            label\n        );\n    };\n\n    YearPicker.prototype.render = function render() {\n        var _classnames, _classnames2, _classnames3;\n\n        var _props2 = this.props,\n            prefix = _props2.prefix,\n            rtl = _props2.rtl,\n            locale = _props2.locale,\n            label = _props2.label,\n            state = _props2.state,\n            format = _props2.format,\n            disabledDate = _props2.disabledDate,\n            footerRender = _props2.footerRender,\n            placeholder = _props2.placeholder,\n            size = _props2.size,\n            disabled = _props2.disabled,\n            hasClear = _props2.hasClear,\n            popupTriggerType = _props2.popupTriggerType,\n            popupAlign = _props2.popupAlign,\n            popupContainer = _props2.popupContainer,\n            popupStyle = _props2.popupStyle,\n            popupClassName = _props2.popupClassName,\n            popupProps = _props2.popupProps,\n            popupComponent = _props2.popupComponent,\n            popupContent = _props2.popupContent,\n            followTrigger = _props2.followTrigger,\n            className = _props2.className,\n            inputProps = _props2.inputProps,\n            dateInputAriaLabel = _props2.dateInputAriaLabel,\n            yearCellRender = _props2.yearCellRender,\n            isPreview = _props2.isPreview,\n            others = _objectWithoutProperties(_props2, ['prefix', 'rtl', 'locale', 'label', 'state', 'format', 'disabledDate', 'footerRender', 'placeholder', 'size', 'disabled', 'hasClear', 'popupTriggerType', 'popupAlign', 'popupContainer', 'popupStyle', 'popupClassName', 'popupProps', 'popupComponent', 'popupContent', 'followTrigger', 'className', 'inputProps', 'dateInputAriaLabel', 'yearCellRender', 'isPreview']);\n\n        var _state = this.state,\n            visible = _state.visible,\n            value = _state.value,\n            dateInputStr = _state.dateInputStr,\n            inputing = _state.inputing;\n\n\n        var yearPickerCls = classnames((_classnames = {}, _classnames[prefix + 'year-picker'] = true, _classnames), className);\n\n        var triggerInputCls = classnames((_classnames2 = {}, _classnames2[prefix + 'year-picker-input'] = true, _classnames2[prefix + 'error'] = false, _classnames2));\n\n        var panelBodyClassName = classnames((_classnames3 = {}, _classnames3[prefix + 'year-picker-body'] = true, _classnames3));\n\n        if (rtl) {\n            others.dir = 'rtl';\n        }\n\n        if (isPreview) {\n            return this.renderPreview(obj.pickOthers(others, YearPicker.PropTypes));\n        }\n\n        var panelInputCls = prefix + 'year-picker-panel-input';\n\n        var sharedInputProps = _extends({}, inputProps, {\n            size: size,\n            disabled: disabled,\n            onChange: this.onDateInputChange,\n            onBlur: this.onDateInputBlur,\n            onPressEnter: this.onDateInputBlur,\n            onKeyDown: this.onKeyDown\n        });\n\n        var dateInputValue = inputing ? dateInputStr : value && value.format(format) || '';\n        var triggerInputValue = dateInputValue;\n\n        var dateInput = React.createElement(Input, _extends({}, sharedInputProps, {\n            'aria-label': dateInputAriaLabel,\n            value: dateInputValue,\n            placeholder: format,\n            className: panelInputCls\n        }));\n\n        var datePanel = React.createElement(Calendar, {\n            shape: 'panel',\n            modes: ['year'],\n            value: value,\n            yearCellRender: yearCellRender,\n            onSelect: this.onSelectCalendarPanel,\n            disabledDate: disabledDate\n        });\n\n        var panelBody = datePanel;\n        var panelFooter = footerRender();\n\n        var allowClear = value && hasClear;\n        var trigger = React.createElement(\n            'div',\n            { className: prefix + 'year-picker-trigger' },\n            React.createElement(Input, _extends({}, sharedInputProps, {\n                label: label,\n                state: state,\n                value: triggerInputValue,\n                role: 'combobox',\n                'aria-expanded': visible,\n                readOnly: true,\n                placeholder: placeholder || locale.yearPlaceholder,\n                hint: React.createElement(Icon, {\n                    type: 'calendar',\n                    className: prefix + 'date-picker-symbol-calendar-icon'\n                }),\n                hasClear: allowClear,\n                className: triggerInputCls\n            }))\n        );\n\n        var PopupComponent = popupComponent ? popupComponent : Popup;\n\n        return React.createElement(\n            'div',\n            _extends({}, obj.pickOthers(YearPicker.propTypes, others), {\n                className: yearPickerCls\n            }),\n            React.createElement(\n                PopupComponent,\n                _extends({\n                    autoFocus: true,\n                    align: popupAlign\n                }, popupProps, {\n                    followTrigger: followTrigger,\n                    disabled: disabled,\n                    visible: visible,\n                    onVisibleChange: this.onVisibleChange,\n                    triggerType: popupTriggerType,\n                    container: popupContainer,\n                    style: popupStyle,\n                    className: popupClassName,\n                    trigger: trigger\n                }),\n                popupContent ? popupContent : React.createElement(\n                    'div',\n                    { dir: others.dir, className: panelBodyClassName },\n                    React.createElement(\n                        'div',\n                        {\n                            className: prefix + 'year-picker-panel-header'\n                        },\n                        dateInput\n                    ),\n                    panelBody,\n                    panelFooter\n                )\n            )\n        );\n    };\n\n    return YearPicker;\n}(Component), _class.propTypes = {\n    prefix: PropTypes.string,\n    rtl: PropTypes.bool,\n    /**\n     * 输入框内置标签\n     */\n    label: PropTypes.node,\n    /**\n     * 输入框状态\n     */\n    state: PropTypes.oneOf(['success', 'loading', 'error']),\n    /**\n     * 输入提示\n     */\n    placeholder: PropTypes.string,\n    /**\n     * 日期值（受控）moment 对象\n     */\n    value: checkDateValue,\n    /**\n     * 初始日期值，moment 对象\n     */\n    defaultValue: checkDateValue,\n    /**\n     * 日期值的格式（用于限定用户输入和展示）\n     */\n    format: PropTypes.string,\n    /**\n     * 禁用日期函数\n     * @param {MomentObject} 日期值\n     * @param {String} view 当前视图类型，year: 年， month: 月, date: 日\n     * @return {Boolean} 是否禁用\n     */\n    disabledDate: PropTypes.func,\n    /**\n     * 自定义面板页脚\n     * @return {Node} 自定义的面板页脚组件\n     */\n    footerRender: PropTypes.func,\n    /**\n     * 日期值改变时的回调\n     * @param {MomentObject|String} value 日期值\n     */\n    onChange: PropTypes.func,\n    /**\n     * 输入框尺寸\n     */\n    size: PropTypes.oneOf(['small', 'medium', 'large']),\n    /**\n     * 是否禁用\n     */\n    disabled: PropTypes.bool,\n    /**\n     * 是否显示清空按钮\n     */\n    hasClear: PropTypes.bool,\n    /**\n     * 弹层显示状态\n     */\n    visible: PropTypes.bool,\n    /**\n     * 弹层默认是否显示\n     */\n    defaultVisible: PropTypes.bool,\n    /**\n     * 弹层展示状态变化时的回调\n     * @param {Boolean} visible 弹层是否显示\n     * @param {String} reason 触发弹层显示和隐藏的来源 calendarSelect 表示由日期表盘的选择触发； fromTrigger 表示由trigger的点击触发； docClick 表示由document的点击触发\n     */\n    onVisibleChange: PropTypes.func,\n    /**\n     * 弹层触发方式\n     */\n    popupTriggerType: PropTypes.oneOf(['click', 'hover']),\n    /**\n     * 弹层对齐方式, 具体含义见 OverLay文档\n     */\n    popupAlign: PropTypes.string,\n    /**\n     * 弹层容器\n     * @param {Element} target 目标元素\n     * @return {Element} 弹层的容器元素\n     */\n    popupContainer: PropTypes.any,\n    /**\n     * 弹层自定义样式\n     */\n    popupStyle: PropTypes.object,\n    /**\n     * 弹层自定义样式类\n     */\n    popupClassName: PropTypes.string,\n    /**\n     * 弹层其他属性\n     */\n    popupProps: PropTypes.object,\n    /**\n     * 是否跟随滚动\n     */\n    followTrigger: PropTypes.bool,\n    /**\n     * 输入框其他属性\n     */\n    inputProps: PropTypes.object,\n    yearCellRender: PropTypes.func, // 兼容 0.x yearCellRender\n    /**\n     * 日期输入框的 aria-label 属性\n     */\n    dateInputAriaLabel: PropTypes.string,\n    /**\n     * 是否为预览态\n     */\n    isPreview: PropTypes.bool,\n    /**\n     * 预览态模式下渲染的内容\n     * @param {MomentObject} value 年份\n     */\n    renderPreview: PropTypes.func,\n    locale: PropTypes.object,\n    className: PropTypes.string,\n    name: PropTypes.string,\n    popupComponent: PropTypes.elementType,\n    popupContent: PropTypes.node\n}, _class.defaultProps = {\n    prefix: 'next-',\n    rtl: false,\n    format: 'YYYY',\n    size: 'medium',\n    disabledDate: function disabledDate() {\n        return false;\n    },\n    footerRender: function footerRender() {\n        return null;\n    },\n    hasClear: true,\n    popupTriggerType: 'click',\n    popupAlign: 'tl tl',\n    locale: nextLocale.DatePicker,\n    onChange: func.noop,\n    onVisibleChange: func.noop\n}, _temp);\nYearPicker.displayName = 'YearPicker';\n\n\nexport default polyfill(YearPicker);"]},"metadata":{},"sourceType":"module"}