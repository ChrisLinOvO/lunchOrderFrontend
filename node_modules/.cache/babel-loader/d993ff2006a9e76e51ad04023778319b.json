{"ast":null,"code":"import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp;\n\nimport React, { Component, Children } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { polyfill } from 'react-lifecycles-compat';\nimport PropTypes from 'prop-types';\nimport { func, KEYCODE } from '../util';\nimport Overlay from './overlay';\nvar noop = func.noop,\n    makeChain = func.makeChain,\n    bindCtx = func.bindCtx;\n/**\n * Overlay.Popup\n * @description 继承 Overlay 的 API，除非特别说明\n * */\n\nvar Popup = (_temp = _class = function (_Component) {\n  _inherits(Popup, _Component);\n\n  function Popup(props) {\n    _classCallCheck(this, Popup);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.state = {\n      visible: typeof props.visible === 'undefined' ? props.defaultVisible : props.visible\n    };\n    bindCtx(_this, ['handleTriggerClick', 'handleTriggerKeyDown', 'handleTriggerMouseEnter', 'handleTriggerMouseLeave', 'handleTriggerFocus', 'handleTriggerBlur', 'handleContentMouseEnter', 'handleContentMouseLeave', 'handleContentMouseDown', 'handleRequestClose', 'handleMaskMouseEnter', 'handleMaskMouseLeave']);\n    return _this;\n  }\n\n  Popup.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    if ('visible' in nextProps) {\n      return _extends({}, prevState, {\n        visible: nextProps.visible\n      });\n    }\n\n    return null;\n  };\n\n  Popup.prototype.componentWillUnmount = function componentWillUnmount() {\n    var _this2 = this;\n\n    ['_timer', '_hideTimer', '_showTimer'].forEach(function (time) {\n      _this2[time] && clearTimeout(_this2[time]);\n    });\n  };\n\n  Popup.prototype.handleVisibleChange = function handleVisibleChange(visible, type, e) {\n    if (!('visible' in this.props)) {\n      this.setState({\n        visible: visible\n      });\n    }\n\n    this.props.onVisibleChange(visible, type, e);\n  };\n\n  Popup.prototype.handleTriggerClick = function handleTriggerClick(e) {\n    if (this.state.visible && !this.props.canCloseByTrigger) {\n      return;\n    }\n\n    this.handleVisibleChange(!this.state.visible, 'fromTrigger', e);\n  };\n\n  Popup.prototype.handleTriggerKeyDown = function handleTriggerKeyDown(e) {\n    var triggerClickKeycode = this.props.triggerClickKeycode;\n    var keycodes = Array.isArray(triggerClickKeycode) ? triggerClickKeycode : [triggerClickKeycode];\n\n    if (keycodes.includes(e.keyCode)) {\n      e.preventDefault();\n      this.handleTriggerClick(e);\n    }\n  };\n\n  Popup.prototype.handleTriggerMouseEnter = function handleTriggerMouseEnter(e) {\n    var _this3 = this;\n\n    this._mouseNotFirstOnMask = false;\n\n    if (this._hideTimer) {\n      clearTimeout(this._hideTimer);\n      this._hideTimer = null;\n    }\n\n    if (this._showTimer) {\n      clearTimeout(this._showTimer);\n      this._showTimer = null;\n    }\n\n    if (!this.state.visible) {\n      this._showTimer = setTimeout(function () {\n        _this3.handleVisibleChange(true, 'fromTrigger', e);\n      }, this.props.delay);\n    }\n  };\n\n  Popup.prototype.handleTriggerMouseLeave = function handleTriggerMouseLeave(e, type) {\n    var _this4 = this;\n\n    if (this._showTimer) {\n      clearTimeout(this._showTimer);\n      this._showTimer = null;\n    }\n\n    if (this.state.visible) {\n      this._hideTimer = setTimeout(function () {\n        _this4.handleVisibleChange(false, type || 'fromTrigger', e);\n      }, this.props.delay);\n    }\n  };\n\n  Popup.prototype.handleTriggerFocus = function handleTriggerFocus(e) {\n    this.handleVisibleChange(true, 'fromTrigger', e);\n  };\n\n  Popup.prototype.handleTriggerBlur = function handleTriggerBlur(e) {\n    if (!this._isForwardContent) {\n      this.handleVisibleChange(false, 'fromTrigger', e);\n    }\n\n    this._isForwardContent = false;\n  };\n\n  Popup.prototype.handleContentMouseDown = function handleContentMouseDown() {\n    this._isForwardContent = true;\n  };\n\n  Popup.prototype.handleContentMouseEnter = function handleContentMouseEnter() {\n    clearTimeout(this._hideTimer);\n  };\n\n  Popup.prototype.handleContentMouseLeave = function handleContentMouseLeave(e) {\n    this.handleTriggerMouseLeave(e, 'fromContent');\n  };\n\n  Popup.prototype.handleMaskMouseEnter = function handleMaskMouseEnter() {\n    if (!this._mouseNotFirstOnMask) {\n      clearTimeout(this._hideTimer);\n      this._hideTimer = null;\n      this._mouseNotFirstOnMask = false;\n    }\n  };\n\n  Popup.prototype.handleMaskMouseLeave = function handleMaskMouseLeave() {\n    this._mouseNotFirstOnMask = true;\n  };\n\n  Popup.prototype.handleRequestClose = function handleRequestClose(type, e) {\n    this.handleVisibleChange(false, type, e);\n  };\n\n  Popup.prototype.renderTrigger = function renderTrigger() {\n    var _this5 = this;\n\n    var _props = this.props,\n        trigger = _props.trigger,\n        disabled = _props.disabled;\n    var props = {\n      key: 'trigger',\n      'aria-haspopup': true,\n      'aria-expanded': this.state.visible\n    };\n\n    if (!this.state.visible) {\n      props['aria-describedby'] = undefined;\n    }\n\n    if (!disabled) {\n      var triggerType = this.props.triggerType;\n      var triggerTypes = Array.isArray(triggerType) ? triggerType : [triggerType];\n\n      var _ref = trigger && trigger.props || {},\n          onClick = _ref.onClick,\n          onKeyDown = _ref.onKeyDown,\n          onMouseEnter = _ref.onMouseEnter,\n          onMouseLeave = _ref.onMouseLeave,\n          onFocus = _ref.onFocus,\n          onBlur = _ref.onBlur;\n\n      triggerTypes.forEach(function (triggerType) {\n        switch (triggerType) {\n          case 'click':\n            props.onClick = makeChain(_this5.handleTriggerClick, onClick);\n            props.onKeyDown = makeChain(_this5.handleTriggerKeyDown, onKeyDown);\n            break;\n\n          case 'hover':\n            props.onMouseEnter = makeChain(_this5.handleTriggerMouseEnter, onMouseEnter);\n            props.onMouseLeave = makeChain(_this5.handleTriggerMouseLeave, onMouseLeave);\n            break;\n\n          case 'focus':\n            props.onFocus = makeChain(_this5.handleTriggerFocus, onFocus);\n            props.onBlur = makeChain(_this5.handleTriggerBlur, onBlur);\n            break;\n\n          default:\n            break;\n        }\n      });\n    }\n\n    return trigger && React.cloneElement(trigger, props);\n  };\n\n  Popup.prototype.renderContent = function renderContent() {\n    var _this6 = this;\n\n    var _props2 = this.props,\n        children = _props2.children,\n        triggerType = _props2.triggerType;\n    var triggerTypes = Array.isArray(triggerType) ? triggerType : [triggerType];\n    var content = Children.only(children);\n    var _content$props = content.props,\n        onMouseDown = _content$props.onMouseDown,\n        onMouseEnter = _content$props.onMouseEnter,\n        onMouseLeave = _content$props.onMouseLeave;\n    var props = {\n      key: 'portal'\n    };\n    triggerTypes.forEach(function (triggerType) {\n      switch (triggerType) {\n        case 'focus':\n          props.onMouseDown = makeChain(_this6.handleContentMouseDown, onMouseDown);\n          break;\n\n        case 'hover':\n          props.onMouseEnter = makeChain(_this6.handleContentMouseEnter, onMouseEnter);\n          props.onMouseLeave = makeChain(_this6.handleContentMouseLeave, onMouseLeave);\n          break;\n\n        default:\n          break;\n      }\n    });\n    return React.cloneElement(content, props);\n  };\n\n  Popup.prototype.renderPortal = function renderPortal() {\n    var _this7 = this;\n\n    var _props3 = this.props,\n        target = _props3.target,\n        safeNode = _props3.safeNode,\n        followTrigger = _props3.followTrigger,\n        triggerType = _props3.triggerType,\n        hasMask = _props3.hasMask,\n        wrapperStyle = _props3.wrapperStyle,\n        others = _objectWithoutProperties(_props3, ['target', 'safeNode', 'followTrigger', 'triggerType', 'hasMask', 'wrapperStyle']);\n\n    var container = this.props.container;\n\n    var findTriggerNode = function findTriggerNode() {\n      return findDOMNode(_this7);\n    };\n\n    var safeNodes = Array.isArray(safeNode) ? [].concat(safeNode) : [safeNode];\n    safeNodes.unshift(findTriggerNode);\n    var newWrapperStyle = wrapperStyle || {};\n\n    if (followTrigger) {\n      container = function container(trigger) {\n        return trigger && trigger.parentNode || trigger;\n      };\n\n      newWrapperStyle.position = 'relative';\n    }\n\n    if (triggerType === 'hover' && hasMask) {\n      others.onMaskMouseEnter = this.handleMaskMouseEnter;\n      others.onMaskMouseLeave = this.handleMaskMouseLeave;\n    }\n\n    return React.createElement(Overlay, _extends({}, others, {\n      key: 'overlay',\n      ref: function ref(overlay) {\n        return _this7.overlay = overlay;\n      },\n      visible: this.state.visible,\n      target: target || findTriggerNode,\n      container: container,\n      safeNode: safeNodes,\n      wrapperStyle: newWrapperStyle,\n      triggerType: triggerType,\n      hasMask: hasMask,\n      onRequestClose: this.handleRequestClose\n    }), this.props.children && this.renderContent());\n  };\n\n  Popup.prototype.render = function render() {\n    return [this.renderTrigger(), this.renderPortal()];\n  };\n\n  return Popup;\n}(Component), _class.propTypes = {\n  /**\n   * 弹层内容\n   */\n  children: PropTypes.node,\n\n  /**\n   * 触发弹层显示或隐藏的元素\n   */\n  trigger: PropTypes.element,\n\n  /**\n   * 触发弹层显示或隐藏的操作类型，可以是 'click'，'hover'，'focus'，或者它们组成的数组，如 ['hover', 'focus']\n   */\n  triggerType: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n\n  /**\n   * 当 triggerType 为 click 时才生效，可自定义触发弹层显示的键盘码\n   */\n  triggerClickKeycode: PropTypes.oneOfType([PropTypes.number, PropTypes.array]),\n\n  /**\n   * 弹层当前是否显示\n   */\n  visible: PropTypes.bool,\n\n  /**\n   * 弹层默认是否显示\n   */\n  defaultVisible: PropTypes.bool,\n\n  /**\n   * 弹层显示或隐藏时触发的回调函数\n   * @param {Boolean} visible 弹层是否显示\n   * @param {String} type 触发弹层显示或隐藏的来源 fromTrigger 表示由trigger的点击触发； docClick 表示由document的点击触发\n   * @param {Object} e DOM事件\n   */\n  onVisibleChange: PropTypes.func,\n\n  /**\n   * 设置此属性，弹层无法显示或隐藏\n   */\n  disabled: PropTypes.bool,\n  autoFit: PropTypes.bool,\n\n  /**\n   * 弹层显示或隐藏的延时时间（以毫秒为单位），在 triggerType 被设置为 hover 时生效\n   */\n  delay: PropTypes.number,\n\n  /**\n   * trigger 是否可以关闭弹层\n   */\n  canCloseByTrigger: PropTypes.bool,\n\n  /**\n   * 弹层定位的参照元素\n   * @default target 属性，即触发元素\n   */\n  target: PropTypes.any,\n  safeNode: PropTypes.any,\n\n  /**\n   * 是否跟随trigger滚动\n   */\n  followTrigger: PropTypes.bool,\n  container: PropTypes.any,\n  hasMask: PropTypes.bool,\n  wrapperStyle: PropTypes.object,\n  rtl: PropTypes.bool\n}, _class.defaultProps = {\n  triggerType: 'hover',\n  triggerClickKeycode: [KEYCODE.SPACE, KEYCODE.ENTER],\n  defaultVisible: false,\n  onVisibleChange: noop,\n  disabled: false,\n  autoFit: false,\n  delay: 200,\n  canCloseByTrigger: true,\n  followTrigger: false,\n  container: function container() {\n    return document.body;\n  },\n  rtl: false\n}, _temp);\nPopup.displayName = 'Popup';\nexport default polyfill(Popup);","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/overlay/popup.js"],"names":["_objectWithoutProperties","_extends","_classCallCheck","_possibleConstructorReturn","_inherits","_class","_temp","React","Component","Children","findDOMNode","polyfill","PropTypes","func","KEYCODE","Overlay","noop","makeChain","bindCtx","Popup","_Component","props","_this","call","state","visible","defaultVisible","getDerivedStateFromProps","nextProps","prevState","prototype","componentWillUnmount","_this2","forEach","time","clearTimeout","handleVisibleChange","type","e","setState","onVisibleChange","handleTriggerClick","canCloseByTrigger","handleTriggerKeyDown","triggerClickKeycode","keycodes","Array","isArray","includes","keyCode","preventDefault","handleTriggerMouseEnter","_this3","_mouseNotFirstOnMask","_hideTimer","_showTimer","setTimeout","delay","handleTriggerMouseLeave","_this4","handleTriggerFocus","handleTriggerBlur","_isForwardContent","handleContentMouseDown","handleContentMouseEnter","handleContentMouseLeave","handleMaskMouseEnter","handleMaskMouseLeave","handleRequestClose","renderTrigger","_this5","_props","trigger","disabled","key","undefined","triggerType","triggerTypes","_ref","onClick","onKeyDown","onMouseEnter","onMouseLeave","onFocus","onBlur","cloneElement","renderContent","_this6","_props2","children","content","only","_content$props","onMouseDown","renderPortal","_this7","_props3","target","safeNode","followTrigger","hasMask","wrapperStyle","others","container","findTriggerNode","safeNodes","concat","unshift","newWrapperStyle","parentNode","position","onMaskMouseEnter","onMaskMouseLeave","createElement","ref","overlay","onRequestClose","render","propTypes","node","element","oneOfType","string","array","number","bool","autoFit","any","object","rtl","defaultProps","SPACE","ENTER","document","body","displayName"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp;\n\nimport React, { Component, Children } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { polyfill } from 'react-lifecycles-compat';\nimport PropTypes from 'prop-types';\nimport { func, KEYCODE } from '../util';\nimport Overlay from './overlay';\n\nvar noop = func.noop,\n    makeChain = func.makeChain,\n    bindCtx = func.bindCtx;\n\n/**\n * Overlay.Popup\n * @description 继承 Overlay 的 API，除非特别说明\n * */\n\nvar Popup = (_temp = _class = function (_Component) {\n    _inherits(Popup, _Component);\n\n    function Popup(props) {\n        _classCallCheck(this, Popup);\n\n        var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n        _this.state = {\n            visible: typeof props.visible === 'undefined' ? props.defaultVisible : props.visible\n        };\n\n        bindCtx(_this, ['handleTriggerClick', 'handleTriggerKeyDown', 'handleTriggerMouseEnter', 'handleTriggerMouseLeave', 'handleTriggerFocus', 'handleTriggerBlur', 'handleContentMouseEnter', 'handleContentMouseLeave', 'handleContentMouseDown', 'handleRequestClose', 'handleMaskMouseEnter', 'handleMaskMouseLeave']);\n        return _this;\n    }\n\n    Popup.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n        if ('visible' in nextProps) {\n            return _extends({}, prevState, {\n                visible: nextProps.visible\n            });\n        }\n\n        return null;\n    };\n\n    Popup.prototype.componentWillUnmount = function componentWillUnmount() {\n        var _this2 = this;\n\n        ['_timer', '_hideTimer', '_showTimer'].forEach(function (time) {\n            _this2[time] && clearTimeout(_this2[time]);\n        });\n    };\n\n    Popup.prototype.handleVisibleChange = function handleVisibleChange(visible, type, e) {\n        if (!('visible' in this.props)) {\n            this.setState({\n                visible: visible\n            });\n        }\n\n        this.props.onVisibleChange(visible, type, e);\n    };\n\n    Popup.prototype.handleTriggerClick = function handleTriggerClick(e) {\n        if (this.state.visible && !this.props.canCloseByTrigger) {\n            return;\n        }\n\n        this.handleVisibleChange(!this.state.visible, 'fromTrigger', e);\n    };\n\n    Popup.prototype.handleTriggerKeyDown = function handleTriggerKeyDown(e) {\n        var triggerClickKeycode = this.props.triggerClickKeycode;\n\n        var keycodes = Array.isArray(triggerClickKeycode) ? triggerClickKeycode : [triggerClickKeycode];\n        if (keycodes.includes(e.keyCode)) {\n            e.preventDefault();\n            this.handleTriggerClick(e);\n        }\n    };\n\n    Popup.prototype.handleTriggerMouseEnter = function handleTriggerMouseEnter(e) {\n        var _this3 = this;\n\n        this._mouseNotFirstOnMask = false;\n\n        if (this._hideTimer) {\n            clearTimeout(this._hideTimer);\n            this._hideTimer = null;\n        }\n        if (this._showTimer) {\n            clearTimeout(this._showTimer);\n            this._showTimer = null;\n        }\n        if (!this.state.visible) {\n            this._showTimer = setTimeout(function () {\n                _this3.handleVisibleChange(true, 'fromTrigger', e);\n            }, this.props.delay);\n        }\n    };\n\n    Popup.prototype.handleTriggerMouseLeave = function handleTriggerMouseLeave(e, type) {\n        var _this4 = this;\n\n        if (this._showTimer) {\n            clearTimeout(this._showTimer);\n            this._showTimer = null;\n        }\n        if (this.state.visible) {\n            this._hideTimer = setTimeout(function () {\n                _this4.handleVisibleChange(false, type || 'fromTrigger', e);\n            }, this.props.delay);\n        }\n    };\n\n    Popup.prototype.handleTriggerFocus = function handleTriggerFocus(e) {\n        this.handleVisibleChange(true, 'fromTrigger', e);\n    };\n\n    Popup.prototype.handleTriggerBlur = function handleTriggerBlur(e) {\n        if (!this._isForwardContent) {\n            this.handleVisibleChange(false, 'fromTrigger', e);\n        }\n        this._isForwardContent = false;\n    };\n\n    Popup.prototype.handleContentMouseDown = function handleContentMouseDown() {\n        this._isForwardContent = true;\n    };\n\n    Popup.prototype.handleContentMouseEnter = function handleContentMouseEnter() {\n        clearTimeout(this._hideTimer);\n    };\n\n    Popup.prototype.handleContentMouseLeave = function handleContentMouseLeave(e) {\n        this.handleTriggerMouseLeave(e, 'fromContent');\n    };\n\n    Popup.prototype.handleMaskMouseEnter = function handleMaskMouseEnter() {\n        if (!this._mouseNotFirstOnMask) {\n            clearTimeout(this._hideTimer);\n            this._hideTimer = null;\n            this._mouseNotFirstOnMask = false;\n        }\n    };\n\n    Popup.prototype.handleMaskMouseLeave = function handleMaskMouseLeave() {\n        this._mouseNotFirstOnMask = true;\n    };\n\n    Popup.prototype.handleRequestClose = function handleRequestClose(type, e) {\n        this.handleVisibleChange(false, type, e);\n    };\n\n    Popup.prototype.renderTrigger = function renderTrigger() {\n        var _this5 = this;\n\n        var _props = this.props,\n            trigger = _props.trigger,\n            disabled = _props.disabled;\n\n        var props = {\n            key: 'trigger',\n            'aria-haspopup': true,\n            'aria-expanded': this.state.visible\n        };\n\n        if (!this.state.visible) {\n            props['aria-describedby'] = undefined;\n        }\n\n        if (!disabled) {\n            var triggerType = this.props.triggerType;\n\n            var triggerTypes = Array.isArray(triggerType) ? triggerType : [triggerType];\n\n            var _ref = trigger && trigger.props || {},\n                onClick = _ref.onClick,\n                onKeyDown = _ref.onKeyDown,\n                onMouseEnter = _ref.onMouseEnter,\n                onMouseLeave = _ref.onMouseLeave,\n                onFocus = _ref.onFocus,\n                onBlur = _ref.onBlur;\n\n            triggerTypes.forEach(function (triggerType) {\n                switch (triggerType) {\n                    case 'click':\n                        props.onClick = makeChain(_this5.handleTriggerClick, onClick);\n                        props.onKeyDown = makeChain(_this5.handleTriggerKeyDown, onKeyDown);\n                        break;\n                    case 'hover':\n                        props.onMouseEnter = makeChain(_this5.handleTriggerMouseEnter, onMouseEnter);\n                        props.onMouseLeave = makeChain(_this5.handleTriggerMouseLeave, onMouseLeave);\n                        break;\n                    case 'focus':\n                        props.onFocus = makeChain(_this5.handleTriggerFocus, onFocus);\n                        props.onBlur = makeChain(_this5.handleTriggerBlur, onBlur);\n                        break;\n                    default:\n                        break;\n                }\n            });\n        }\n\n        return trigger && React.cloneElement(trigger, props);\n    };\n\n    Popup.prototype.renderContent = function renderContent() {\n        var _this6 = this;\n\n        var _props2 = this.props,\n            children = _props2.children,\n            triggerType = _props2.triggerType;\n\n        var triggerTypes = Array.isArray(triggerType) ? triggerType : [triggerType];\n        var content = Children.only(children);\n        var _content$props = content.props,\n            onMouseDown = _content$props.onMouseDown,\n            onMouseEnter = _content$props.onMouseEnter,\n            onMouseLeave = _content$props.onMouseLeave;\n\n        var props = {\n            key: 'portal'\n        };\n\n        triggerTypes.forEach(function (triggerType) {\n            switch (triggerType) {\n                case 'focus':\n                    props.onMouseDown = makeChain(_this6.handleContentMouseDown, onMouseDown);\n                    break;\n                case 'hover':\n                    props.onMouseEnter = makeChain(_this6.handleContentMouseEnter, onMouseEnter);\n                    props.onMouseLeave = makeChain(_this6.handleContentMouseLeave, onMouseLeave);\n                    break;\n                default:\n                    break;\n            }\n        });\n\n        return React.cloneElement(content, props);\n    };\n\n    Popup.prototype.renderPortal = function renderPortal() {\n        var _this7 = this;\n\n        var _props3 = this.props,\n            target = _props3.target,\n            safeNode = _props3.safeNode,\n            followTrigger = _props3.followTrigger,\n            triggerType = _props3.triggerType,\n            hasMask = _props3.hasMask,\n            wrapperStyle = _props3.wrapperStyle,\n            others = _objectWithoutProperties(_props3, ['target', 'safeNode', 'followTrigger', 'triggerType', 'hasMask', 'wrapperStyle']);\n\n        var container = this.props.container;\n\n        var findTriggerNode = function findTriggerNode() {\n            return findDOMNode(_this7);\n        };\n        var safeNodes = Array.isArray(safeNode) ? [].concat(safeNode) : [safeNode];\n        safeNodes.unshift(findTriggerNode);\n\n        var newWrapperStyle = wrapperStyle || {};\n\n        if (followTrigger) {\n            container = function container(trigger) {\n                return trigger && trigger.parentNode || trigger;\n            };\n            newWrapperStyle.position = 'relative';\n        }\n\n        if (triggerType === 'hover' && hasMask) {\n            others.onMaskMouseEnter = this.handleMaskMouseEnter;\n            others.onMaskMouseLeave = this.handleMaskMouseLeave;\n        }\n\n        return React.createElement(\n            Overlay,\n            _extends({}, others, {\n                key: 'overlay',\n                ref: function ref(overlay) {\n                    return _this7.overlay = overlay;\n                },\n                visible: this.state.visible,\n                target: target || findTriggerNode,\n                container: container,\n                safeNode: safeNodes,\n                wrapperStyle: newWrapperStyle,\n                triggerType: triggerType,\n                hasMask: hasMask,\n                onRequestClose: this.handleRequestClose\n            }),\n            this.props.children && this.renderContent()\n        );\n    };\n\n    Popup.prototype.render = function render() {\n        return [this.renderTrigger(), this.renderPortal()];\n    };\n\n    return Popup;\n}(Component), _class.propTypes = {\n    /**\n     * 弹层内容\n     */\n    children: PropTypes.node,\n    /**\n     * 触发弹层显示或隐藏的元素\n     */\n    trigger: PropTypes.element,\n    /**\n     * 触发弹层显示或隐藏的操作类型，可以是 'click'，'hover'，'focus'，或者它们组成的数组，如 ['hover', 'focus']\n     */\n    triggerType: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n    /**\n     * 当 triggerType 为 click 时才生效，可自定义触发弹层显示的键盘码\n     */\n\n    triggerClickKeycode: PropTypes.oneOfType([PropTypes.number, PropTypes.array]),\n    /**\n     * 弹层当前是否显示\n     */\n    visible: PropTypes.bool,\n    /**\n     * 弹层默认是否显示\n     */\n    defaultVisible: PropTypes.bool,\n    /**\n     * 弹层显示或隐藏时触发的回调函数\n     * @param {Boolean} visible 弹层是否显示\n     * @param {String} type 触发弹层显示或隐藏的来源 fromTrigger 表示由trigger的点击触发； docClick 表示由document的点击触发\n     * @param {Object} e DOM事件\n     */\n    onVisibleChange: PropTypes.func,\n    /**\n     * 设置此属性，弹层无法显示或隐藏\n     */\n    disabled: PropTypes.bool,\n    autoFit: PropTypes.bool,\n    /**\n     * 弹层显示或隐藏的延时时间（以毫秒为单位），在 triggerType 被设置为 hover 时生效\n     */\n    delay: PropTypes.number,\n    /**\n     * trigger 是否可以关闭弹层\n     */\n    canCloseByTrigger: PropTypes.bool,\n    /**\n     * 弹层定位的参照元素\n     * @default target 属性，即触发元素\n     */\n    target: PropTypes.any,\n    safeNode: PropTypes.any,\n    /**\n     * 是否跟随trigger滚动\n     */\n    followTrigger: PropTypes.bool,\n    container: PropTypes.any,\n    hasMask: PropTypes.bool,\n    wrapperStyle: PropTypes.object,\n    rtl: PropTypes.bool\n}, _class.defaultProps = {\n    triggerType: 'hover',\n    triggerClickKeycode: [KEYCODE.SPACE, KEYCODE.ENTER],\n    defaultVisible: false,\n    onVisibleChange: noop,\n    disabled: false,\n    autoFit: false,\n    delay: 200,\n    canCloseByTrigger: true,\n    followTrigger: false,\n    container: function container() {\n        return document.body;\n    },\n    rtl: false\n}, _temp);\nPopup.displayName = 'Popup';\n\n\nexport default polyfill(Popup);"]},"metadata":{},"sourceType":"module"}