{"ast":null,"code":"var _jsxFileName = \"/Users/Chris/Project/lunch-order-backstage/src/pages/Lunch/Lunch.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport OrderTable from '../../components/OrderTable';\nimport Menu from '../../components/Menu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Lunch = props => {\n  _s();\n\n  const tarProps = {\n    //訂單\n    dbName: \"orders\",\n    keys: {\n      name: {\n        type: \"input\",\n        text: \"姓名\"\n      },\n      text: {\n        type: \"input\",\n        text: \"文字\"\n      },\n      money: {\n        type: \"input\",\n        text: \"金額\"\n      }\n    }\n  };\n  const menuProps = {\n    //菜單\n    dbName: \"uploads\",\n    keys: {\n      createAt: {\n        type: 'none',\n        text: '建立時間'\n      },\n      files: {\n        type: \"uploads\",\n        text: \"菜單\"\n      }\n    }\n  };\n  const [myListData, setMyListData] = useState([]); //訂單\n\n  const [myMenuData, setMyMenuData] = useState([]); //菜單\n\n  const [myListDataAll, setMyListDataAll] = useState([]);\n  const [totalAllProps, seTotalAllProps] = useState([]); //總金額\n\n  const [payOk, setPayOk] = useState([]); //付錢\n\n  useEffect(() => {\n    const idNo = [false];\n    const payNo = [...myListData].filter(i => idNo.includes(i.pay)).map(x => x.name);\n    const idYes = [false];\n    const payYes = [...myListData].filter(i => idYes.includes(i.pay)).map(x => x.money).reduce(function (a, b) {\n      return parseInt(a) + parseInt(b);\n    }, 0);\n    console.log(\"payNo\", payNo);\n    console.log(\"payYes\", payYes);\n    props.setPayNoArr(payNo);\n    props.setPayYes(payYes);\n  }, [myListData]);\n  useEffect(() => {\n    const sortedArr = [...myListDataAll].map(e => {\n      let hasIncludes = false;\n      Object.keys(e).forEach(ee => {\n        let val2 = e[ee];\n        if (val2.toString().includes(props.filterStr)) hasIncludes = true;\n      });\n      if (hasIncludes) return e;\n      return false;\n    }).filter(e => e !== false);\n    setMyListData([...sortedArr]);\n  }, [props.filterStr]);\n  useEffect(() => {\n    const pay = [...totalAllProps].map(x => parseInt(x.money)).reduce(function (a, b) {\n      return a + b;\n    }, 0);\n    console.log(\"pay\", pay);\n    props.setPayAllTotal(pay);\n  }, [totalAllProps]); // useEffect(() => {\n  //     const payOkRes =  [...payOk].reduce(function(a, b) {\n  //         return parseInt(a) + parseInt(b);\n  //     }, 0);\n  //    console.log(\"payOk\",payOkRes)\n  //    props.setPayOkTotal(payOkRes)  \n  // }, [payOk]);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(OrderTable, {\n      tarProps: tarProps,\n      listData: myListData,\n      listDataProps: data => setMyListData([...data]),\n      listDataAllProps: data => setMyListDataAll([...data]),\n      payAllTotalProps: data => seTotalAllProps([...data]) // setPayOkProps={data =>setPayOk([...payOk,...[data]])}\n\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      menuProps: menuProps,\n      menuData: myMenuData,\n      menuDataProps: data => setMyMenuData([...data])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Lunch, \"UcJH+FIN8ysH64Ojm5UFbXMIGlY=\");\n\n_c = Lunch;\nexport default Lunch;\n\nvar _c;\n\n$RefreshReg$(_c, \"Lunch\");","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/src/pages/Lunch/Lunch.jsx"],"names":["React","useState","useEffect","OrderTable","Menu","Lunch","props","tarProps","dbName","keys","name","type","text","money","menuProps","createAt","files","myListData","setMyListData","myMenuData","setMyMenuData","myListDataAll","setMyListDataAll","totalAllProps","seTotalAllProps","payOk","setPayOk","idNo","payNo","filter","i","includes","pay","map","x","idYes","payYes","reduce","a","b","parseInt","console","log","setPayNoArr","setPayYes","sortedArr","e","hasIncludes","Object","forEach","ee","val2","toString","filterStr","setPayAllTotal","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport OrderTable from '../../components/OrderTable';\nimport Menu from '../../components/Menu';\n\nconst  Lunch =(props)=> {\n    const tarProps = { //訂單\n        dbName: \"orders\",\n        keys: {\n            name: {\n                type: \"input\",\n                text: \"姓名\"\n            },\n            text: {\n                type: \"input\",\n                text: \"文字\"\n            },\n            money: {\n                type: \"input\",\n                text: \"金額\"\n            },\n          \n    \n        }\n    }\n\n    const menuProps = { //菜單\n        dbName: \"uploads\",\n        keys: {\n            createAt:{\n                type:'none',\n                text:'建立時間'\n            },\n            files: {\n                type: \"uploads\",\n                text: \"菜單\"\n            },\n          \n          \n    \n        }\n    }\n\n    const [myListData, setMyListData] = useState([]);//訂單\n    const [myMenuData, setMyMenuData] = useState([]);//菜單\n    const [myListDataAll, setMyListDataAll] = useState([]);\n    const [totalAllProps, seTotalAllProps] = useState([]);//總金額\n    const [payOk, setPayOk] = useState([]);//付錢\n    useEffect(() => {\n\n         \n        const idNo = [false]\n        const payNo =  [...myListData].filter( i => idNo.includes( i.pay ) ).map(x=>x.name);\n        const idYes = [false]\n        const payYes =  [...myListData].filter( i => idYes.includes( i.pay ) ).map(x=>x.money).reduce(function(a, b) {\n            return parseInt(a) + parseInt(b);\n        }, 0);\n\n\n       console.log(\"payNo\",payNo)\n       console.log(\"payYes\",payYes)\n       props.setPayNoArr(payNo)\n       props.setPayYes(payYes)\n           \n\n     \n    }, [myListData]);\n\n    useEffect(() => {\n\n        const sortedArr = [...myListDataAll].map((e) => {\n            let hasIncludes = false;\n            Object.keys(e).forEach((ee) => {\n                let val2 = e[ee];\n                if (val2.toString().includes(props.filterStr)) hasIncludes = true;\n            })\n            if (hasIncludes) return e;\n            return false;\n        }).filter((e) => e !== false);\n        setMyListData([...sortedArr]);\n    }, [props.filterStr]);\n\n\n    useEffect(() => {\n\n         \n\n        const pay =  [...totalAllProps].map(x=>parseInt(x.money)).reduce(function(a, b) {\n            return a + b;\n        }, 0);\n\n       console.log(\"pay\",pay)\n           \n       props.setPayAllTotal(pay)\n     \n    }, [totalAllProps]);\n\n    // useEffect(() => {\n\n         \n\n    //     const payOkRes =  [...payOk].reduce(function(a, b) {\n    //         return parseInt(a) + parseInt(b);\n    //     }, 0);\n\n    //    console.log(\"payOk\",payOkRes)\n    //    props.setPayOkTotal(payOkRes)  \n\n     \n    // }, [payOk]);\n    return (\n        <>\n                 \n                <OrderTable \n                tarProps={tarProps} \n                listData={myListData} \n                listDataProps={data => setMyListData([...data])} \n                listDataAllProps={data => setMyListDataAll([...data])}  \n                payAllTotalProps={data => seTotalAllProps([...data])} \n                // setPayOkProps={data =>setPayOk([...payOk,...[data]])}\n\n                />\n                <br /><br />\n                <Menu menuProps={menuProps} menuData={myMenuData} menuDataProps={data => setMyMenuData([...data])}  />\n        </>\n    );\n}\n\nexport default Lunch;\n"]},"metadata":{},"sourceType":"module"}