{"ast":null,"code":"import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\n\nvar _class, _temp2;\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport ConfigProvider from '../config-provider';\nimport Message from '../message';\nimport zhCN from '../locale/zh-cn';\nimport dialog from './dialog';\nvar Dialog = ConfigProvider.config(dialog);\n\nvar noop = function noop() {};\n\nvar MESSAGE_TYPE = {\n  alert: 'warning',\n  confirm: 'help'\n};\nexport var ModalInner = function ModalInner(_ref) {\n  var type = _ref.type,\n      _ref$messageProps = _ref.messageProps,\n      messageProps = _ref$messageProps === undefined ? {} : _ref$messageProps,\n      title = _ref.title,\n      rtl = _ref.rtl,\n      _ref$prefix = _ref.prefix,\n      prefix = _ref$prefix === undefined ? 'next-' : _ref$prefix,\n      content = _ref.content;\n  return React.createElement(Message, _extends({\n    size: 'large',\n    shape: 'addon',\n    type: MESSAGE_TYPE[type]\n  }, messageProps, {\n    title: title,\n    rtl: rtl,\n    className: cx(prefix + 'dialog-message', messageProps.className)\n  }), content);\n};\nvar Modal = (_temp2 = _class = function (_Component) {\n  _inherits(Modal, _Component);\n\n  function Modal() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      visible: true,\n      loading: false\n    }, _this.close = function () {\n      _this.setState({\n        visible: false\n      });\n    }, _this.loading = function (loading) {\n      _this.setState({\n        loading: loading\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Modal.prototype.wrapper = function wrapper(fn, callback) {\n    var _this2 = this;\n\n    return function () {\n      var res = fn.apply(undefined, arguments);\n\n      if (res && res.then) {\n        _this2.loading(true);\n\n        res.then(function (result) {\n          _this2.loading(false);\n\n          if (result !== false) {\n            return callback();\n          }\n        }).catch(function (e) {\n          _this2.loading(false);\n\n          throw e;\n        });\n      } else if (res !== false) {\n        return callback();\n      }\n    };\n  };\n\n  Modal.prototype.render = function render() {\n    var _props = this.props,\n        prefix = _props.prefix,\n        type = _props.type,\n        title = _props.title,\n        content = _props.content,\n        messageProps = _props.messageProps,\n        footerActions = _props.footerActions,\n        onOk = _props.onOk,\n        onCancel = _props.onCancel,\n        onClose = _props.onClose,\n        okProps = _props.okProps,\n        needWrapper = _props.needWrapper,\n        rtl = _props.rtl,\n        className = _props.className,\n        others = _objectWithoutProperties(_props, ['prefix', 'type', 'title', 'content', 'messageProps', 'footerActions', 'onOk', 'onCancel', 'onClose', 'okProps', 'needWrapper', 'rtl', 'className']);\n\n    var newTitle = needWrapper && type ? null : title;\n    var newContent = needWrapper && type ? React.createElement(ModalInner, {\n      type: type,\n      messageProps: messageProps,\n      title: title,\n      rtl: rtl,\n      prefix: prefix,\n      content: content\n    }) : content;\n    var newFooterActions = footerActions || (type === 'alert' ? ['ok'] : type === 'confirm' ? ['ok', 'cancel'] : undefined);\n    var newOnOk = this.wrapper(onOk, this.close);\n    var newOnCancel = this.wrapper(onCancel, this.close);\n    var newOnClose = this.wrapper(onClose, this.close);\n    var _state = this.state,\n        visible = _state.visible,\n        loading = _state.loading;\n    okProps.loading = loading;\n    var classNames = cx(prefix + 'dialog-quick', className);\n    return React.createElement(Dialog, _extends({\n      prefix: prefix,\n      role: 'alertdialog'\n    }, others, {\n      visible: visible,\n      title: newTitle,\n      rtl: rtl,\n      footerActions: newFooterActions,\n      onOk: this.state.loading ? noop : newOnOk,\n      onCancel: newOnCancel,\n      onClose: newOnClose,\n      okProps: okProps,\n      className: classNames\n    }), newContent);\n  };\n\n  return Modal;\n}(Component), _class.propTypes = {\n  prefix: PropTypes.string,\n  pure: PropTypes.bool,\n  rtl: PropTypes.bool,\n  type: PropTypes.oneOf(['alert', 'confirm']),\n  title: PropTypes.node,\n  content: PropTypes.node,\n  messageProps: PropTypes.object,\n  footerActions: PropTypes.array,\n\n  /**\n   * Callback function triggered when Ok button is clicked\n   * @param {Object} event click event object\n   * @returns {Promise} Optionally handles a Promise return object\n   */\n  onOk: PropTypes.func,\n\n  /**\n   * Callback function triggered when Cancel button is clicked\n   * @param {Object} event click event object\n   * @returns {Promise} Optionally handles a Promise return object\n   */\n  onCancel: PropTypes.func,\n\n  /**\n   * Callback function triggered when Close button is clicked\n   * @param {Object} event click event object\n   * @returns {Promise} Optionally handles a Promise return object\n   */\n  onClose: PropTypes.func,\n  okProps: PropTypes.object,\n  locale: PropTypes.object,\n  needWrapper: PropTypes.bool,\n  className: PropTypes.string\n}, _class.defaultProps = {\n  prefix: 'next-',\n  pure: false,\n  messageProps: {},\n  onOk: noop,\n  onCancel: noop,\n  onClose: noop,\n  okProps: {},\n  locale: zhCN.Dialog,\n  needWrapper: true\n}, _temp2);\nModal.displayName = 'Modal';\nvar ConfigModal = ConfigProvider.config(Modal, {\n  componentName: 'Dialog'\n});\n/**\n * 创建对话框\n * @exportName show\n * @param {Object} config 配置项\n * @returns {Object} \b包含有 hide 方法，可用来关闭对话框\n */\n\nvar _show = function _show() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var container = document.createElement('div');\n\n  var unmount = function unmount() {\n    if (config.afterClose) {\n      config.afterClose();\n    }\n\n    ReactDOM.unmountComponentAtNode(container);\n    container.parentNode.removeChild(container);\n  };\n\n  document.body.appendChild(container);\n  var newContext = config.contextConfig;\n  if (!newContext) newContext = ConfigProvider.getContext();\n  var instance = void 0,\n      myRef = void 0;\n  ReactDOM.render(React.createElement(ConfigProvider, newContext, React.createElement(ConfigModal, _extends({}, config, {\n    afterClose: unmount,\n    ref: function ref(_ref2) {\n      myRef = _ref2;\n    }\n  }))), container, function () {\n    instance = myRef;\n  });\n  return {\n    hide: function hide() {\n      var inc = instance && instance.getInstance();\n      inc && inc.close();\n    }\n  };\n};\n\nexport { _show as show };\n\nvar methodFactory = function methodFactory(type) {\n  return function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    config.type = type;\n    return _show(config);\n  };\n};\n/**\n * 创建警示对话框\n * @exportName alert\n * @param {Object} config 配置项\n * @returns {Object} \b包含有 hide 方法，可用来关闭对话框\n */\n\n\nvar _alert = methodFactory('alert');\n/**\n * 创建确认对话框\n * @exportName confirm\n * @param {Object} config 配置项\n * @returns {Object} \b包含有 hide 方法，可用来关闭对话框\n */\n\n\nexport { _alert as alert };\n\nvar _confirm = methodFactory('confirm');\n\nexport { _confirm as confirm };\nexport var withContext = function withContext(WrappedComponent) {\n  var HOC = function HOC(props) {\n    return React.createElement(ConfigProvider.Consumer, null, function (contextConfig) {\n      return React.createElement(WrappedComponent, _extends({}, props, {\n        contextDialog: {\n          show: function show() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _show(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          },\n          alert: function alert() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _alert(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          },\n          confirm: function confirm() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _confirm(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          }\n        }\n      }));\n    });\n  };\n\n  return HOC;\n};","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/dialog/show.js"],"names":["_objectWithoutProperties","_classCallCheck","_possibleConstructorReturn","_inherits","_extends","_class","_temp2","React","Component","ReactDOM","PropTypes","cx","ConfigProvider","Message","zhCN","dialog","Dialog","config","noop","MESSAGE_TYPE","alert","confirm","ModalInner","_ref","type","_ref$messageProps","messageProps","undefined","title","rtl","_ref$prefix","prefix","content","createElement","size","shape","className","Modal","_Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","state","visible","loading","close","setState","prototype","wrapper","fn","callback","_this2","res","then","result","catch","e","render","_props","props","footerActions","onOk","onCancel","onClose","okProps","needWrapper","others","newTitle","newContent","newFooterActions","newOnOk","newOnCancel","newOnClose","_state","classNames","role","propTypes","string","pure","bool","oneOf","node","object","array","func","locale","defaultProps","displayName","ConfigModal","componentName","_show","container","document","unmount","afterClose","unmountComponentAtNode","parentNode","removeChild","body","appendChild","newContext","contextConfig","getContext","instance","myRef","ref","_ref2","hide","inc","getInstance","show","methodFactory","_alert","_confirm","withContext","WrappedComponent","HOC","Consumer","contextDialog"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\n\nvar _class, _temp2;\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport ConfigProvider from '../config-provider';\nimport Message from '../message';\nimport zhCN from '../locale/zh-cn';\nimport dialog from './dialog';\n\nvar Dialog = ConfigProvider.config(dialog);\n\nvar noop = function noop() {};\nvar MESSAGE_TYPE = {\n    alert: 'warning',\n    confirm: 'help'\n};\n\nexport var ModalInner = function ModalInner(_ref) {\n    var type = _ref.type,\n        _ref$messageProps = _ref.messageProps,\n        messageProps = _ref$messageProps === undefined ? {} : _ref$messageProps,\n        title = _ref.title,\n        rtl = _ref.rtl,\n        _ref$prefix = _ref.prefix,\n        prefix = _ref$prefix === undefined ? 'next-' : _ref$prefix,\n        content = _ref.content;\n\n    return React.createElement(\n        Message,\n        _extends({\n            size: 'large',\n            shape: 'addon',\n            type: MESSAGE_TYPE[type]\n        }, messageProps, {\n            title: title,\n            rtl: rtl,\n            className: cx(prefix + 'dialog-message', messageProps.className)\n        }),\n        content\n    );\n};\n\nvar Modal = (_temp2 = _class = function (_Component) {\n    _inherits(Modal, _Component);\n\n    function Modal() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, Modal);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n            visible: true,\n            loading: false\n        }, _this.close = function () {\n            _this.setState({\n                visible: false\n            });\n        }, _this.loading = function (loading) {\n            _this.setState({\n                loading: loading\n            });\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    Modal.prototype.wrapper = function wrapper(fn, callback) {\n        var _this2 = this;\n\n        return function () {\n            var res = fn.apply(undefined, arguments);\n            if (res && res.then) {\n                _this2.loading(true);\n\n                res.then(function (result) {\n                    _this2.loading(false);\n\n                    if (result !== false) {\n                        return callback();\n                    }\n                }).catch(function (e) {\n                    _this2.loading(false);\n                    throw e;\n                });\n            } else if (res !== false) {\n                return callback();\n            }\n        };\n    };\n\n    Modal.prototype.render = function render() {\n        var _props = this.props,\n            prefix = _props.prefix,\n            type = _props.type,\n            title = _props.title,\n            content = _props.content,\n            messageProps = _props.messageProps,\n            footerActions = _props.footerActions,\n            onOk = _props.onOk,\n            onCancel = _props.onCancel,\n            onClose = _props.onClose,\n            okProps = _props.okProps,\n            needWrapper = _props.needWrapper,\n            rtl = _props.rtl,\n            className = _props.className,\n            others = _objectWithoutProperties(_props, ['prefix', 'type', 'title', 'content', 'messageProps', 'footerActions', 'onOk', 'onCancel', 'onClose', 'okProps', 'needWrapper', 'rtl', 'className']);\n\n        var newTitle = needWrapper && type ? null : title;\n\n        var newContent = needWrapper && type ? React.createElement(ModalInner, {\n            type: type,\n            messageProps: messageProps,\n            title: title,\n            rtl: rtl,\n            prefix: prefix,\n            content: content\n        }) : content;\n\n        var newFooterActions = footerActions || (type === 'alert' ? ['ok'] : type === 'confirm' ? ['ok', 'cancel'] : undefined);\n        var newOnOk = this.wrapper(onOk, this.close);\n        var newOnCancel = this.wrapper(onCancel, this.close);\n        var newOnClose = this.wrapper(onClose, this.close);\n\n        var _state = this.state,\n            visible = _state.visible,\n            loading = _state.loading;\n\n        okProps.loading = loading;\n\n        var classNames = cx(prefix + 'dialog-quick', className);\n\n        return React.createElement(\n            Dialog,\n            _extends({\n                prefix: prefix,\n                role: 'alertdialog'\n            }, others, {\n                visible: visible,\n                title: newTitle,\n                rtl: rtl,\n                footerActions: newFooterActions,\n                onOk: this.state.loading ? noop : newOnOk,\n                onCancel: newOnCancel,\n                onClose: newOnClose,\n                okProps: okProps,\n                className: classNames\n            }),\n            newContent\n        );\n    };\n\n    return Modal;\n}(Component), _class.propTypes = {\n    prefix: PropTypes.string,\n    pure: PropTypes.bool,\n    rtl: PropTypes.bool,\n    type: PropTypes.oneOf(['alert', 'confirm']),\n    title: PropTypes.node,\n    content: PropTypes.node,\n    messageProps: PropTypes.object,\n    footerActions: PropTypes.array,\n    /**\n     * Callback function triggered when Ok button is clicked\n     * @param {Object} event click event object\n     * @returns {Promise} Optionally handles a Promise return object\n     */\n    onOk: PropTypes.func,\n    /**\n     * Callback function triggered when Cancel button is clicked\n     * @param {Object} event click event object\n     * @returns {Promise} Optionally handles a Promise return object\n     */\n    onCancel: PropTypes.func,\n    /**\n     * Callback function triggered when Close button is clicked\n     * @param {Object} event click event object\n     * @returns {Promise} Optionally handles a Promise return object\n     */\n    onClose: PropTypes.func,\n    okProps: PropTypes.object,\n    locale: PropTypes.object,\n    needWrapper: PropTypes.bool,\n    className: PropTypes.string\n}, _class.defaultProps = {\n    prefix: 'next-',\n    pure: false,\n    messageProps: {},\n    onOk: noop,\n    onCancel: noop,\n    onClose: noop,\n    okProps: {},\n    locale: zhCN.Dialog,\n    needWrapper: true\n}, _temp2);\nModal.displayName = 'Modal';\n\n\nvar ConfigModal = ConfigProvider.config(Modal, { componentName: 'Dialog' });\n\n/**\n * 创建对话框\n * @exportName show\n * @param {Object} config 配置项\n * @returns {Object} \b包含有 hide 方法，可用来关闭对话框\n */\nvar _show = function _show() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var container = document.createElement('div');\n    var unmount = function unmount() {\n        if (config.afterClose) {\n            config.afterClose();\n        }\n        ReactDOM.unmountComponentAtNode(container);\n        container.parentNode.removeChild(container);\n    };\n\n    document.body.appendChild(container);\n    var newContext = config.contextConfig;\n    if (!newContext) newContext = ConfigProvider.getContext();\n\n    var instance = void 0,\n        myRef = void 0;\n\n    ReactDOM.render(React.createElement(\n        ConfigProvider,\n        newContext,\n        React.createElement(ConfigModal, _extends({}, config, {\n            afterClose: unmount,\n            ref: function ref(_ref2) {\n                myRef = _ref2;\n            }\n        }))\n    ), container, function () {\n        instance = myRef;\n    });\n    return {\n        hide: function hide() {\n            var inc = instance && instance.getInstance();\n            inc && inc.close();\n        }\n    };\n};\n\nexport { _show as show };\nvar methodFactory = function methodFactory(type) {\n    return function () {\n        var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        config.type = type;\n        return _show(config);\n    };\n};\n\n/**\n * 创建警示对话框\n * @exportName alert\n * @param {Object} config 配置项\n * @returns {Object} \b包含有 hide 方法，可用来关闭对话框\n */\nvar _alert = methodFactory('alert');\n\n/**\n * 创建确认对话框\n * @exportName confirm\n * @param {Object} config 配置项\n * @returns {Object} \b包含有 hide 方法，可用来关闭对话框\n */\nexport { _alert as alert };\nvar _confirm = methodFactory('confirm');\n\nexport { _confirm as confirm };\nexport var withContext = function withContext(WrappedComponent) {\n    var HOC = function HOC(props) {\n        return React.createElement(\n            ConfigProvider.Consumer,\n            null,\n            function (contextConfig) {\n                return React.createElement(WrappedComponent, _extends({}, props, {\n                    contextDialog: {\n                        show: function show() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _show(_extends({}, config, { contextConfig: contextConfig }));\n                        },\n                        alert: function alert() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _alert(_extends({}, config, { contextConfig: contextConfig }));\n                        },\n                        confirm: function confirm() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _confirm(_extends({}, config, { contextConfig: contextConfig }));\n                        }\n                    }\n                }));\n            }\n        );\n    };\n    return HOC;\n};"]},"metadata":{},"sourceType":"module"}