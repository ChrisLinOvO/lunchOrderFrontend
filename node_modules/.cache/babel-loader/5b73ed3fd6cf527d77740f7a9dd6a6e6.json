{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport classnames from 'classnames';\nimport { dom } from '../util';\nimport HeaderComponent from './fixed/header';\nimport BodyComponent from './fixed/body';\nimport WrapperComponent from './fixed/wrapper';\nimport { statics } from './util';\nexport default function fixed(BaseComponent, stickyLock) {\n  var _class, _temp2;\n  /** Table */\n\n\n  var FixedTable = (_temp2 = _class = function (_React$Component) {\n    _inherits(FixedTable, _React$Component);\n\n    function FixedTable() {\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, FixedTable);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {}, _this.getNode = function (type, node, lockType) {\n        lockType = lockType ? lockType.charAt(0).toUpperCase() + lockType.substr(1) : '';\n        _this['' + type + lockType + 'Node'] = node;\n      }, _this.getTableInstance = function (type, instance) {\n        type = '';\n        _this['table' + type + 'Inc'] = instance;\n      }, _this.onFixedScrollSync = function () {\n        var current = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n          currentTarget: {}\n        };\n        var currentTarget = current.currentTarget || {},\n            headerNode = _this.headerNode,\n            bodyNode = _this.bodyNode;\n        var scrollLeft = currentTarget.scrollLeft,\n            scrollWidth = currentTarget.scrollWidth,\n            clientWidth = currentTarget.clientWidth;\n        var scrollToRightEnd = !(scrollLeft < scrollWidth - clientWidth);\n        var _this$props = _this.props,\n            prefix = _this$props.prefix,\n            loading = _this$props.loading;\n\n        if (!loading && scrollToRightEnd !== _this.scrollToRightEnd) {\n          _this.scrollToRightEnd = scrollToRightEnd;\n\n          var table = _this.getTableNode();\n\n          var leftFunc = scrollToRightEnd ? 'removeClass' : 'addClass';\n          dom[leftFunc](table, prefix + 'table-scrolling-to-right');\n        }\n\n        if (current.currentTarget !== current.target) {\n          return;\n        }\n\n        if (currentTarget === bodyNode) {\n          if (headerNode && scrollLeft !== headerNode.scrollLeft) {\n            headerNode.scrollLeft = scrollLeft;\n          }\n        } else if (currentTarget === headerNode) {\n          if (bodyNode && scrollLeft !== bodyNode.scrollLeft) {\n            bodyNode.scrollLeft = scrollLeft;\n          }\n        }\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    FixedTable.prototype.getChildContext = function getChildContext() {\n      return {\n        fixedHeader: this.props.fixedHeader,\n        maxBodyHeight: this.props.maxBodyHeight,\n        getTableInstanceForFixed: this.getTableInstance,\n        onFixedScrollSync: this.onFixedScrollSync,\n        getNode: this.getNode\n      };\n    };\n\n    FixedTable.prototype.componentDidMount = function componentDidMount() {\n      this.adjustFixedHeaderSize();\n      this.scrollToRightEnd = undefined;\n      this.onFixedScrollSync({\n        currentTarget: this.bodyNode,\n        target: this.bodyNode\n      });\n    };\n\n    FixedTable.prototype.componentDidUpdate = function componentDidUpdate() {\n      this.adjustFixedHeaderSize();\n      this.onFixedScrollSync({\n        currentTarget: this.bodyNode,\n        target: this.bodyNode\n      });\n    };\n\n    FixedTable.prototype.getTableNode = function getTableNode() {\n      var table = this.tableInc;\n\n      try {\n        // in case of finding an unmounted component due to cached data\n        // need to clear refs of table when dataSource Changed\n        // use try catch for temporary\n        return findDOMNode(table.tableEl);\n      } catch (error) {\n        return null;\n      }\n    }; // for fixed header scroll left\n\n\n    FixedTable.prototype.adjustFixedHeaderSize = function adjustFixedHeaderSize() {\n      var _props = this.props,\n          hasHeader = _props.hasHeader,\n          rtl = _props.rtl;\n      var paddingName = rtl ? 'paddingLeft' : 'paddingRight';\n      var marginName = rtl ? 'marginLeft' : 'marginRight';\n      var body = this.bodyNode;\n\n      if (hasHeader && !this.props.lockType && body) {\n        var _style;\n\n        var scrollBarSize = +dom.scrollbar().width || 0;\n        var hasVerScroll = body.scrollHeight > body.clientHeight,\n            hasHozScroll = body.scrollWidth > body.clientWidth;\n        var style = (_style = {}, _style[marginName] = scrollBarSize, _style);\n\n        if (!stickyLock) {\n          style[paddingName] = scrollBarSize;\n        }\n\n        if (!hasVerScroll) {\n          style[paddingName] = 0;\n          style[marginName] = 0;\n        }\n\n        if (+scrollBarSize) {\n          style.marginBottom = -scrollBarSize;\n\n          if (hasHozScroll) {\n            style.paddingBottom = scrollBarSize;\n          } else {\n            style.paddingBottom = scrollBarSize;\n          }\n\n          if (hasVerScroll) {\n            style[marginName] = scrollBarSize;\n          }\n        }\n\n        dom.setStyle(this.headerNode, style);\n      }\n    };\n\n    FixedTable.prototype.render = function render() {\n      /* eslint-disable no-unused-vars, prefer-const */\n      var _props2 = this.props,\n          components = _props2.components,\n          className = _props2.className,\n          prefix = _props2.prefix,\n          fixedHeader = _props2.fixedHeader,\n          lockType = _props2.lockType,\n          dataSource = _props2.dataSource,\n          maxBodyHeight = _props2.maxBodyHeight,\n          others = _objectWithoutProperties(_props2, ['components', 'className', 'prefix', 'fixedHeader', 'lockType', 'dataSource', 'maxBodyHeight']);\n\n      if (fixedHeader) {\n        var _classnames;\n\n        components = _extends({}, components);\n\n        if (!components.Header) {\n          components.Header = HeaderComponent;\n        }\n\n        if (!components.Body) {\n          components.Body = BodyComponent;\n        }\n\n        if (!components.Wrapper) {\n          components.Wrapper = WrapperComponent;\n        }\n\n        className = classnames((_classnames = {}, _classnames[prefix + 'table-fixed'] = true, _classnames[prefix + 'table-wrap-empty'] = !dataSource.length, _classnames[className] = className, _classnames));\n      }\n\n      return React.createElement(BaseComponent, _extends({}, others, {\n        dataSource: dataSource,\n        lockType: lockType,\n        components: components,\n        className: className,\n        prefix: prefix\n      }));\n    };\n\n    return FixedTable;\n  }(React.Component), _class.FixedHeader = HeaderComponent, _class.FixedBody = BodyComponent, _class.FixedWrapper = WrapperComponent, _class.propTypes = _extends({\n    /**\n     * 是否具有表头\n     */\n    hasHeader: PropTypes.bool,\n\n    /**\n     * 表头是否固定，该属性配合maxBodyHeight使用，当内容区域的高度超过maxBodyHeight的时候，在内容区域会出现滚动条\n     */\n    fixedHeader: PropTypes.bool,\n\n    /**\n     * 最大内容区域的高度,在`fixedHeader`为`true`的时候,超过这个高度会出现滚动条\n     */\n    maxBodyHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n  }, BaseComponent.propTypes), _class.defaultProps = _extends({}, BaseComponent.defaultProps, {\n    hasHeader: true,\n    fixedHeader: false,\n    maxBodyHeight: 200,\n    components: {},\n    refs: {},\n    prefix: 'next-'\n  }), _class.childContextTypes = {\n    fixedHeader: PropTypes.bool,\n    getNode: PropTypes.func,\n    onFixedScrollSync: PropTypes.func,\n    getTableInstanceForFixed: PropTypes.func,\n    maxBodyHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n  }, _temp2);\n  FixedTable.displayName = 'FixedTable';\n  statics(FixedTable, BaseComponent);\n  return FixedTable;\n}","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/table/fixed.js"],"names":["_extends","_objectWithoutProperties","_classCallCheck","_possibleConstructorReturn","_inherits","React","PropTypes","findDOMNode","classnames","dom","HeaderComponent","BodyComponent","WrapperComponent","statics","fixed","BaseComponent","stickyLock","_class","_temp2","FixedTable","_React$Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","state","getNode","type","node","lockType","charAt","toUpperCase","substr","getTableInstance","instance","onFixedScrollSync","current","undefined","currentTarget","headerNode","bodyNode","scrollLeft","scrollWidth","clientWidth","scrollToRightEnd","_this$props","props","prefix","loading","table","getTableNode","leftFunc","target","prototype","getChildContext","fixedHeader","maxBodyHeight","getTableInstanceForFixed","componentDidMount","adjustFixedHeaderSize","componentDidUpdate","tableInc","tableEl","error","_props","hasHeader","rtl","paddingName","marginName","body","_style","scrollBarSize","scrollbar","width","hasVerScroll","scrollHeight","clientHeight","hasHozScroll","style","marginBottom","paddingBottom","setStyle","render","_props2","components","className","dataSource","others","_classnames","Header","Body","Wrapper","createElement","Component","FixedHeader","FixedBody","FixedWrapper","propTypes","bool","oneOfType","number","string","defaultProps","refs","childContextTypes","func","displayName"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport classnames from 'classnames';\nimport { dom } from '../util';\nimport HeaderComponent from './fixed/header';\nimport BodyComponent from './fixed/body';\nimport WrapperComponent from './fixed/wrapper';\nimport { statics } from './util';\n\nexport default function fixed(BaseComponent, stickyLock) {\n    var _class, _temp2;\n\n    /** Table */\n    var FixedTable = (_temp2 = _class = function (_React$Component) {\n        _inherits(FixedTable, _React$Component);\n\n        function FixedTable() {\n            var _temp, _this, _ret;\n\n            _classCallCheck(this, FixedTable);\n\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {}, _this.getNode = function (type, node, lockType) {\n                lockType = lockType ? lockType.charAt(0).toUpperCase() + lockType.substr(1) : '';\n                _this['' + type + lockType + 'Node'] = node;\n            }, _this.getTableInstance = function (type, instance) {\n                type = '';\n                _this['table' + type + 'Inc'] = instance;\n            }, _this.onFixedScrollSync = function () {\n                var current = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { currentTarget: {} };\n\n                var currentTarget = current.currentTarget || {},\n                    headerNode = _this.headerNode,\n                    bodyNode = _this.bodyNode;\n\n                var scrollLeft = currentTarget.scrollLeft,\n                    scrollWidth = currentTarget.scrollWidth,\n                    clientWidth = currentTarget.clientWidth;\n\n                var scrollToRightEnd = !(scrollLeft < scrollWidth - clientWidth);\n                var _this$props = _this.props,\n                    prefix = _this$props.prefix,\n                    loading = _this$props.loading;\n\n\n                if (!loading && scrollToRightEnd !== _this.scrollToRightEnd) {\n                    _this.scrollToRightEnd = scrollToRightEnd;\n                    var table = _this.getTableNode();\n\n                    var leftFunc = scrollToRightEnd ? 'removeClass' : 'addClass';\n                    dom[leftFunc](table, prefix + 'table-scrolling-to-right');\n                }\n                if (current.currentTarget !== current.target) {\n                    return;\n                }\n                if (currentTarget === bodyNode) {\n                    if (headerNode && scrollLeft !== headerNode.scrollLeft) {\n                        headerNode.scrollLeft = scrollLeft;\n                    }\n                } else if (currentTarget === headerNode) {\n                    if (bodyNode && scrollLeft !== bodyNode.scrollLeft) {\n                        bodyNode.scrollLeft = scrollLeft;\n                    }\n                }\n            }, _temp), _possibleConstructorReturn(_this, _ret);\n        }\n\n        FixedTable.prototype.getChildContext = function getChildContext() {\n            return {\n                fixedHeader: this.props.fixedHeader,\n                maxBodyHeight: this.props.maxBodyHeight,\n                getTableInstanceForFixed: this.getTableInstance,\n                onFixedScrollSync: this.onFixedScrollSync,\n                getNode: this.getNode\n            };\n        };\n\n        FixedTable.prototype.componentDidMount = function componentDidMount() {\n            this.adjustFixedHeaderSize();\n            this.scrollToRightEnd = undefined;\n            this.onFixedScrollSync({ currentTarget: this.bodyNode, target: this.bodyNode });\n        };\n\n        FixedTable.prototype.componentDidUpdate = function componentDidUpdate() {\n            this.adjustFixedHeaderSize();\n            this.onFixedScrollSync({ currentTarget: this.bodyNode, target: this.bodyNode });\n        };\n\n        FixedTable.prototype.getTableNode = function getTableNode() {\n            var table = this.tableInc;\n            try {\n                // in case of finding an unmounted component due to cached data\n                // need to clear refs of table when dataSource Changed\n                // use try catch for temporary\n                return findDOMNode(table.tableEl);\n            } catch (error) {\n                return null;\n            }\n        };\n\n        // for fixed header scroll left\n\n\n        FixedTable.prototype.adjustFixedHeaderSize = function adjustFixedHeaderSize() {\n            var _props = this.props,\n                hasHeader = _props.hasHeader,\n                rtl = _props.rtl;\n\n            var paddingName = rtl ? 'paddingLeft' : 'paddingRight';\n            var marginName = rtl ? 'marginLeft' : 'marginRight';\n            var body = this.bodyNode;\n\n            if (hasHeader && !this.props.lockType && body) {\n                var _style;\n\n                var scrollBarSize = +dom.scrollbar().width || 0;\n                var hasVerScroll = body.scrollHeight > body.clientHeight,\n                    hasHozScroll = body.scrollWidth > body.clientWidth;\n                var style = (_style = {}, _style[marginName] = scrollBarSize, _style);\n\n                if (!stickyLock) {\n                    style[paddingName] = scrollBarSize;\n                }\n\n                if (!hasVerScroll) {\n                    style[paddingName] = 0;\n                    style[marginName] = 0;\n                }\n\n                if (+scrollBarSize) {\n                    style.marginBottom = -scrollBarSize;\n                    if (hasHozScroll) {\n                        style.paddingBottom = scrollBarSize;\n                    } else {\n                        style.paddingBottom = scrollBarSize;\n                    }\n                    if (hasVerScroll) {\n                        style[marginName] = scrollBarSize;\n                    }\n                }\n\n                dom.setStyle(this.headerNode, style);\n            }\n        };\n\n        FixedTable.prototype.render = function render() {\n            /* eslint-disable no-unused-vars, prefer-const */\n            var _props2 = this.props,\n                components = _props2.components,\n                className = _props2.className,\n                prefix = _props2.prefix,\n                fixedHeader = _props2.fixedHeader,\n                lockType = _props2.lockType,\n                dataSource = _props2.dataSource,\n                maxBodyHeight = _props2.maxBodyHeight,\n                others = _objectWithoutProperties(_props2, ['components', 'className', 'prefix', 'fixedHeader', 'lockType', 'dataSource', 'maxBodyHeight']);\n\n            if (fixedHeader) {\n                var _classnames;\n\n                components = _extends({}, components);\n                if (!components.Header) {\n                    components.Header = HeaderComponent;\n                }\n                if (!components.Body) {\n                    components.Body = BodyComponent;\n                }\n                if (!components.Wrapper) {\n                    components.Wrapper = WrapperComponent;\n                }\n                className = classnames((_classnames = {}, _classnames[prefix + 'table-fixed'] = true, _classnames[prefix + 'table-wrap-empty'] = !dataSource.length, _classnames[className] = className, _classnames));\n            }\n\n            return React.createElement(BaseComponent, _extends({}, others, {\n                dataSource: dataSource,\n                lockType: lockType,\n                components: components,\n                className: className,\n                prefix: prefix\n            }));\n        };\n\n        return FixedTable;\n    }(React.Component), _class.FixedHeader = HeaderComponent, _class.FixedBody = BodyComponent, _class.FixedWrapper = WrapperComponent, _class.propTypes = _extends({\n        /**\n         * 是否具有表头\n         */\n        hasHeader: PropTypes.bool,\n        /**\n         * 表头是否固定，该属性配合maxBodyHeight使用，当内容区域的高度超过maxBodyHeight的时候，在内容区域会出现滚动条\n         */\n        fixedHeader: PropTypes.bool,\n        /**\n         * 最大内容区域的高度,在`fixedHeader`为`true`的时候,超过这个高度会出现滚动条\n         */\n        maxBodyHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n    }, BaseComponent.propTypes), _class.defaultProps = _extends({}, BaseComponent.defaultProps, {\n        hasHeader: true,\n        fixedHeader: false,\n        maxBodyHeight: 200,\n        components: {},\n        refs: {},\n        prefix: 'next-'\n    }), _class.childContextTypes = {\n        fixedHeader: PropTypes.bool,\n        getNode: PropTypes.func,\n        onFixedScrollSync: PropTypes.func,\n        getTableInstanceForFixed: PropTypes.func,\n        maxBodyHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n    }, _temp2);\n    FixedTable.displayName = 'FixedTable';\n\n    statics(FixedTable, BaseComponent);\n    return FixedTable;\n}"]},"metadata":{},"sourceType":"module"}