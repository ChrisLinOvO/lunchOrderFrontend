{"ast":null,"code":"import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp;\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Animate from '../animate';\nimport Icon from '../icon';\nimport { func, KEYCODE, obj, support } from '../util';\nimport zhCN from '../locale/zh-cn';\nimport ConfigProvider from '../config-provider';\nvar noop = func.noop,\n    bindCtx = func.bindCtx;\nvar PRESET_COLOR_REG = /blue|green|orange|red|turquoise|yellow/;\n/**\n * Tag\n */\n\nvar Tag = (_temp = _class = function (_Component) {\n  _inherits(Tag, _Component);\n\n  function Tag(props) {\n    _classCallCheck(this, Tag);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.onKeyDown = function (e) {\n      // 针对无障碍化要求 添加键盘SPACE事件\n      var _this$props = _this.props,\n          closable = _this$props.closable,\n          closeArea = _this$props.closeArea,\n          onClick = _this$props.onClick,\n          disabled = _this$props.disabled;\n\n      if (e.keyCode !== KEYCODE.SPACE || disabled) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (closable) {\n        _this.handleClose(closeArea);\n      } else {\n        typeof onClick === 'function' && onClick(e);\n      }\n    };\n\n    _this.state = {\n      visible: true\n    };\n    bindCtx(_this, ['handleBodyClick', 'handleTailClick', 'handleAnimationInit', 'handleAnimationEnd', 'renderTailNode']);\n    return _this;\n  }\n\n  Tag.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.__destroyed = true;\n  };\n\n  Tag.prototype.handleClose = function handleClose(from) {\n    var _this2 = this;\n\n    var _props = this.props,\n        animation = _props.animation,\n        onClose = _props.onClose;\n    var hasAnimation = support.animation && animation; // 先执行回调\n\n    var result = onClose(from, this.tagNode); // 如果回调函数返回 false，则阻止关闭行为\n\n    if (result !== false && !this.__destroyed) {\n      this.setState({\n        visible: false\n      }, function () {\n        // 如果没有动画，则直接执行 afterClose\n        !hasAnimation && _this2.props.afterClose(_this2.tagNode);\n      });\n    }\n  }; // 标签体点击\n\n\n  Tag.prototype.handleBodyClick = function handleBodyClick(e) {\n    var _props2 = this.props,\n        closable = _props2.closable,\n        closeArea = _props2.closeArea,\n        onClick = _props2.onClick;\n    var node = e.currentTarget;\n\n    if (node && (node === e.target || node.contains(e.target))) {\n      if (closable && closeArea === 'tag') {\n        this.handleClose('tag');\n      }\n\n      if (typeof onClick === 'function') {\n        return onClick(e);\n      }\n    }\n  };\n\n  Tag.prototype.handleTailClick = function handleTailClick(e) {\n    e && e.preventDefault();\n    e && e.stopPropagation();\n    this.handleClose('tail');\n  };\n\n  Tag.prototype.handleAnimationInit = function handleAnimationInit(node) {\n    this.props.afterAppear(node);\n  };\n\n  Tag.prototype.handleAnimationEnd = function handleAnimationEnd(node) {\n    this.props.afterClose(node);\n  };\n\n  Tag.prototype.renderAnimatedTag = function renderAnimatedTag(children, animationName) {\n    return React.createElement(Animate, {\n      animation: animationName,\n      afterAppear: this.handleAnimationInit,\n      afterLeave: this.handleAnimationEnd\n    }, children);\n  };\n\n  Tag.prototype.renderTailNode = function renderTailNode() {\n    var _props3 = this.props,\n        prefix = _props3.prefix,\n        closable = _props3.closable,\n        locale = _props3.locale;\n\n    if (!closable) {\n      return null;\n    }\n\n    return React.createElement('span', {\n      className: prefix + 'tag-close-btn',\n      onClick: this.handleTailClick,\n      role: 'button',\n      'aria-label': locale.delete\n    }, React.createElement(Icon, {\n      type: 'close'\n    }));\n  };\n\n  Tag.prototype.isPresetColor = function isPresetColor() {\n    var color = this.props.color;\n\n    if (!color) {\n      return false;\n    }\n\n    return PRESET_COLOR_REG.test(color);\n  };\n\n  Tag.prototype.getTagStyle = function getTagStyle() {\n    var _props4 = this.props,\n        _props4$color = _props4.color,\n        color = _props4$color === undefined ? '' : _props4$color,\n        style = _props4.style;\n    var isPresetColor = this.isPresetColor();\n    var customColorStyle = {\n      backgroundColor: color,\n      borderColor: color,\n      color: '#fff'\n    };\n    return _extends({}, color && !isPresetColor ? customColorStyle : null, style);\n  };\n\n  Tag.prototype.render = function render() {\n    var _classNames,\n        _this3 = this;\n\n    var _props5 = this.props,\n        prefix = _props5.prefix,\n        type = _props5.type,\n        size = _props5.size,\n        color = _props5.color,\n        _shape = _props5._shape,\n        closable = _props5.closable,\n        closeArea = _props5.closeArea,\n        className = _props5.className,\n        children = _props5.children,\n        animation = _props5.animation,\n        disabled = _props5.disabled,\n        rtl = _props5.rtl;\n    var visible = this.state.visible;\n    var isPresetColor = this.isPresetColor();\n    var others = obj.pickOthers(Tag.propTypes, this.props); // eslint-disable-next-line no-unused-vars\n\n    var style = others.style,\n        otherTagProps = _objectWithoutProperties(others, ['style']);\n\n    var shape = closable ? 'closable' : _shape;\n    var bodyClazz = classNames([prefix + 'tag', prefix + 'tag-' + shape, prefix + 'tag-' + size], (_classNames = {}, _classNames[prefix + 'tag-level-' + type] = !color, _classNames[prefix + 'tag-closable'] = closable, _classNames[prefix + 'tag-body-pointer'] = closable && closeArea === 'tag', _classNames[prefix + 'tag-' + color] = color && isPresetColor && type === 'primary', _classNames[prefix + 'tag-' + color + '-inverse'] = color && isPresetColor && type === 'normal', _classNames), className); // close btn\n\n    var tailNode = this.renderTailNode(); // tag node\n\n    var tagNode = !visible ? null : React.createElement('div', _extends({\n      className: bodyClazz,\n      onClick: this.handleBodyClick,\n      onKeyDown: this.onKeyDown,\n      tabIndex: disabled ? '' : '0',\n      role: 'button',\n      'aria-disabled': disabled,\n      disabled: disabled,\n      dir: rtl ? 'rtl' : undefined,\n      ref: function ref(n) {\n        return _this3.tagNode = n;\n      },\n      style: this.getTagStyle()\n    }, otherTagProps), React.createElement('span', {\n      className: prefix + 'tag-body'\n    }, children), tailNode);\n\n    if (animation && support.animation) {\n      return this.renderAnimatedTag(tagNode, prefix + 'tag-zoom');\n    } // 未开启或不支持动画\n\n\n    return tagNode;\n  };\n\n  return Tag;\n}(Component), _class.propTypes = {\n  /**\n   * 标签类名前缀,提供给二次开发者用\n   * @default next-\n   */\n  prefix: PropTypes.string,\n\n  /**\n   * 标签的类型\n   * @enumdesc 普通, 主要\n   */\n  type: PropTypes.oneOf(['normal', 'primary']),\n\n  /**\n   * 标签的尺寸（large 尺寸为兼容表单场景 large = medium）\n   * @enumdesc 小, 中, 大\n   */\n  size: PropTypes.oneOf(['small', 'medium', 'large']),\n\n  /**\n   * 标签颜色, 目前支持：blue、 green、 orange、red、 turquoise、 yellow 和 hex 颜色值 （`color keywords`作为 Tag 组件的保留字，请勿直接使用 ）, `1.19.0` 以上版本生效\n   */\n  color: PropTypes.string,\n\n  /**\n   * 是否开启动效\n   */\n  animation: PropTypes.bool,\n  closeArea: PropTypes.oneOf(['tag', 'tail']),\n  closable: PropTypes.bool,\n  onClose: PropTypes.func,\n  afterClose: PropTypes.func,\n\n  /**\n   * 标签出现动画结束后执行的回调\n   */\n  afterAppear: PropTypes.func,\n  className: PropTypes.any,\n  children: PropTypes.node,\n\n  /**\n   * 点击回调\n   */\n  onClick: PropTypes.func,\n  _shape: PropTypes.oneOf(['default', 'closable', 'checkable']),\n  disabled: PropTypes.bool,\n  rtl: PropTypes.bool,\n  locale: PropTypes.object\n}, _class.defaultProps = {\n  prefix: 'next-',\n  type: 'normal',\n  size: 'medium',\n  closeArea: 'tail',\n  animation: false,\n  onClose: noop,\n  afterClose: noop,\n  afterAppear: noop,\n  onClick: noop,\n  _shape: 'default',\n  disabled: false,\n  rtl: false,\n  locale: zhCN.Tag\n}, _temp);\nTag.displayName = 'Tag';\nexport default ConfigProvider.config(Tag);","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/tag/tag.js"],"names":["_objectWithoutProperties","_extends","_classCallCheck","_possibleConstructorReturn","_inherits","_class","_temp","React","Component","PropTypes","classNames","Animate","Icon","func","KEYCODE","obj","support","zhCN","ConfigProvider","noop","bindCtx","PRESET_COLOR_REG","Tag","_Component","props","_this","call","onKeyDown","e","_this$props","closable","closeArea","onClick","disabled","keyCode","SPACE","preventDefault","stopPropagation","handleClose","state","visible","prototype","componentWillUnmount","__destroyed","from","_this2","_props","animation","onClose","hasAnimation","result","tagNode","setState","afterClose","handleBodyClick","_props2","node","currentTarget","target","contains","handleTailClick","handleAnimationInit","afterAppear","handleAnimationEnd","renderAnimatedTag","children","animationName","createElement","afterLeave","renderTailNode","_props3","prefix","locale","className","role","delete","type","isPresetColor","color","test","getTagStyle","_props4","_props4$color","undefined","style","customColorStyle","backgroundColor","borderColor","render","_classNames","_this3","_props5","size","_shape","rtl","others","pickOthers","propTypes","otherTagProps","shape","bodyClazz","tailNode","tabIndex","dir","ref","n","string","oneOf","bool","any","object","defaultProps","displayName","config"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp;\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Animate from '../animate';\nimport Icon from '../icon';\nimport { func, KEYCODE, obj, support } from '../util';\nimport zhCN from '../locale/zh-cn';\nimport ConfigProvider from '../config-provider';\n\nvar noop = func.noop,\n    bindCtx = func.bindCtx;\n\n\nvar PRESET_COLOR_REG = /blue|green|orange|red|turquoise|yellow/;\n\n/**\n * Tag\n */\nvar Tag = (_temp = _class = function (_Component) {\n    _inherits(Tag, _Component);\n\n    function Tag(props) {\n        _classCallCheck(this, Tag);\n\n        var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n        _this.onKeyDown = function (e) {\n            // 针对无障碍化要求 添加键盘SPACE事件\n            var _this$props = _this.props,\n                closable = _this$props.closable,\n                closeArea = _this$props.closeArea,\n                onClick = _this$props.onClick,\n                disabled = _this$props.disabled;\n\n            if (e.keyCode !== KEYCODE.SPACE || disabled) {\n                return;\n            }\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (closable) {\n                _this.handleClose(closeArea);\n            } else {\n                typeof onClick === 'function' && onClick(e);\n            }\n        };\n\n        _this.state = {\n            visible: true\n        };\n\n        bindCtx(_this, ['handleBodyClick', 'handleTailClick', 'handleAnimationInit', 'handleAnimationEnd', 'renderTailNode']);\n        return _this;\n    }\n\n    Tag.prototype.componentWillUnmount = function componentWillUnmount() {\n        this.__destroyed = true;\n    };\n\n    Tag.prototype.handleClose = function handleClose(from) {\n        var _this2 = this;\n\n        var _props = this.props,\n            animation = _props.animation,\n            onClose = _props.onClose;\n\n        var hasAnimation = support.animation && animation;\n\n        // 先执行回调\n        var result = onClose(from, this.tagNode);\n\n        // 如果回调函数返回 false，则阻止关闭行为\n        if (result !== false && !this.__destroyed) {\n            this.setState({\n                visible: false\n            }, function () {\n                // 如果没有动画，则直接执行 afterClose\n                !hasAnimation && _this2.props.afterClose(_this2.tagNode);\n            });\n        }\n    };\n\n    // 标签体点击\n\n\n    Tag.prototype.handleBodyClick = function handleBodyClick(e) {\n        var _props2 = this.props,\n            closable = _props2.closable,\n            closeArea = _props2.closeArea,\n            onClick = _props2.onClick;\n\n        var node = e.currentTarget;\n\n        if (node && (node === e.target || node.contains(e.target))) {\n            if (closable && closeArea === 'tag') {\n                this.handleClose('tag');\n            }\n\n            if (typeof onClick === 'function') {\n                return onClick(e);\n            }\n        }\n    };\n\n    Tag.prototype.handleTailClick = function handleTailClick(e) {\n        e && e.preventDefault();\n        e && e.stopPropagation();\n\n        this.handleClose('tail');\n    };\n\n    Tag.prototype.handleAnimationInit = function handleAnimationInit(node) {\n        this.props.afterAppear(node);\n    };\n\n    Tag.prototype.handleAnimationEnd = function handleAnimationEnd(node) {\n        this.props.afterClose(node);\n    };\n\n    Tag.prototype.renderAnimatedTag = function renderAnimatedTag(children, animationName) {\n        return React.createElement(\n            Animate,\n            {\n                animation: animationName,\n                afterAppear: this.handleAnimationInit,\n                afterLeave: this.handleAnimationEnd\n            },\n            children\n        );\n    };\n\n    Tag.prototype.renderTailNode = function renderTailNode() {\n        var _props3 = this.props,\n            prefix = _props3.prefix,\n            closable = _props3.closable,\n            locale = _props3.locale;\n\n\n        if (!closable) {\n            return null;\n        }\n\n        return React.createElement(\n            'span',\n            {\n                className: prefix + 'tag-close-btn',\n                onClick: this.handleTailClick,\n                role: 'button',\n                'aria-label': locale.delete\n            },\n            React.createElement(Icon, { type: 'close' })\n        );\n    };\n\n    Tag.prototype.isPresetColor = function isPresetColor() {\n        var color = this.props.color;\n\n\n        if (!color) {\n            return false;\n        }\n\n        return PRESET_COLOR_REG.test(color);\n    };\n\n    Tag.prototype.getTagStyle = function getTagStyle() {\n        var _props4 = this.props,\n            _props4$color = _props4.color,\n            color = _props4$color === undefined ? '' : _props4$color,\n            style = _props4.style;\n\n        var isPresetColor = this.isPresetColor();\n        var customColorStyle = {\n            backgroundColor: color,\n            borderColor: color,\n            color: '#fff'\n        };\n\n        return _extends({}, color && !isPresetColor ? customColorStyle : null, style);\n    };\n\n    Tag.prototype.render = function render() {\n        var _classNames,\n            _this3 = this;\n\n        var _props5 = this.props,\n            prefix = _props5.prefix,\n            type = _props5.type,\n            size = _props5.size,\n            color = _props5.color,\n            _shape = _props5._shape,\n            closable = _props5.closable,\n            closeArea = _props5.closeArea,\n            className = _props5.className,\n            children = _props5.children,\n            animation = _props5.animation,\n            disabled = _props5.disabled,\n            rtl = _props5.rtl;\n        var visible = this.state.visible;\n\n        var isPresetColor = this.isPresetColor();\n        var others = obj.pickOthers(Tag.propTypes, this.props);\n        // eslint-disable-next-line no-unused-vars\n\n        var style = others.style,\n            otherTagProps = _objectWithoutProperties(others, ['style']);\n\n        var shape = closable ? 'closable' : _shape;\n        var bodyClazz = classNames([prefix + 'tag', prefix + 'tag-' + shape, prefix + 'tag-' + size], (_classNames = {}, _classNames[prefix + 'tag-level-' + type] = !color, _classNames[prefix + 'tag-closable'] = closable, _classNames[prefix + 'tag-body-pointer'] = closable && closeArea === 'tag', _classNames[prefix + 'tag-' + color] = color && isPresetColor && type === 'primary', _classNames[prefix + 'tag-' + color + '-inverse'] = color && isPresetColor && type === 'normal', _classNames), className);\n\n        // close btn\n        var tailNode = this.renderTailNode();\n        // tag node\n        var tagNode = !visible ? null : React.createElement(\n            'div',\n            _extends({\n                className: bodyClazz,\n                onClick: this.handleBodyClick,\n                onKeyDown: this.onKeyDown,\n                tabIndex: disabled ? '' : '0',\n                role: 'button',\n                'aria-disabled': disabled,\n                disabled: disabled,\n                dir: rtl ? 'rtl' : undefined,\n                ref: function ref(n) {\n                    return _this3.tagNode = n;\n                },\n                style: this.getTagStyle()\n            }, otherTagProps),\n            React.createElement(\n                'span',\n                { className: prefix + 'tag-body' },\n                children\n            ),\n            tailNode\n        );\n\n        if (animation && support.animation) {\n            return this.renderAnimatedTag(tagNode, prefix + 'tag-zoom');\n        }\n\n        // 未开启或不支持动画\n        return tagNode;\n    };\n\n    return Tag;\n}(Component), _class.propTypes = {\n    /**\n     * 标签类名前缀,提供给二次开发者用\n     * @default next-\n     */\n    prefix: PropTypes.string,\n    /**\n     * 标签的类型\n     * @enumdesc 普通, 主要\n     */\n    type: PropTypes.oneOf(['normal', 'primary']),\n    /**\n     * 标签的尺寸（large 尺寸为兼容表单场景 large = medium）\n     * @enumdesc 小, 中, 大\n     */\n    size: PropTypes.oneOf(['small', 'medium', 'large']),\n\n    /**\n     * 标签颜色, 目前支持：blue、 green、 orange、red、 turquoise、 yellow 和 hex 颜色值 （`color keywords`作为 Tag 组件的保留字，请勿直接使用 ）, `1.19.0` 以上版本生效\n     */\n    color: PropTypes.string,\n    /**\n     * 是否开启动效\n     */\n    animation: PropTypes.bool,\n    closeArea: PropTypes.oneOf(['tag', 'tail']),\n    closable: PropTypes.bool,\n    onClose: PropTypes.func,\n    afterClose: PropTypes.func,\n    /**\n     * 标签出现动画结束后执行的回调\n     */\n    afterAppear: PropTypes.func,\n    className: PropTypes.any,\n    children: PropTypes.node,\n    /**\n     * 点击回调\n     */\n    onClick: PropTypes.func,\n    _shape: PropTypes.oneOf(['default', 'closable', 'checkable']),\n    disabled: PropTypes.bool,\n    rtl: PropTypes.bool,\n    locale: PropTypes.object\n}, _class.defaultProps = {\n    prefix: 'next-',\n    type: 'normal',\n    size: 'medium',\n    closeArea: 'tail',\n    animation: false,\n    onClose: noop,\n    afterClose: noop,\n    afterAppear: noop,\n    onClick: noop,\n    _shape: 'default',\n    disabled: false,\n    rtl: false,\n    locale: zhCN.Tag\n}, _temp);\nTag.displayName = 'Tag';\n\n\nexport default ConfigProvider.config(Tag);"]},"metadata":{},"sourceType":"module"}