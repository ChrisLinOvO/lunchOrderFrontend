{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _typeof from 'babel-runtime/helpers/typeof';\n\nvar _class, _temp;\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { obj, func } from '../util';\nimport Field from '../field';\nimport RGrid from '../responsive-grid';\n\nfunction pickerDefined(obj) {\n  var newObj = {};\n  Object.keys(obj).forEach(function (i) {\n    if (typeof obj[i] !== 'undefined') {\n      newObj[i] = obj[i];\n    }\n  });\n  return newObj;\n}\n\nfunction preventDefault(e) {\n  e.preventDefault();\n}\n\nvar getNewChildren = function getNewChildren(children, props) {\n  var size = props.size,\n      device = props.device,\n      labelAlign = props.labelAlign,\n      labelTextAlign = props.labelTextAlign,\n      labelCol = props.labelCol,\n      wrapperCol = props.wrapperCol,\n      responsive = props.responsive,\n      colon = props.colon;\n  return React.Children.map(children, function (child) {\n    if (obj.isReactFragment(child)) {\n      return getNewChildren(child.props.children, props);\n    }\n\n    if (child && ['function', 'object'].indexOf(_typeof(child.type)) > -1 && child.type._typeMark === 'form_item') {\n      var childrenProps = {\n        labelCol: child.props.labelCol ? child.props.labelCol : labelCol,\n        wrapperCol: child.props.wrapperCol ? child.props.wrapperCol : wrapperCol,\n        labelAlign: child.props.labelAlign ? child.props.labelAlign : device === 'phone' ? 'top' : labelAlign,\n        labelTextAlign: child.props.labelTextAlign ? child.props.labelTextAlign : labelTextAlign,\n        colon: 'colon' in child.props ? child.props.colon : colon,\n        size: child.props.size ? child.props.size : size,\n        responsive: responsive\n      };\n      return React.cloneElement(child, pickerDefined(childrenProps));\n    }\n\n    return child;\n  });\n};\n/** Form */\n\n\nvar Form = (_temp = _class = function (_React$Component) {\n  _inherits(Form, _React$Component);\n\n  function Form(props) {\n    _classCallCheck(this, Form);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.onChange = function (name, value) {\n      _this.props.onChange(_this._formField.getValues(), {\n        name: name,\n        value: value,\n        field: _this._formField\n      });\n    };\n\n    _this._formField = null;\n\n    if (props.field !== false) {\n      var options = _extends({}, props.fieldOptions, {\n        onChange: _this.onChange\n      });\n\n      if (props.field) {\n        _this._formField = props.field;\n        var onChange = _this._formField.options.onChange;\n        options.onChange = func.makeChain(onChange, _this.onChange);\n        _this._formField.setOptions && _this._formField.setOptions(options);\n      } else {\n        if ('value' in props) {\n          options.values = props.value;\n        }\n\n        _this._formField = new Field(_this, options);\n      }\n\n      if (props.locale && props.locale.Validate) {\n        _this._formField.setOptions({\n          messages: props.locale.Validate\n        });\n      }\n\n      props.saveField(_this._formField);\n    }\n\n    return _this;\n  }\n\n  Form.prototype.getChildContext = function getChildContext() {\n    return {\n      _formField: this.props.field ? this.props.field : this._formField,\n      _formSize: this.props.size,\n      _formPreview: this.props.isPreview,\n      _formFullWidth: this.props.fullWidth,\n      _formLabelForErrorMessage: this.props.useLabelForErrorMessage\n    };\n  };\n\n  Form.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var props = this.props;\n\n    if (this._formField) {\n      if ('value' in props && props.value !== prevProps.value) {\n        this._formField.setValues(props.value);\n      }\n\n      if ('error' in props && props.error !== prevProps.error) {\n        this._formField.setValues(props.error);\n      }\n    }\n  };\n\n  Form.prototype.render = function render() {\n    var _classNames;\n\n    var _props = this.props,\n        className = _props.className,\n        inline = _props.inline,\n        size = _props.size,\n        device = _props.device,\n        labelAlign = _props.labelAlign,\n        labelTextAlign = _props.labelTextAlign,\n        onSubmit = _props.onSubmit,\n        children = _props.children,\n        labelCol = _props.labelCol,\n        wrapperCol = _props.wrapperCol,\n        style = _props.style,\n        prefix = _props.prefix,\n        rtl = _props.rtl,\n        isPreview = _props.isPreview,\n        Tag = _props.component,\n        responsive = _props.responsive,\n        gap = _props.gap,\n        colon = _props.colon;\n    var formClassName = classNames((_classNames = {}, _classNames[prefix + 'form'] = true, _classNames[prefix + 'inline'] = inline, _classNames['' + prefix + size] = size, _classNames[prefix + 'form-responsive-grid'] = responsive, _classNames[prefix + 'form-preview'] = isPreview, _classNames[className] = !!className, _classNames));\n    var newChildren = getNewChildren(children, this.props);\n    return React.createElement(Tag, _extends({\n      role: 'grid'\n    }, obj.pickOthers(Form.propTypes, this.props), {\n      className: formClassName,\n      style: style,\n      dir: rtl ? 'rtl' : undefined,\n      onSubmit: onSubmit\n    }), responsive ? React.createElement(RGrid, {\n      gap: gap\n    }, newChildren) : newChildren);\n  };\n\n  return Form;\n}(React.Component), _class.propTypes = {\n  /**\n   * 样式前缀\n   */\n  prefix: PropTypes.string,\n\n  /**\n   * 内联表单\n   */\n  inline: PropTypes.bool,\n\n  /**\n   * 单个 Item 的 size 自定义，优先级高于 Form 的 size, 并且当组件与 Item 一起使用时，组件自身设置 size 属性无效。\n   * @enumdesc 大, 中, 小\n   */\n  size: PropTypes.oneOf(['large', 'medium', 'small']),\n\n  /**\n   * 单个 Item 中表单类组件宽度是否是100%\n   */\n  fullWidth: PropTypes.bool,\n\n  /**\n   * 标签的位置, 如果不设置 labelCol 和 wrapperCol 那么默认是标签在上\n   * @enumdesc 上, 左, 内\n   */\n  labelAlign: PropTypes.oneOf(['top', 'left', 'inset']),\n\n  /**\n   * 标签的左右对齐方式\n   * @enumdesc 左, 右\n   */\n  labelTextAlign: PropTypes.oneOf(['left', 'right']),\n\n  /**\n   * field 实例, 传 false 会禁用 field\n   */\n  field: PropTypes.any,\n\n  /**\n   * 保存 Form 自动生成的 field 对象\n   */\n  saveField: PropTypes.func,\n\n  /**\n   * 控制第一级 Item 的 labelCol\n   */\n  labelCol: PropTypes.object,\n\n  /**\n   * 控制第一级 Item 的 wrapperCol\n   */\n  wrapperCol: PropTypes.object,\n\n  /**\n   * form内有 `htmlType=\"submit\"` 的元素的时候会触发\n   */\n  onSubmit: PropTypes.func,\n\n  /**\n   * 子元素\n   */\n  children: PropTypes.any,\n\n  /**\n   * 扩展class\n   */\n  className: PropTypes.string,\n\n  /**\n   * 自定义内联样式\n   */\n  style: PropTypes.object,\n\n  /**\n   * 表单数值\n   */\n  value: PropTypes.object,\n\n  /**\n   * 表单变化回调\n   * @param {Object} values 表单数据\n   * @param {Object} item 详细\n   * @param {String} item.name 变化的组件名\n   * @param {String} item.value 变化的数据\n   * @param {Object} item.field field 实例\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * 设置标签类型\n   */\n  component: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  fieldOptions: PropTypes.object,\n  rtl: PropTypes.bool,\n\n  /**\n   * 预设屏幕宽度\n   */\n  device: PropTypes.oneOf(['phone', 'tablet', 'desktop']),\n\n  /**\n   * 是否开启内置的响应式布局 （使用ResponsiveGrid）\n   * @version 1.19\n   */\n  responsive: PropTypes.bool,\n\n  /**\n   * 是否开启预览态\n   * @version 1.19\n   */\n  isPreview: PropTypes.bool,\n\n  /**\n   * 是否使用 label 替换校验信息的 name 字段\n   * @version 1.20\n   */\n  useLabelForErrorMessage: PropTypes.bool,\n\n  /**\n   * 表示是否显示 label 后面的冒号\n   */\n  colon: PropTypes.bool,\n  // 在 responsive模式下，透传给 ResponsiveGrid的， 表示 每个 cell 之间的间距， [bottom&top, right&left]\n  gap: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.number), PropTypes.number])\n}, _class.defaultProps = {\n  prefix: 'next-',\n  onSubmit: preventDefault,\n  size: 'medium',\n  labelAlign: 'left',\n  onChange: func.noop,\n  component: 'form',\n  saveField: func.noop,\n  device: 'desktop',\n  colon: false\n}, _class.childContextTypes = {\n  _formField: PropTypes.object,\n  _formSize: PropTypes.string,\n  _formPreview: PropTypes.bool,\n  _formFullWidth: PropTypes.bool,\n  _formLabelForErrorMessage: PropTypes.bool\n}, _temp);\nForm.displayName = 'Form';\nexport { Form as default };","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/form/form.js"],"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","_typeof","_class","_temp","React","PropTypes","classNames","obj","func","Field","RGrid","pickerDefined","newObj","Object","keys","forEach","i","preventDefault","e","getNewChildren","children","props","size","device","labelAlign","labelTextAlign","labelCol","wrapperCol","responsive","colon","Children","map","child","isReactFragment","indexOf","type","_typeMark","childrenProps","cloneElement","Form","_React$Component","_this","call","onChange","name","value","_formField","getValues","field","options","fieldOptions","makeChain","setOptions","values","locale","Validate","messages","saveField","prototype","getChildContext","_formSize","_formPreview","isPreview","_formFullWidth","fullWidth","_formLabelForErrorMessage","useLabelForErrorMessage","componentDidUpdate","prevProps","setValues","error","render","_classNames","_props","className","inline","onSubmit","style","prefix","rtl","Tag","component","gap","formClassName","newChildren","createElement","role","pickOthers","propTypes","dir","undefined","Component","string","bool","oneOf","any","object","oneOfType","arrayOf","number","defaultProps","noop","childContextTypes","displayName","default"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,+BAArB;AACA,OAAOC,eAAP,MAA4B,sCAA5B;AACA,OAAOC,0BAAP,MAAuC,iDAAvC;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,OAAP,MAAoB,8BAApB;;AAEA,IAAIC,MAAJ,EAAYC,KAAZ;;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,GAAT,EAAcC,IAAd,QAA0B,SAA1B;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;;AAEA,SAASC,aAAT,CAAuBJ,GAAvB,EAA4B;AACxB,MAAIK,MAAM,GAAG,EAAb;AACAC,EAAAA,MAAM,CAACC,IAAP,CAAYP,GAAZ,EAAiBQ,OAAjB,CAAyB,UAAUC,CAAV,EAAa;AAClC,QAAI,OAAOT,GAAG,CAACS,CAAD,CAAV,KAAkB,WAAtB,EAAmC;AAC/BJ,MAAAA,MAAM,CAACI,CAAD,CAAN,GAAYT,GAAG,CAACS,CAAD,CAAf;AACH;AACJ,GAJD;AAKA,SAAOJ,MAAP;AACH;;AAED,SAASK,cAAT,CAAwBC,CAAxB,EAA2B;AACvBA,EAAAA,CAAC,CAACD,cAAF;AACH;;AACD,IAAIE,cAAc,GAAG,SAASA,cAAT,CAAwBC,QAAxB,EAAkCC,KAAlC,EAAyC;AAC1D,MAAIC,IAAI,GAAGD,KAAK,CAACC,IAAjB;AAAA,MACIC,MAAM,GAAGF,KAAK,CAACE,MADnB;AAAA,MAEIC,UAAU,GAAGH,KAAK,CAACG,UAFvB;AAAA,MAGIC,cAAc,GAAGJ,KAAK,CAACI,cAH3B;AAAA,MAIIC,QAAQ,GAAGL,KAAK,CAACK,QAJrB;AAAA,MAKIC,UAAU,GAAGN,KAAK,CAACM,UALvB;AAAA,MAMIC,UAAU,GAAGP,KAAK,CAACO,UANvB;AAAA,MAOIC,KAAK,GAAGR,KAAK,CAACQ,KAPlB;AAUA,SAAOzB,KAAK,CAAC0B,QAAN,CAAeC,GAAf,CAAmBX,QAAnB,EAA6B,UAAUY,KAAV,EAAiB;AACjD,QAAIzB,GAAG,CAAC0B,eAAJ,CAAoBD,KAApB,CAAJ,EAAgC;AAC5B,aAAOb,cAAc,CAACa,KAAK,CAACX,KAAN,CAAYD,QAAb,EAAuBC,KAAvB,CAArB;AACH;;AAED,QAAIW,KAAK,IAAI,CAAC,UAAD,EAAa,QAAb,EAAuBE,OAAvB,CAA+BjC,OAAO,CAAC+B,KAAK,CAACG,IAAP,CAAtC,IAAsD,CAAC,CAAhE,IAAqEH,KAAK,CAACG,IAAN,CAAWC,SAAX,KAAyB,WAAlG,EAA+G;AAC3G,UAAIC,aAAa,GAAG;AAChBX,QAAAA,QAAQ,EAAEM,KAAK,CAACX,KAAN,CAAYK,QAAZ,GAAuBM,KAAK,CAACX,KAAN,CAAYK,QAAnC,GAA8CA,QADxC;AAEhBC,QAAAA,UAAU,EAAEK,KAAK,CAACX,KAAN,CAAYM,UAAZ,GAAyBK,KAAK,CAACX,KAAN,CAAYM,UAArC,GAAkDA,UAF9C;AAGhBH,QAAAA,UAAU,EAAEQ,KAAK,CAACX,KAAN,CAAYG,UAAZ,GAAyBQ,KAAK,CAACX,KAAN,CAAYG,UAArC,GAAkDD,MAAM,KAAK,OAAX,GAAqB,KAArB,GAA6BC,UAH3E;AAIhBC,QAAAA,cAAc,EAAEO,KAAK,CAACX,KAAN,CAAYI,cAAZ,GAA6BO,KAAK,CAACX,KAAN,CAAYI,cAAzC,GAA0DA,cAJ1D;AAKhBI,QAAAA,KAAK,EAAE,WAAWG,KAAK,CAACX,KAAjB,GAAyBW,KAAK,CAACX,KAAN,CAAYQ,KAArC,GAA6CA,KALpC;AAMhBP,QAAAA,IAAI,EAAEU,KAAK,CAACX,KAAN,CAAYC,IAAZ,GAAmBU,KAAK,CAACX,KAAN,CAAYC,IAA/B,GAAsCA,IAN5B;AAOhBM,QAAAA,UAAU,EAAEA;AAPI,OAApB;AASA,aAAOxB,KAAK,CAACkC,YAAN,CAAmBN,KAAnB,EAA0BrB,aAAa,CAAC0B,aAAD,CAAvC,CAAP;AACH;;AACD,WAAOL,KAAP;AACH,GAlBM,CAAP;AAmBH,CA9BD;AAgCA;;;AACA,IAAIO,IAAI,IAAIpC,KAAK,GAAGD,MAAM,GAAG,UAAUsC,gBAAV,EAA4B;AACrDxC,EAAAA,SAAS,CAACuC,IAAD,EAAOC,gBAAP,CAAT;;AAEA,WAASD,IAAT,CAAclB,KAAd,EAAqB;AACjBvB,IAAAA,eAAe,CAAC,IAAD,EAAOyC,IAAP,CAAf;;AAEA,QAAIE,KAAK,GAAG1C,0BAA0B,CAAC,IAAD,EAAOyC,gBAAgB,CAACE,IAAjB,CAAsB,IAAtB,EAA4BrB,KAA5B,CAAP,CAAtC;;AAEAoB,IAAAA,KAAK,CAACE,QAAN,GAAiB,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AACpCJ,MAAAA,KAAK,CAACpB,KAAN,CAAYsB,QAAZ,CAAqBF,KAAK,CAACK,UAAN,CAAiBC,SAAjB,EAArB,EAAmD;AAC/CH,QAAAA,IAAI,EAAEA,IADyC;AAE/CC,QAAAA,KAAK,EAAEA,KAFwC;AAG/CG,QAAAA,KAAK,EAAEP,KAAK,CAACK;AAHkC,OAAnD;AAKH,KAND;;AAQAL,IAAAA,KAAK,CAACK,UAAN,GAAmB,IAAnB;;AACA,QAAIzB,KAAK,CAAC2B,KAAN,KAAgB,KAApB,EAA2B;AACvB,UAAIC,OAAO,GAAGpD,QAAQ,CAAC,EAAD,EAAKwB,KAAK,CAAC6B,YAAX,EAAyB;AAC3CP,QAAAA,QAAQ,EAAEF,KAAK,CAACE;AAD2B,OAAzB,CAAtB;;AAIA,UAAItB,KAAK,CAAC2B,KAAV,EAAiB;AACbP,QAAAA,KAAK,CAACK,UAAN,GAAmBzB,KAAK,CAAC2B,KAAzB;AACA,YAAIL,QAAQ,GAAGF,KAAK,CAACK,UAAN,CAAiBG,OAAjB,CAAyBN,QAAxC;AACAM,QAAAA,OAAO,CAACN,QAAR,GAAmBnC,IAAI,CAAC2C,SAAL,CAAeR,QAAf,EAAyBF,KAAK,CAACE,QAA/B,CAAnB;AACAF,QAAAA,KAAK,CAACK,UAAN,CAAiBM,UAAjB,IAA+BX,KAAK,CAACK,UAAN,CAAiBM,UAAjB,CAA4BH,OAA5B,CAA/B;AACH,OALD,MAKO;AACH,YAAI,WAAW5B,KAAf,EAAsB;AAClB4B,UAAAA,OAAO,CAACI,MAAR,GAAiBhC,KAAK,CAACwB,KAAvB;AACH;;AAEDJ,QAAAA,KAAK,CAACK,UAAN,GAAmB,IAAIrC,KAAJ,CAAUgC,KAAV,EAAiBQ,OAAjB,CAAnB;AACH;;AAED,UAAI5B,KAAK,CAACiC,MAAN,IAAgBjC,KAAK,CAACiC,MAAN,CAAaC,QAAjC,EAA2C;AACvCd,QAAAA,KAAK,CAACK,UAAN,CAAiBM,UAAjB,CAA4B;AAAEI,UAAAA,QAAQ,EAAEnC,KAAK,CAACiC,MAAN,CAAaC;AAAzB,SAA5B;AACH;;AAEDlC,MAAAA,KAAK,CAACoC,SAAN,CAAgBhB,KAAK,CAACK,UAAtB;AACH;;AACD,WAAOL,KAAP;AACH;;AAEDF,EAAAA,IAAI,CAACmB,SAAL,CAAeC,eAAf,GAAiC,SAASA,eAAT,GAA2B;AACxD,WAAO;AACHb,MAAAA,UAAU,EAAE,KAAKzB,KAAL,CAAW2B,KAAX,GAAmB,KAAK3B,KAAL,CAAW2B,KAA9B,GAAsC,KAAKF,UADpD;AAEHc,MAAAA,SAAS,EAAE,KAAKvC,KAAL,CAAWC,IAFnB;AAGHuC,MAAAA,YAAY,EAAE,KAAKxC,KAAL,CAAWyC,SAHtB;AAIHC,MAAAA,cAAc,EAAE,KAAK1C,KAAL,CAAW2C,SAJxB;AAKHC,MAAAA,yBAAyB,EAAE,KAAK5C,KAAL,CAAW6C;AALnC,KAAP;AAOH,GARD;;AAUA3B,EAAAA,IAAI,CAACmB,SAAL,CAAeS,kBAAf,GAAoC,SAASA,kBAAT,CAA4BC,SAA5B,EAAuC;AACvE,QAAI/C,KAAK,GAAG,KAAKA,KAAjB;;AAEA,QAAI,KAAKyB,UAAT,EAAqB;AACjB,UAAI,WAAWzB,KAAX,IAAoBA,KAAK,CAACwB,KAAN,KAAgBuB,SAAS,CAACvB,KAAlD,EAAyD;AACrD,aAAKC,UAAL,CAAgBuB,SAAhB,CAA0BhD,KAAK,CAACwB,KAAhC;AACH;;AACD,UAAI,WAAWxB,KAAX,IAAoBA,KAAK,CAACiD,KAAN,KAAgBF,SAAS,CAACE,KAAlD,EAAyD;AACrD,aAAKxB,UAAL,CAAgBuB,SAAhB,CAA0BhD,KAAK,CAACiD,KAAhC;AACH;AACJ;AACJ,GAXD;;AAaA/B,EAAAA,IAAI,CAACmB,SAAL,CAAea,MAAf,GAAwB,SAASA,MAAT,GAAkB;AACtC,QAAIC,WAAJ;;AAEA,QAAIC,MAAM,GAAG,KAAKpD,KAAlB;AAAA,QACIqD,SAAS,GAAGD,MAAM,CAACC,SADvB;AAAA,QAEIC,MAAM,GAAGF,MAAM,CAACE,MAFpB;AAAA,QAGIrD,IAAI,GAAGmD,MAAM,CAACnD,IAHlB;AAAA,QAIIC,MAAM,GAAGkD,MAAM,CAAClD,MAJpB;AAAA,QAKIC,UAAU,GAAGiD,MAAM,CAACjD,UALxB;AAAA,QAMIC,cAAc,GAAGgD,MAAM,CAAChD,cAN5B;AAAA,QAOImD,QAAQ,GAAGH,MAAM,CAACG,QAPtB;AAAA,QAQIxD,QAAQ,GAAGqD,MAAM,CAACrD,QARtB;AAAA,QASIM,QAAQ,GAAG+C,MAAM,CAAC/C,QATtB;AAAA,QAUIC,UAAU,GAAG8C,MAAM,CAAC9C,UAVxB;AAAA,QAWIkD,KAAK,GAAGJ,MAAM,CAACI,KAXnB;AAAA,QAYIC,MAAM,GAAGL,MAAM,CAACK,MAZpB;AAAA,QAaIC,GAAG,GAAGN,MAAM,CAACM,GAbjB;AAAA,QAcIjB,SAAS,GAAGW,MAAM,CAACX,SAdvB;AAAA,QAeIkB,GAAG,GAAGP,MAAM,CAACQ,SAfjB;AAAA,QAgBIrD,UAAU,GAAG6C,MAAM,CAAC7C,UAhBxB;AAAA,QAiBIsD,GAAG,GAAGT,MAAM,CAACS,GAjBjB;AAAA,QAkBIrD,KAAK,GAAG4C,MAAM,CAAC5C,KAlBnB;AAqBA,QAAIsD,aAAa,GAAG7E,UAAU,EAAEkE,WAAW,GAAG,EAAd,EAAkBA,WAAW,CAACM,MAAM,GAAG,MAAV,CAAX,GAA+B,IAAjD,EAAuDN,WAAW,CAACM,MAAM,GAAG,QAAV,CAAX,GAAiCH,MAAxF,EAAgGH,WAAW,CAAC,KAAKM,MAAL,GAAcxD,IAAf,CAAX,GAAkCA,IAAlI,EAAwIkD,WAAW,CAACM,MAAM,GAAG,sBAAV,CAAX,GAA+ClD,UAAvL,EAAmM4C,WAAW,CAACM,MAAM,GAAG,cAAV,CAAX,GAAuChB,SAA1O,EAAqPU,WAAW,CAACE,SAAD,CAAX,GAAyB,CAAC,CAACA,SAAhR,EAA2RF,WAA7R,EAA9B;AAEA,QAAIY,WAAW,GAAGjE,cAAc,CAACC,QAAD,EAAW,KAAKC,KAAhB,CAAhC;AAEA,WAAOjB,KAAK,CAACiF,aAAN,CACHL,GADG,EAEHnF,QAAQ,CAAC;AACLyF,MAAAA,IAAI,EAAE;AADD,KAAD,EAEL/E,GAAG,CAACgF,UAAJ,CAAehD,IAAI,CAACiD,SAApB,EAA+B,KAAKnE,KAApC,CAFK,EAEuC;AAC3CqD,MAAAA,SAAS,EAAES,aADgC;AAE3CN,MAAAA,KAAK,EAAEA,KAFoC;AAG3CY,MAAAA,GAAG,EAAEV,GAAG,GAAG,KAAH,GAAWW,SAHwB;AAI3Cd,MAAAA,QAAQ,EAAEA;AAJiC,KAFvC,CAFL,EAUHhD,UAAU,GAAGxB,KAAK,CAACiF,aAAN,CACT3E,KADS,EAET;AAAEwE,MAAAA,GAAG,EAAEA;AAAP,KAFS,EAGTE,WAHS,CAAH,GAINA,WAdD,CAAP;AAgBH,GA5CD;;AA8CA,SAAO7C,IAAP;AACH,CAlH4B,CAkH3BnC,KAAK,CAACuF,SAlHqB,CAAjB,EAkHQzF,MAAM,CAACsF,SAAP,GAAmB;AACnC;AACJ;AACA;AACIV,EAAAA,MAAM,EAAEzE,SAAS,CAACuF,MAJiB;;AAKnC;AACJ;AACA;AACIjB,EAAAA,MAAM,EAAEtE,SAAS,CAACwF,IARiB;;AASnC;AACJ;AACA;AACA;AACIvE,EAAAA,IAAI,EAAEjB,SAAS,CAACyF,KAAV,CAAgB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,CAAhB,CAb6B;;AAcnC;AACJ;AACA;AACI9B,EAAAA,SAAS,EAAE3D,SAAS,CAACwF,IAjBc;;AAkBnC;AACJ;AACA;AACA;AACIrE,EAAAA,UAAU,EAAEnB,SAAS,CAACyF,KAAV,CAAgB,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB,CAAhB,CAtBuB;;AAuBnC;AACJ;AACA;AACA;AACIrE,EAAAA,cAAc,EAAEpB,SAAS,CAACyF,KAAV,CAAgB,CAAC,MAAD,EAAS,OAAT,CAAhB,CA3BmB;;AA4BnC;AACJ;AACA;AACI9C,EAAAA,KAAK,EAAE3C,SAAS,CAAC0F,GA/BkB;;AAgCnC;AACJ;AACA;AACItC,EAAAA,SAAS,EAAEpD,SAAS,CAACG,IAnCc;;AAoCnC;AACJ;AACA;AACIkB,EAAAA,QAAQ,EAAErB,SAAS,CAAC2F,MAvCe;;AAwCnC;AACJ;AACA;AACIrE,EAAAA,UAAU,EAAEtB,SAAS,CAAC2F,MA3Ca;;AA4CnC;AACJ;AACA;AACIpB,EAAAA,QAAQ,EAAEvE,SAAS,CAACG,IA/Ce;;AAgDnC;AACJ;AACA;AACIY,EAAAA,QAAQ,EAAEf,SAAS,CAAC0F,GAnDe;;AAoDnC;AACJ;AACA;AACIrB,EAAAA,SAAS,EAAErE,SAAS,CAACuF,MAvDc;;AAwDnC;AACJ;AACA;AACIf,EAAAA,KAAK,EAAExE,SAAS,CAAC2F,MA3DkB;;AA4DnC;AACJ;AACA;AACInD,EAAAA,KAAK,EAAExC,SAAS,CAAC2F,MA/DkB;;AAgEnC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACIrD,EAAAA,QAAQ,EAAEtC,SAAS,CAACG,IAxEe;;AAyEnC;AACJ;AACA;AACIyE,EAAAA,SAAS,EAAE5E,SAAS,CAAC4F,SAAV,CAAoB,CAAC5F,SAAS,CAACuF,MAAX,EAAmBvF,SAAS,CAACG,IAA7B,CAApB,CA5EwB;AA6EnC0C,EAAAA,YAAY,EAAE7C,SAAS,CAAC2F,MA7EW;AA8EnCjB,EAAAA,GAAG,EAAE1E,SAAS,CAACwF,IA9EoB;;AA+EnC;AACJ;AACA;AACItE,EAAAA,MAAM,EAAElB,SAAS,CAACyF,KAAV,CAAgB,CAAC,OAAD,EAAU,QAAV,EAAoB,SAApB,CAAhB,CAlF2B;;AAmFnC;AACJ;AACA;AACA;AACIlE,EAAAA,UAAU,EAAEvB,SAAS,CAACwF,IAvFa;;AAwFnC;AACJ;AACA;AACA;AACI/B,EAAAA,SAAS,EAAEzD,SAAS,CAACwF,IA5Fc;;AA6FnC;AACJ;AACA;AACA;AACI3B,EAAAA,uBAAuB,EAAE7D,SAAS,CAACwF,IAjGA;;AAkGnC;AACJ;AACA;AACIhE,EAAAA,KAAK,EAAExB,SAAS,CAACwF,IArGkB;AAsGnC;AACAX,EAAAA,GAAG,EAAE7E,SAAS,CAAC4F,SAAV,CAAoB,CAAC5F,SAAS,CAAC6F,OAAV,CAAkB7F,SAAS,CAAC8F,MAA5B,CAAD,EAAsC9F,SAAS,CAAC8F,MAAhD,CAApB;AAvG8B,CAlH3B,EA0NTjG,MAAM,CAACkG,YAAP,GAAsB;AACrBtB,EAAAA,MAAM,EAAE,OADa;AAErBF,EAAAA,QAAQ,EAAE3D,cAFW;AAGrBK,EAAAA,IAAI,EAAE,QAHe;AAIrBE,EAAAA,UAAU,EAAE,MAJS;AAKrBmB,EAAAA,QAAQ,EAAEnC,IAAI,CAAC6F,IALM;AAMrBpB,EAAAA,SAAS,EAAE,MANU;AAOrBxB,EAAAA,SAAS,EAAEjD,IAAI,CAAC6F,IAPK;AAQrB9E,EAAAA,MAAM,EAAE,SARa;AASrBM,EAAAA,KAAK,EAAE;AATc,CA1Nb,EAoOT3B,MAAM,CAACoG,iBAAP,GAA2B;AAC1BxD,EAAAA,UAAU,EAAEzC,SAAS,CAAC2F,MADI;AAE1BpC,EAAAA,SAAS,EAAEvD,SAAS,CAACuF,MAFK;AAG1B/B,EAAAA,YAAY,EAAExD,SAAS,CAACwF,IAHE;AAI1B9B,EAAAA,cAAc,EAAE1D,SAAS,CAACwF,IAJA;AAK1B5B,EAAAA,yBAAyB,EAAE5D,SAAS,CAACwF;AALX,CApOlB,EA0OT1F,KA1OK,CAAR;AA2OAoC,IAAI,CAACgE,WAAL,GAAmB,MAAnB;AACA,SAAShE,IAAI,IAAIiE,OAAjB","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _typeof from 'babel-runtime/helpers/typeof';\n\nvar _class, _temp;\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { obj, func } from '../util';\nimport Field from '../field';\nimport RGrid from '../responsive-grid';\n\nfunction pickerDefined(obj) {\n    var newObj = {};\n    Object.keys(obj).forEach(function (i) {\n        if (typeof obj[i] !== 'undefined') {\n            newObj[i] = obj[i];\n        }\n    });\n    return newObj;\n}\n\nfunction preventDefault(e) {\n    e.preventDefault();\n}\nvar getNewChildren = function getNewChildren(children, props) {\n    var size = props.size,\n        device = props.device,\n        labelAlign = props.labelAlign,\n        labelTextAlign = props.labelTextAlign,\n        labelCol = props.labelCol,\n        wrapperCol = props.wrapperCol,\n        responsive = props.responsive,\n        colon = props.colon;\n\n\n    return React.Children.map(children, function (child) {\n        if (obj.isReactFragment(child)) {\n            return getNewChildren(child.props.children, props);\n        }\n\n        if (child && ['function', 'object'].indexOf(_typeof(child.type)) > -1 && child.type._typeMark === 'form_item') {\n            var childrenProps = {\n                labelCol: child.props.labelCol ? child.props.labelCol : labelCol,\n                wrapperCol: child.props.wrapperCol ? child.props.wrapperCol : wrapperCol,\n                labelAlign: child.props.labelAlign ? child.props.labelAlign : device === 'phone' ? 'top' : labelAlign,\n                labelTextAlign: child.props.labelTextAlign ? child.props.labelTextAlign : labelTextAlign,\n                colon: 'colon' in child.props ? child.props.colon : colon,\n                size: child.props.size ? child.props.size : size,\n                responsive: responsive\n            };\n            return React.cloneElement(child, pickerDefined(childrenProps));\n        }\n        return child;\n    });\n};\n\n/** Form */\nvar Form = (_temp = _class = function (_React$Component) {\n    _inherits(Form, _React$Component);\n\n    function Form(props) {\n        _classCallCheck(this, Form);\n\n        var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n        _this.onChange = function (name, value) {\n            _this.props.onChange(_this._formField.getValues(), {\n                name: name,\n                value: value,\n                field: _this._formField\n            });\n        };\n\n        _this._formField = null;\n        if (props.field !== false) {\n            var options = _extends({}, props.fieldOptions, {\n                onChange: _this.onChange\n            });\n\n            if (props.field) {\n                _this._formField = props.field;\n                var onChange = _this._formField.options.onChange;\n                options.onChange = func.makeChain(onChange, _this.onChange);\n                _this._formField.setOptions && _this._formField.setOptions(options);\n            } else {\n                if ('value' in props) {\n                    options.values = props.value;\n                }\n\n                _this._formField = new Field(_this, options);\n            }\n\n            if (props.locale && props.locale.Validate) {\n                _this._formField.setOptions({ messages: props.locale.Validate });\n            }\n\n            props.saveField(_this._formField);\n        }\n        return _this;\n    }\n\n    Form.prototype.getChildContext = function getChildContext() {\n        return {\n            _formField: this.props.field ? this.props.field : this._formField,\n            _formSize: this.props.size,\n            _formPreview: this.props.isPreview,\n            _formFullWidth: this.props.fullWidth,\n            _formLabelForErrorMessage: this.props.useLabelForErrorMessage\n        };\n    };\n\n    Form.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n        var props = this.props;\n\n        if (this._formField) {\n            if ('value' in props && props.value !== prevProps.value) {\n                this._formField.setValues(props.value);\n            }\n            if ('error' in props && props.error !== prevProps.error) {\n                this._formField.setValues(props.error);\n            }\n        }\n    };\n\n    Form.prototype.render = function render() {\n        var _classNames;\n\n        var _props = this.props,\n            className = _props.className,\n            inline = _props.inline,\n            size = _props.size,\n            device = _props.device,\n            labelAlign = _props.labelAlign,\n            labelTextAlign = _props.labelTextAlign,\n            onSubmit = _props.onSubmit,\n            children = _props.children,\n            labelCol = _props.labelCol,\n            wrapperCol = _props.wrapperCol,\n            style = _props.style,\n            prefix = _props.prefix,\n            rtl = _props.rtl,\n            isPreview = _props.isPreview,\n            Tag = _props.component,\n            responsive = _props.responsive,\n            gap = _props.gap,\n            colon = _props.colon;\n\n\n        var formClassName = classNames((_classNames = {}, _classNames[prefix + 'form'] = true, _classNames[prefix + 'inline'] = inline, _classNames['' + prefix + size] = size, _classNames[prefix + 'form-responsive-grid'] = responsive, _classNames[prefix + 'form-preview'] = isPreview, _classNames[className] = !!className, _classNames));\n\n        var newChildren = getNewChildren(children, this.props);\n\n        return React.createElement(\n            Tag,\n            _extends({\n                role: 'grid'\n            }, obj.pickOthers(Form.propTypes, this.props), {\n                className: formClassName,\n                style: style,\n                dir: rtl ? 'rtl' : undefined,\n                onSubmit: onSubmit\n            }),\n            responsive ? React.createElement(\n                RGrid,\n                { gap: gap },\n                newChildren\n            ) : newChildren\n        );\n    };\n\n    return Form;\n}(React.Component), _class.propTypes = {\n    /**\n     * 样式前缀\n     */\n    prefix: PropTypes.string,\n    /**\n     * 内联表单\n     */\n    inline: PropTypes.bool,\n    /**\n     * 单个 Item 的 size 自定义，优先级高于 Form 的 size, 并且当组件与 Item 一起使用时，组件自身设置 size 属性无效。\n     * @enumdesc 大, 中, 小\n     */\n    size: PropTypes.oneOf(['large', 'medium', 'small']),\n    /**\n     * 单个 Item 中表单类组件宽度是否是100%\n     */\n    fullWidth: PropTypes.bool,\n    /**\n     * 标签的位置, 如果不设置 labelCol 和 wrapperCol 那么默认是标签在上\n     * @enumdesc 上, 左, 内\n     */\n    labelAlign: PropTypes.oneOf(['top', 'left', 'inset']),\n    /**\n     * 标签的左右对齐方式\n     * @enumdesc 左, 右\n     */\n    labelTextAlign: PropTypes.oneOf(['left', 'right']),\n    /**\n     * field 实例, 传 false 会禁用 field\n     */\n    field: PropTypes.any,\n    /**\n     * 保存 Form 自动生成的 field 对象\n     */\n    saveField: PropTypes.func,\n    /**\n     * 控制第一级 Item 的 labelCol\n     */\n    labelCol: PropTypes.object,\n    /**\n     * 控制第一级 Item 的 wrapperCol\n     */\n    wrapperCol: PropTypes.object,\n    /**\n     * form内有 `htmlType=\"submit\"` 的元素的时候会触发\n     */\n    onSubmit: PropTypes.func,\n    /**\n     * 子元素\n     */\n    children: PropTypes.any,\n    /**\n     * 扩展class\n     */\n    className: PropTypes.string,\n    /**\n     * 自定义内联样式\n     */\n    style: PropTypes.object,\n    /**\n     * 表单数值\n     */\n    value: PropTypes.object,\n    /**\n     * 表单变化回调\n     * @param {Object} values 表单数据\n     * @param {Object} item 详细\n     * @param {String} item.name 变化的组件名\n     * @param {String} item.value 变化的数据\n     * @param {Object} item.field field 实例\n     */\n    onChange: PropTypes.func,\n    /**\n     * 设置标签类型\n     */\n    component: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n    fieldOptions: PropTypes.object,\n    rtl: PropTypes.bool,\n    /**\n     * 预设屏幕宽度\n     */\n    device: PropTypes.oneOf(['phone', 'tablet', 'desktop']),\n    /**\n     * 是否开启内置的响应式布局 （使用ResponsiveGrid）\n     * @version 1.19\n     */\n    responsive: PropTypes.bool,\n    /**\n     * 是否开启预览态\n     * @version 1.19\n     */\n    isPreview: PropTypes.bool,\n    /**\n     * 是否使用 label 替换校验信息的 name 字段\n     * @version 1.20\n     */\n    useLabelForErrorMessage: PropTypes.bool,\n    /**\n     * 表示是否显示 label 后面的冒号\n     */\n    colon: PropTypes.bool,\n    // 在 responsive模式下，透传给 ResponsiveGrid的， 表示 每个 cell 之间的间距， [bottom&top, right&left]\n    gap: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.number), PropTypes.number])\n}, _class.defaultProps = {\n    prefix: 'next-',\n    onSubmit: preventDefault,\n    size: 'medium',\n    labelAlign: 'left',\n    onChange: func.noop,\n    component: 'form',\n    saveField: func.noop,\n    device: 'desktop',\n    colon: false\n}, _class.childContextTypes = {\n    _formField: PropTypes.object,\n    _formSize: PropTypes.string,\n    _formPreview: PropTypes.bool,\n    _formFullWidth: PropTypes.bool,\n    _formLabelForErrorMessage: PropTypes.bool\n}, _temp);\nForm.displayName = 'Form';\nexport { Form as default };"]},"metadata":{},"sourceType":"module"}