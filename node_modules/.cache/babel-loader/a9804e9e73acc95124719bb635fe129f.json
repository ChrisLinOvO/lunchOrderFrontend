{"ast":null,"code":"import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport _extends from 'babel-runtime/helpers/extends';\nimport { Children } from 'react';\n/**\n * util module\n */\n\n/**\n * 是否是单选模式\n * @param {string} mode\n * @return {boolean} is single mode\n */\n\nexport function isSingle(mode) {\n  return !mode || mode === 'single';\n}\n/**\n * 在 Select 中，认为 null 和 undefined 都是空值\n * @param {*} n any object\n * @return {boolean}\n */\n\nexport function isNull(n) {\n  return n === null || n === undefined;\n}\n/**\n * 将字符串中的正则表达式关键字符添加转义\n * @param {string} str\n * @return {string}\n */\n\nexport function escapeForReg(str) {\n  return str.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n/**\n * filter by key\n * @param {string} key filter key\n * @param {object} item item object\n * @return {boolean} it's filtered\n */\n\nexport function filter(key, item) {\n  var _key = escapeForReg('' + key);\n\n  var regExp = new RegExp('(' + _key + ')', 'ig');\n  return regExp.test('' + item.value) || regExp.test('' + item.label);\n}\n/**\n * loop map\n * @param {Array} dataSource\n * @param {function} callback\n * @return {Array}\n * ----\n * @callback ~loopCallback\n * @param {object} option\n */\n\nexport function loopMap(dataSource, callback) {\n  var result = [];\n  dataSource.forEach(function (option) {\n    if (option.children) {\n      var children = loopMap(option.children, callback);\n      result.push(_extends({}, option, {\n        children: children\n      }));\n    } else {\n      // eslint-disable-next-line callback-return\n      var tmp = callback(option);\n      tmp && result.push(tmp);\n    }\n  });\n  return result;\n}\n/**\n * Parse dataSource from MenuItem\n * @static\n * @param {Array<Element>} children\n * @param {number} [deep=0] recursion deep level\n */\n\nexport function parseDataSourceFromChildren(children) {\n  var deep = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var source = [];\n  Children.forEach(children, function (child, index) {\n    if (!child) {\n      return;\n    }\n\n    var type = child.type,\n        childProps = child.props;\n    var item2 = {\n      deep: deep\n    };\n    var isOption = false;\n    var isOptionGroup = false;\n\n    if (typeof type === 'function' && type._typeMark === 'next_select_option' || type === 'option') {\n      isOption = true;\n    }\n\n    if (typeof type === 'function' && type._typeMark === 'next_select_option_group' || type === 'optgroup') {\n      isOptionGroup = true;\n    }\n\n    if (!isOption && !isOptionGroup) {\n      return;\n    }\n\n    if (isOption) {\n      // option\n      // If children is a string, it can be used as value\n      var isStrChild = typeof childProps.children === 'string'; // value > key > string children > index\n\n      item2.value = 'value' in childProps ? childProps.value : 'key' in childProps ? childProps.key : isStrChild ? childProps.children : '' + index;\n      item2.label = childProps.label || childProps.children || '' + item2.value;\n\n      if ('title' in childProps) {\n        item2.title = childProps.title;\n      }\n\n      childProps.disabled === true && (item2.disabled = true); // You can put your extra data here, and use it in `itemRender` or `labelRender`\n\n      _extends(item2, childProps['data-extra'] || {});\n    } else if (isOptionGroup && deep < 1) {\n      // option group\n      item2.label = childProps.label || 'Group'; // parse children nodes\n\n      item2.children = parseDataSourceFromChildren(childProps.children, deep + 1);\n    }\n\n    source.push(item2);\n  });\n  return source;\n}\n/**\n * Normalize dataSource\n * @static\n * @param {Array} dataSource\n * @param {number} [deep=0] recursion deep level\n * ----\n * value priority: value > 'index'\n * label priority: label > 'value' > 'index'\n * disabled: disabled === true\n */\n\nexport function normalizeDataSource(dataSource) {\n  var deep = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var showDataSourceChildren = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var source = [];\n  dataSource.forEach(function (item, index) {\n    // enable array of basic type\n    if (/string|boolean|number/.test(typeof item === 'undefined' ? 'undefined' : _typeof(item)) || item === null || item === undefined) {\n      item = {\n        label: '' + item,\n        value: item\n      };\n    } // filter off addon item\n\n\n    if (item && item.__isAddon) {\n      return;\n    }\n\n    var item2 = {\n      deep: deep\n    }; // deep < 1: only 2 level allowed\n\n    if (Array.isArray(item.children) && deep < 1 && showDataSourceChildren) {\n      // handle group\n      item2.label = item.label || item.value || 'Group ' + index; // parse children\n\n      item2.children = normalizeDataSource(item.children, deep + 1);\n    } else {\n      var _item = item,\n          value = _item.value,\n          label = _item.label,\n          disabled = _item.disabled,\n          title = _item.title,\n          others = _objectWithoutProperties(_item, ['value', 'label', 'disabled', 'title']); // undefined 认为是没传取 index 值替代\n\n\n      item2.value = typeof value !== 'undefined' ? value : '' + index;\n      item2.label = label || '' + item2.value;\n\n      if ('title' in item) {\n        item2.title = title;\n      }\n\n      disabled === true && (item2.disabled = true);\n\n      _extends(item2, others);\n    }\n\n    source.push(item2);\n  });\n  return source;\n}\n/**\n * Get flatten dataSource\n * @static\n * @param  {Array} dataSource structured dataSource\n * @return {Array}\n */\n\nexport function flattingDataSource(dataSource) {\n  var source = [];\n  dataSource.forEach(function (item) {\n    if (Array.isArray(item.children)) {\n      source.push.apply(source, flattingDataSource(item.children));\n    } else {\n      source.push(item);\n    }\n  });\n  return source;\n}\nexport function filterDataSource(dataSource, key, filter, addonKey) {\n  if (!Array.isArray(dataSource)) {\n    return [];\n  }\n\n  if (typeof key === 'undefined' || key === null) {\n    return [].concat(dataSource);\n  }\n\n  var addKey = true;\n  var menuDataSource = loopMap(dataSource, function (option) {\n    if (key === '' + option.value) {\n      addKey = false;\n    }\n\n    return filter(key, option) && !option.__isAddon && option;\n  }); // if key not in menuDataSource, add key to dataSource\n\n  if (addonKey && key && addKey) {\n    menuDataSource.unshift({\n      value: key,\n      label: key,\n      __isAddon: true\n    });\n  }\n\n  return menuDataSource;\n}\n\nfunction getKeyItemByValue(value, valueMap) {\n  var item = void 0;\n\n  if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n    if (value.hasOwnProperty('value')) {\n      item = value;\n    } else {\n      item = _extends({\n        value: ''\n      }, value);\n    }\n  } else {\n    item = valueMap['' + value] || {\n      value: value,\n      label: value\n    };\n  }\n\n  return item;\n}\n/**\n * compute valueDataSource by new value\n * @param {Array/String} value 数据\n * @param {Object} mapValueDS   上个value的缓存数据 value => {value,label} 的映射关系表\n * @param {*} mapMenuDS  通过 dataSource 建立 value => {value,label} 的映射关系表\n * @returns {Object} value: [value]; valueDS: [{value,label}]; mapValueDS: {value: {value,label}}\n */\n\n\nexport function getValueDataSource(value, mapValueDS, mapMenuDS) {\n  if (isNull(value)) {\n    return {};\n  }\n\n  var newValue = [];\n  var newValueDS = [];\n  var newMapValueDS = {};\n\n  var _newMapDS = _extends({}, mapValueDS, mapMenuDS);\n\n  if (Array.isArray(value)) {\n    value.forEach(function (v) {\n      var item = getKeyItemByValue(v, _newMapDS);\n      newValueDS.push(item);\n      newMapValueDS['' + item.value] = item;\n      newValue.push(item.value);\n    });\n    return {\n      value: newValue,\n      // [value]\n      valueDS: newValueDS,\n      // [{value,label}]\n      mapValueDS: newMapValueDS // {value: {value,label}}\n\n    };\n  } else {\n    var _mapValueDS;\n\n    var item = getKeyItemByValue(value, _newMapDS);\n    return {\n      value: item.value,\n      valueDS: item,\n      mapValueDS: (_mapValueDS = {}, _mapValueDS['' + item.value] = item, _mapValueDS)\n    };\n  }\n}\n/**\n * Get flatten dataSource\n * @static\n * @param  {any} value structured dataSource\n * @return {String}\n */\n\nexport function valueToSelectKey(value) {\n  var val = void 0;\n\n  if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value.hasOwnProperty('value')) {\n    val = value.value;\n  } else {\n    val = value;\n  }\n\n  return '' + val;\n}\n/**\n * UP Down 改进双向链表方法\n */\n// function DoubleLinkList(element){\n//     this.prev = null;\n//     this.next = null;\n//     this.element = element;\n// }\n//\n// export function mapDoubleLinkList(dataSource){\n//\n//     const mapDS = {};\n//     let doubleLink = null;\n//\n//     let head = null;\n//     let tail = null;\n//\n//     function  append(element) {\n//         if (!doubleLink) {\n//             doubleLink = new DoubleLinkList(element);\n//             head = doubleLink;\n//             tail = doubleLink;\n//             return doubleLink;\n//         }\n//\n//         const node = new DoubleLinkList(element);\n//         tail.next = node;\n//         node.prev = tail;\n//         tail = node;\n//\n//         return tail;\n//     }\n//\n//     dataSource.forEach((item => {\n//         if (item.disabled) {\n//             return;\n//         }\n//         mapDS[`${item.value}`] = append(item);\n//     }));\n//\n//     return mapDS;\n// }\n//","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/select/util.js"],"names":["_objectWithoutProperties","_typeof","_extends","Children","isSingle","mode","isNull","n","undefined","escapeForReg","str","replace","filter","key","item","_key","regExp","RegExp","test","value","label","loopMap","dataSource","callback","result","forEach","option","children","push","tmp","parseDataSourceFromChildren","deep","arguments","length","source","child","index","type","childProps","props","item2","isOption","isOptionGroup","_typeMark","isStrChild","title","disabled","normalizeDataSource","showDataSourceChildren","__isAddon","Array","isArray","_item","others","flattingDataSource","apply","filterDataSource","addonKey","concat","addKey","menuDataSource","unshift","getKeyItemByValue","valueMap","hasOwnProperty","getValueDataSource","mapValueDS","mapMenuDS","newValue","newValueDS","newMapValueDS","_newMapDS","v","valueDS","_mapValueDS","valueToSelectKey","val"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport _extends from 'babel-runtime/helpers/extends';\nimport { Children } from 'react';\n\n/**\n * util module\n */\n\n/**\n * 是否是单选模式\n * @param {string} mode\n * @return {boolean} is single mode\n */\nexport function isSingle(mode) {\n    return !mode || mode === 'single';\n}\n\n/**\n * 在 Select 中，认为 null 和 undefined 都是空值\n * @param {*} n any object\n * @return {boolean}\n */\nexport function isNull(n) {\n    return n === null || n === undefined;\n}\n\n/**\n * 将字符串中的正则表达式关键字符添加转义\n * @param {string} str\n * @return {string}\n */\nexport function escapeForReg(str) {\n    return str.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\n/**\n * filter by key\n * @param {string} key filter key\n * @param {object} item item object\n * @return {boolean} it's filtered\n */\nexport function filter(key, item) {\n    var _key = escapeForReg('' + key);\n    var regExp = new RegExp('(' + _key + ')', 'ig');\n\n    return regExp.test('' + item.value) || regExp.test('' + item.label);\n}\n\n/**\n * loop map\n * @param {Array} dataSource\n * @param {function} callback\n * @return {Array}\n * ----\n * @callback ~loopCallback\n * @param {object} option\n */\nexport function loopMap(dataSource, callback) {\n    var result = [];\n    dataSource.forEach(function (option) {\n        if (option.children) {\n            var children = loopMap(option.children, callback);\n            result.push(_extends({}, option, {\n                children: children\n            }));\n        } else {\n            // eslint-disable-next-line callback-return\n            var tmp = callback(option);\n            tmp && result.push(tmp);\n        }\n    });\n\n    return result;\n}\n\n/**\n * Parse dataSource from MenuItem\n * @static\n * @param {Array<Element>} children\n * @param {number} [deep=0] recursion deep level\n */\nexport function parseDataSourceFromChildren(children) {\n    var deep = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    var source = [];\n\n    Children.forEach(children, function (child, index) {\n        if (!child) {\n            return;\n        }\n        var type = child.type,\n            childProps = child.props;\n\n        var item2 = { deep: deep };\n\n        var isOption = false;\n        var isOptionGroup = false;\n\n        if (typeof type === 'function' && type._typeMark === 'next_select_option' || type === 'option') {\n            isOption = true;\n        }\n        if (typeof type === 'function' && type._typeMark === 'next_select_option_group' || type === 'optgroup') {\n            isOptionGroup = true;\n        }\n\n        if (!isOption && !isOptionGroup) {\n            return;\n        }\n\n        if (isOption) {\n            // option\n            // If children is a string, it can be used as value\n            var isStrChild = typeof childProps.children === 'string';\n            // value > key > string children > index\n            item2.value = 'value' in childProps ? childProps.value : 'key' in childProps ? childProps.key : isStrChild ? childProps.children : '' + index;\n\n            item2.label = childProps.label || childProps.children || '' + item2.value;\n            if ('title' in childProps) {\n                item2.title = childProps.title;\n            }\n            childProps.disabled === true && (item2.disabled = true);\n            // You can put your extra data here, and use it in `itemRender` or `labelRender`\n            _extends(item2, childProps['data-extra'] || {});\n        } else if (isOptionGroup && deep < 1) {\n            // option group\n            item2.label = childProps.label || 'Group';\n            // parse children nodes\n            item2.children = parseDataSourceFromChildren(childProps.children, deep + 1);\n        }\n\n        source.push(item2);\n    });\n\n    return source;\n}\n\n/**\n * Normalize dataSource\n * @static\n * @param {Array} dataSource\n * @param {number} [deep=0] recursion deep level\n * ----\n * value priority: value > 'index'\n * label priority: label > 'value' > 'index'\n * disabled: disabled === true\n */\nexport function normalizeDataSource(dataSource) {\n    var deep = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var showDataSourceChildren = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n    var source = [];\n\n    dataSource.forEach(function (item, index) {\n        // enable array of basic type\n        if (/string|boolean|number/.test(typeof item === 'undefined' ? 'undefined' : _typeof(item)) || item === null || item === undefined) {\n            item = { label: '' + item, value: item };\n        }\n\n        // filter off addon item\n        if (item && item.__isAddon) {\n            return;\n        }\n\n        var item2 = { deep: deep };\n        // deep < 1: only 2 level allowed\n        if (Array.isArray(item.children) && deep < 1 && showDataSourceChildren) {\n            // handle group\n            item2.label = item.label || item.value || 'Group ' + index;\n            // parse children\n            item2.children = normalizeDataSource(item.children, deep + 1);\n        } else {\n            var _item = item,\n                value = _item.value,\n                label = _item.label,\n                disabled = _item.disabled,\n                title = _item.title,\n                others = _objectWithoutProperties(_item, ['value', 'label', 'disabled', 'title']);\n            // undefined 认为是没传取 index 值替代\n\n\n            item2.value = typeof value !== 'undefined' ? value : '' + index;\n            item2.label = label || '' + item2.value;\n            if ('title' in item) {\n                item2.title = title;\n            }\n            disabled === true && (item2.disabled = true);\n\n            _extends(item2, others);\n        }\n\n        source.push(item2);\n    });\n\n    return source;\n}\n\n/**\n * Get flatten dataSource\n * @static\n * @param  {Array} dataSource structured dataSource\n * @return {Array}\n */\nexport function flattingDataSource(dataSource) {\n    var source = [];\n\n    dataSource.forEach(function (item) {\n        if (Array.isArray(item.children)) {\n            source.push.apply(source, flattingDataSource(item.children));\n        } else {\n            source.push(item);\n        }\n    });\n\n    return source;\n}\n\nexport function filterDataSource(dataSource, key, filter, addonKey) {\n    if (!Array.isArray(dataSource)) {\n        return [];\n    }\n    if (typeof key === 'undefined' || key === null) {\n        return [].concat(dataSource);\n    }\n\n    var addKey = true;\n    var menuDataSource = loopMap(dataSource, function (option) {\n        if (key === '' + option.value) {\n            addKey = false;\n        }\n        return filter(key, option) && !option.__isAddon && option;\n    });\n\n    // if key not in menuDataSource, add key to dataSource\n    if (addonKey && key && addKey) {\n        menuDataSource.unshift({\n            value: key,\n            label: key,\n            __isAddon: true\n        });\n    }\n\n    return menuDataSource;\n}\n\nfunction getKeyItemByValue(value, valueMap) {\n    var item = void 0;\n\n    if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n        if (value.hasOwnProperty('value')) {\n            item = value;\n        } else {\n            item = _extends({\n                value: ''\n            }, value);\n        }\n    } else {\n        item = valueMap['' + value] || {\n            value: value,\n            label: value\n        };\n    }\n\n    return item;\n}\n\n/**\n * compute valueDataSource by new value\n * @param {Array/String} value 数据\n * @param {Object} mapValueDS   上个value的缓存数据 value => {value,label} 的映射关系表\n * @param {*} mapMenuDS  通过 dataSource 建立 value => {value,label} 的映射关系表\n * @returns {Object} value: [value]; valueDS: [{value,label}]; mapValueDS: {value: {value,label}}\n */\nexport function getValueDataSource(value, mapValueDS, mapMenuDS) {\n    if (isNull(value)) {\n        return {};\n    }\n\n    var newValue = [];\n    var newValueDS = [];\n    var newMapValueDS = {};\n    var _newMapDS = _extends({}, mapValueDS, mapMenuDS);\n\n    if (Array.isArray(value)) {\n        value.forEach(function (v) {\n            var item = getKeyItemByValue(v, _newMapDS);\n\n            newValueDS.push(item);\n            newMapValueDS['' + item.value] = item;\n            newValue.push(item.value);\n        });\n\n        return {\n            value: newValue, // [value]\n            valueDS: newValueDS, // [{value,label}]\n            mapValueDS: newMapValueDS // {value: {value,label}}\n        };\n    } else {\n        var _mapValueDS;\n\n        var item = getKeyItemByValue(value, _newMapDS);\n\n        return {\n            value: item.value,\n            valueDS: item,\n            mapValueDS: (_mapValueDS = {}, _mapValueDS['' + item.value] = item, _mapValueDS)\n        };\n    }\n}\n\n/**\n * Get flatten dataSource\n * @static\n * @param  {any} value structured dataSource\n * @return {String}\n */\nexport function valueToSelectKey(value) {\n    var val = void 0;\n    if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value.hasOwnProperty('value')) {\n        val = value.value;\n    } else {\n        val = value;\n    }\n    return '' + val;\n}\n\n/**\n * UP Down 改进双向链表方法\n */\n// function DoubleLinkList(element){\n//     this.prev = null;\n//     this.next = null;\n//     this.element = element;\n// }\n//\n// export function mapDoubleLinkList(dataSource){\n//\n//     const mapDS = {};\n//     let doubleLink = null;\n//\n//     let head = null;\n//     let tail = null;\n//\n//     function  append(element) {\n//         if (!doubleLink) {\n//             doubleLink = new DoubleLinkList(element);\n//             head = doubleLink;\n//             tail = doubleLink;\n//             return doubleLink;\n//         }\n//\n//         const node = new DoubleLinkList(element);\n//         tail.next = node;\n//         node.prev = tail;\n//         tail = node;\n//\n//         return tail;\n//     }\n//\n//     dataSource.forEach((item => {\n//         if (item.disabled) {\n//             return;\n//         }\n//         mapDS[`${item.value}`] = append(item);\n//     }));\n//\n//     return mapDS;\n// }\n//"]},"metadata":{},"sourceType":"module"}