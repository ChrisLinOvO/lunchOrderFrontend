{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getIn = getIn;\nexports.setIn = setIn;\nexports.deleteIn = deleteIn;\nexports.getErrorStrs = getErrorStrs;\nexports.getParams = getParams;\nexports.getValueFromEvent = getValueFromEvent;\nexports.mapValidateRules = mapValidateRules;\nexports.warning = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends3 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nfunction getIn(state, name) {\n  if (!state) {\n    return state;\n  }\n\n  var path = typeof name === 'string' ? name.replace(/\\[/, '.').replace(/\\]/, '').split('.') : '';\n  var length = path.length;\n\n  if (!length) {\n    return undefined;\n  }\n\n  var result = state;\n\n  for (var i = 0; i < length && !!result; ++i) {\n    result = result[path[i]];\n  }\n\n  return result;\n}\n\nvar setInWithPath = function setInWithPath(state, value, path, pathIndex) {\n  if (pathIndex >= path.length) {\n    return value;\n  }\n\n  var first = path[pathIndex];\n  var next = setInWithPath(state && state[first], value, path, pathIndex + 1);\n\n  if (!state) {\n    var initialized = isNaN(first) ? {} : [];\n    initialized[first] = next;\n    return initialized;\n  }\n\n  if (Array.isArray(state)) {\n    var copy = [].concat(state);\n    copy[first] = next;\n    return copy;\n  }\n\n  return (0, _extends3.default)({}, state, (0, _defineProperty2.default)({}, first, next));\n};\n\nfunction setIn(state, name, value) {\n  return setInWithPath(state, value, typeof name === 'string' ? name.replace(/\\[/, '.').replace(/\\]/, '').split('.') : '', 0);\n}\n\nfunction deleteIn(state, name) {\n  if (!state) {\n    return;\n  }\n\n  var path = typeof name === 'string' ? name.replace(/\\[/, '.').replace(/\\]/, '').split('.') : '';\n  var length = path.length;\n\n  if (!length) {\n    return state;\n  }\n\n  var result = state;\n\n  for (var i = 0; i < length && !!result; ++i) {\n    if (i === length - 1) {\n      delete result[path[i]];\n    } else {\n      result = result[path[i]];\n    }\n  }\n\n  return state;\n}\n\nfunction getErrorStrs(errors, processErrorMessage) {\n  if (errors) {\n    return errors.map(function (e) {\n      var message = typeof e.message !== 'undefined' ? e.message : e;\n\n      if (typeof processErrorMessage === 'function') {\n        return processErrorMessage(message);\n      }\n\n      return message;\n    });\n  }\n\n  return errors;\n}\n\nfunction getParams(ns, cb) {\n  var names = typeof ns === 'string' ? [ns] : ns;\n  var callback = cb;\n\n  if (cb === undefined && typeof names === 'function') {\n    callback = names;\n    names = undefined;\n  }\n\n  return {\n    names: names,\n    callback: callback\n  };\n}\n/**\n * 从组件事件中获取数据\n * @param e Event或者value\n * @returns value\n */\n\n\nfunction getValueFromEvent(e) {\n  // support custom element\n  if (!e || !e.target) {\n    return e;\n  }\n\n  var target = e.target;\n\n  if (target.type === 'checkbox') {\n    return target.checked;\n  } else if (target.type === 'radio') {\n    //兼容原生radioGroup\n    if (target.value) {\n      return target.value;\n    } else {\n      return target.checked;\n    }\n  }\n\n  return target.value;\n}\n\nfunction validateMap(rulesMap, rule, defaultTrigger) {\n  var nrule = (0, _extends3.default)({}, rule);\n\n  if (!nrule.trigger) {\n    nrule.trigger = [defaultTrigger];\n  }\n\n  if (typeof nrule.trigger === 'string') {\n    nrule.trigger = [nrule.trigger];\n  }\n\n  for (var i = 0; i < nrule.trigger.length; i++) {\n    var trigger = nrule.trigger[i];\n\n    if (trigger in rulesMap) {\n      rulesMap[trigger].push(nrule);\n    } else {\n      rulesMap[trigger] = [nrule];\n    }\n  }\n\n  delete nrule.trigger;\n}\n/**\n * 提取rule里面的trigger并且做映射\n * @param  {Array} rules   规则\n * @param  {String} defaultTrigger 默认触发\n * @return {Object} {onChange:rule1, onBlur: rule2}\n */\n\n\nfunction mapValidateRules(rules, defaultTrigger) {\n  var rulesMap = {};\n  rules.forEach(function (rule) {\n    validateMap(rulesMap, rule, defaultTrigger);\n  });\n  return rulesMap;\n}\n\nvar warn = function warn() {};\n\nif (typeof process !== 'undefined' && process.env && process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && typeof document !== 'undefined') {\n  warn = function warn() {\n    /* eslint-disable no-console */\n    if (typeof console !== 'undefined' && console.error) {\n      var _console;\n\n      (_console = console).error.apply(_console, arguments);\n    }\n  };\n}\n\nvar warning = warn;\nexports.warning = warning;","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/field/lib/utils.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","getIn","setIn","deleteIn","getErrorStrs","getParams","getValueFromEvent","mapValidateRules","warning","_defineProperty2","_extends3","state","name","path","replace","split","length","undefined","result","i","setInWithPath","pathIndex","first","next","initialized","isNaN","Array","isArray","copy","concat","default","errors","processErrorMessage","map","e","message","ns","cb","names","callback","target","type","checked","validateMap","rulesMap","rule","defaultTrigger","nrule","trigger","push","rules","forEach","warn","process","env","NODE_ENV","window","document","console","error","_console","apply","arguments"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getIn = getIn;\nexports.setIn = setIn;\nexports.deleteIn = deleteIn;\nexports.getErrorStrs = getErrorStrs;\nexports.getParams = getParams;\nexports.getValueFromEvent = getValueFromEvent;\nexports.mapValidateRules = mapValidateRules;\nexports.warning = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends3 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nfunction getIn(state, name) {\n  if (!state) {\n    return state;\n  }\n\n  var path = typeof name === 'string' ? name.replace(/\\[/, '.').replace(/\\]/, '').split('.') : '';\n  var length = path.length;\n\n  if (!length) {\n    return undefined;\n  }\n\n  var result = state;\n\n  for (var i = 0; i < length && !!result; ++i) {\n    result = result[path[i]];\n  }\n\n  return result;\n}\n\nvar setInWithPath = function setInWithPath(state, value, path, pathIndex) {\n  if (pathIndex >= path.length) {\n    return value;\n  }\n\n  var first = path[pathIndex];\n  var next = setInWithPath(state && state[first], value, path, pathIndex + 1);\n\n  if (!state) {\n    var initialized = isNaN(first) ? {} : [];\n    initialized[first] = next;\n    return initialized;\n  }\n\n  if (Array.isArray(state)) {\n    var copy = [].concat(state);\n    copy[first] = next;\n    return copy;\n  }\n\n  return (0, _extends3.default)({}, state, (0, _defineProperty2.default)({}, first, next));\n};\n\nfunction setIn(state, name, value) {\n  return setInWithPath(state, value, typeof name === 'string' ? name.replace(/\\[/, '.').replace(/\\]/, '').split('.') : '', 0);\n}\n\nfunction deleteIn(state, name) {\n  if (!state) {\n    return;\n  }\n\n  var path = typeof name === 'string' ? name.replace(/\\[/, '.').replace(/\\]/, '').split('.') : '';\n  var length = path.length;\n\n  if (!length) {\n    return state;\n  }\n\n  var result = state;\n\n  for (var i = 0; i < length && !!result; ++i) {\n    if (i === length - 1) {\n      delete result[path[i]];\n    } else {\n      result = result[path[i]];\n    }\n  }\n\n  return state;\n}\n\nfunction getErrorStrs(errors, processErrorMessage) {\n  if (errors) {\n    return errors.map(function (e) {\n      var message = typeof e.message !== 'undefined' ? e.message : e;\n\n      if (typeof processErrorMessage === 'function') {\n        return processErrorMessage(message);\n      }\n\n      return message;\n    });\n  }\n\n  return errors;\n}\n\nfunction getParams(ns, cb) {\n  var names = typeof ns === 'string' ? [ns] : ns;\n  var callback = cb;\n\n  if (cb === undefined && typeof names === 'function') {\n    callback = names;\n    names = undefined;\n  }\n\n  return {\n    names: names,\n    callback: callback\n  };\n}\n/**\n * 从组件事件中获取数据\n * @param e Event或者value\n * @returns value\n */\n\n\nfunction getValueFromEvent(e) {\n  // support custom element\n  if (!e || !e.target) {\n    return e;\n  }\n\n  var target = e.target;\n\n  if (target.type === 'checkbox') {\n    return target.checked;\n  } else if (target.type === 'radio') {\n    //兼容原生radioGroup\n    if (target.value) {\n      return target.value;\n    } else {\n      return target.checked;\n    }\n  }\n\n  return target.value;\n}\n\nfunction validateMap(rulesMap, rule, defaultTrigger) {\n  var nrule = (0, _extends3.default)({}, rule);\n\n  if (!nrule.trigger) {\n    nrule.trigger = [defaultTrigger];\n  }\n\n  if (typeof nrule.trigger === 'string') {\n    nrule.trigger = [nrule.trigger];\n  }\n\n  for (var i = 0; i < nrule.trigger.length; i++) {\n    var trigger = nrule.trigger[i];\n\n    if (trigger in rulesMap) {\n      rulesMap[trigger].push(nrule);\n    } else {\n      rulesMap[trigger] = [nrule];\n    }\n  }\n\n  delete nrule.trigger;\n}\n/**\n * 提取rule里面的trigger并且做映射\n * @param  {Array} rules   规则\n * @param  {String} defaultTrigger 默认触发\n * @return {Object} {onChange:rule1, onBlur: rule2}\n */\n\n\nfunction mapValidateRules(rules, defaultTrigger) {\n  var rulesMap = {};\n  rules.forEach(function (rule) {\n    validateMap(rulesMap, rule, defaultTrigger);\n  });\n  return rulesMap;\n}\n\nvar warn = function warn() {};\n\nif (typeof process !== 'undefined' && process.env && process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && typeof document !== 'undefined') {\n  warn = function warn() {\n    /* eslint-disable no-console */\n    if (typeof console !== 'undefined' && console.error) {\n      var _console;\n\n      (_console = console).error.apply(_console, arguments);\n    }\n  };\n}\n\nvar warning = warn;\nexports.warning = warning;"]},"metadata":{},"sourceType":"script"}