{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport classnames from 'classnames';\nvar blackList = ['defaultProps', 'propTypes', 'contextTypes', 'childContextTypes', 'displayName', 'getDerivedStateFromProps'];\nexport var statics = function statics(Target, Component) {\n  Object.keys(Component).forEach(function (property) {\n    if (blackList.indexOf(property) === -1) {\n      Target[property] = Component[property];\n    }\n  });\n};\nexport var fetchDataByPath = function fetchDataByPath(object, path) {\n  if (!object || !path) {\n    return false;\n  }\n\n  path = path.toString();\n  var field = path.split('.');\n  var val = void 0,\n      key = void 0;\n\n  if (field.length) {\n    key = field[0]; // lists[1].name\n\n    if (key.indexOf('[') >= 0) {\n      key = key.match(/(.*)\\[(.*)\\]/);\n\n      if (key && _typeof(key[1]) === 'object' && _typeof(object[key[1]]) === 'object') {\n        val = object[key[1]][key[2]];\n      }\n    } else {\n      val = object[field[0]];\n    }\n\n    if (val) {\n      for (var colIndex = 1; colIndex < field.length; colIndex++) {\n        val = val[field[colIndex]];\n\n        if (typeof val === 'undefined') {\n          break;\n        }\n      }\n    }\n  }\n\n  return val;\n};\n/**\n * @param {Array} lockChildren\n * @param {String} dir 'left', 'right'\n */\n\nexport var setStickyStyle = function setStickyStyle(lockChildren, flatenChildren, dir) {\n  var offsetArr = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  var prefix = arguments[4];\n  var len = flatenChildren.length;\n  flatenChildren.forEach(function (col, index) {\n    var _classnames;\n\n    var isLeftLast = dir === 'left' && index === len - 1;\n    var isRightFirst = dir === 'right' && index === 0;\n    var style = {\n      position: 'sticky'\n    };\n    var offset = offsetArr[index];\n\n    if (offset > -1) {\n      style[dir] = offset;\n    }\n\n    col.className = classnames(col.className, (_classnames = {}, _classnames[prefix + 'table-fix-' + dir] = true, _classnames[prefix + 'table-fix-left-last'] = isLeftLast, _classnames[prefix + 'table-fix-right-first'] = isRightFirst, _classnames));\n    col.style = _extends({}, col.style, style);\n    col.cellStyle = style;\n  });\n\n  var setOffset = function setOffset(col, index, dir, isBorder) {\n    var _classnames2;\n\n    var style = {\n      position: 'sticky'\n    };\n    var offset = offsetArr[index];\n\n    if (offset > -1) {\n      style[dir] = offset;\n    }\n\n    col.className = classnames(col.className, (_classnames2 = {}, _classnames2[prefix + 'table-fix-' + dir] = true, _classnames2[prefix + 'table-fix-left-last'] = dir === 'left' && isBorder, _classnames2[prefix + 'table-fix-right-first'] = dir === 'right' && isBorder, _classnames2));\n    col.style = _extends({}, col.style, style);\n    col.cellStyle = style;\n  }; // 查看当前元素的叶子结点数量\n\n\n  var getLeafNodes = function getLeafNodes(node) {\n    var nodesLen = 0;\n    var arrLen = Array.isArray(node && node.children) && node.children.length || 0;\n\n    if (arrLen > 0) {\n      nodesLen = node.children.reduce(function (ret, item, idx) {\n        return ret + getLeafNodes(item.children);\n      }, 0);\n    } else {\n      nodesLen = 1;\n    }\n\n    return nodesLen;\n  };\n\n  var getPreNodes = function getPreNodes(arr, idx) {\n    return arr.reduce(function (ret, item, i) {\n      if (i < idx) {\n        return ret + getLeafNodes(item);\n      }\n\n      return ret;\n    }, 0);\n  }; // for multiple header\n  // nodesLen 前序叶子结点数\n\n\n  var loop = function loop(arr, i) {\n    dir === 'right' && arr.reverse();\n    arr.forEach(function (child, j) {\n      var p = dir === 'right' ? i - getPreNodes(arr, j) : i + getPreNodes(arr, j);\n\n      if (child.children) {\n        // 合并单元格的节点\n        loop(child.children, p); // 查询当前元素下的 前序叶子结点数 比如为n\n        // const isBorder = (dir === 'right' && j === 0) || (dir === 'left' && j === (arr.length - 1));\n\n        setOffset(child, p, dir, j === arr.length - 1);\n      }\n    });\n    dir === 'right' && arr.reverse();\n  };\n\n  loop(lockChildren, dir === 'left' ? 0 : len - 1);\n};","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/table/util.js"],"names":["_extends","_typeof","classnames","blackList","statics","Target","Component","Object","keys","forEach","property","indexOf","fetchDataByPath","object","path","toString","field","split","val","key","length","match","colIndex","setStickyStyle","lockChildren","flatenChildren","dir","offsetArr","arguments","undefined","prefix","len","col","index","_classnames","isLeftLast","isRightFirst","style","position","offset","className","cellStyle","setOffset","isBorder","_classnames2","getLeafNodes","node","nodesLen","arrLen","Array","isArray","children","reduce","ret","item","idx","getPreNodes","arr","i","loop","reverse","child","j","p"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport classnames from 'classnames';\n\nvar blackList = ['defaultProps', 'propTypes', 'contextTypes', 'childContextTypes', 'displayName', 'getDerivedStateFromProps'];\n\nexport var statics = function statics(Target, Component) {\n    Object.keys(Component).forEach(function (property) {\n        if (blackList.indexOf(property) === -1) {\n            Target[property] = Component[property];\n        }\n    });\n};\n\nexport var fetchDataByPath = function fetchDataByPath(object, path) {\n    if (!object || !path) {\n        return false;\n    }\n    path = path.toString();\n    var field = path.split('.');\n    var val = void 0,\n        key = void 0;\n    if (field.length) {\n        key = field[0];\n        // lists[1].name\n        if (key.indexOf('[') >= 0) {\n            key = key.match(/(.*)\\[(.*)\\]/);\n            if (key && _typeof(key[1]) === 'object' && _typeof(object[key[1]]) === 'object') {\n                val = object[key[1]][key[2]];\n            }\n        } else {\n            val = object[field[0]];\n        }\n        if (val) {\n            for (var colIndex = 1; colIndex < field.length; colIndex++) {\n                val = val[field[colIndex]];\n                if (typeof val === 'undefined') {\n                    break;\n                }\n            }\n        }\n    }\n    return val;\n};\n\n/**\n * @param {Array} lockChildren\n * @param {String} dir 'left', 'right'\n */\nexport var setStickyStyle = function setStickyStyle(lockChildren, flatenChildren, dir) {\n    var offsetArr = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    var prefix = arguments[4];\n\n    var len = flatenChildren.length;\n\n    flatenChildren.forEach(function (col, index) {\n        var _classnames;\n\n        var isLeftLast = dir === 'left' && index === len - 1;\n        var isRightFirst = dir === 'right' && index === 0;\n        var style = {\n            position: 'sticky'\n        };\n        var offset = offsetArr[index];\n\n        if (offset > -1) {\n            style[dir] = offset;\n        }\n\n        col.className = classnames(col.className, (_classnames = {}, _classnames[prefix + 'table-fix-' + dir] = true, _classnames[prefix + 'table-fix-left-last'] = isLeftLast, _classnames[prefix + 'table-fix-right-first'] = isRightFirst, _classnames));\n        col.style = _extends({}, col.style, style);\n        col.cellStyle = style;\n    });\n\n    var setOffset = function setOffset(col, index, dir, isBorder) {\n        var _classnames2;\n\n        var style = {\n            position: 'sticky'\n        };\n        var offset = offsetArr[index];\n\n        if (offset > -1) {\n            style[dir] = offset;\n        }\n\n        col.className = classnames(col.className, (_classnames2 = {}, _classnames2[prefix + 'table-fix-' + dir] = true, _classnames2[prefix + 'table-fix-left-last'] = dir === 'left' && isBorder, _classnames2[prefix + 'table-fix-right-first'] = dir === 'right' && isBorder, _classnames2));\n        col.style = _extends({}, col.style, style);\n        col.cellStyle = style;\n    };\n\n    // 查看当前元素的叶子结点数量\n    var getLeafNodes = function getLeafNodes(node) {\n        var nodesLen = 0;\n        var arrLen = Array.isArray(node && node.children) && node.children.length || 0;\n        if (arrLen > 0) {\n            nodesLen = node.children.reduce(function (ret, item, idx) {\n                return ret + getLeafNodes(item.children);\n            }, 0);\n        } else {\n            nodesLen = 1;\n        }\n        return nodesLen;\n    };\n\n    var getPreNodes = function getPreNodes(arr, idx) {\n        return arr.reduce(function (ret, item, i) {\n            if (i < idx) {\n                return ret + getLeafNodes(item);\n            }\n            return ret;\n        }, 0);\n    };\n\n    // for multiple header\n    // nodesLen 前序叶子结点数\n    var loop = function loop(arr, i) {\n        dir === 'right' && arr.reverse();\n        arr.forEach(function (child, j) {\n            var p = dir === 'right' ? i - getPreNodes(arr, j) : i + getPreNodes(arr, j);\n            if (child.children) {\n                // 合并单元格的节点\n                loop(child.children, p);\n                // 查询当前元素下的 前序叶子结点数 比如为n\n                // const isBorder = (dir === 'right' && j === 0) || (dir === 'left' && j === (arr.length - 1));\n                setOffset(child, p, dir, j === arr.length - 1);\n            }\n        });\n        dir === 'right' && arr.reverse();\n    };\n\n    loop(lockChildren, dir === 'left' ? 0 : len - 1);\n};"]},"metadata":{},"sourceType":"module"}