{"ast":null,"code":"import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport hoistNonReactStatic from 'hoist-non-react-statics';\nimport { obj, log } from '../util';\nimport getContextProps from './get-context-props';\nimport ErrorBoundary from './error-boundary';\nvar shallowEqual = obj.shallowEqual;\n\nfunction getDisplayName(Component) {\n  return Component.displayName || Component.name || 'Component';\n}\n\nvar globalLocales = void 0;\nvar currentGlobalLanguage = 'zh-cn';\nvar currentGlobalLocale = {};\nvar currentGlobalRtl = void 0;\nexport function initLocales(locales) {\n  globalLocales = locales;\n\n  if (locales) {\n    currentGlobalLocale = locales[currentGlobalLanguage];\n\n    if (typeof currentGlobalRtl !== 'boolean') {\n      currentGlobalRtl = currentGlobalLocale && currentGlobalLocale.rtl;\n    }\n  }\n}\nexport function setLanguage(language) {\n  if (globalLocales) {\n    currentGlobalLanguage = language;\n    currentGlobalLocale = globalLocales[language];\n\n    if (typeof currentGlobalRtl !== 'boolean') {\n      currentGlobalRtl = currentGlobalLocale && currentGlobalLocale.rtl;\n    }\n  }\n}\nexport function setLocale(locale) {\n  currentGlobalLocale = _extends({}, globalLocales ? globalLocales[currentGlobalLanguage] : {}, locale);\n\n  if (typeof currentGlobalRtl !== 'boolean') {\n    currentGlobalRtl = currentGlobalLocale && currentGlobalLocale.rtl;\n  }\n}\nexport function setDirection(dir) {\n  currentGlobalRtl = dir === 'rtl';\n}\nexport function getLocale() {\n  return currentGlobalLocale;\n}\nexport function getLanguage() {\n  return currentGlobalLanguage;\n}\nexport function getDirection() {\n  return currentGlobalRtl;\n}\nexport function config(Component) {\n  var _class, _temp;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}; // 非 forwardRef 创建的 class component\n\n  if (obj.isClassComponent(Component) && Component.prototype.shouldComponentUpdate === undefined) {\n    // class component: 通过定义 shouldComponentUpdate 改写成 pure component, 有refs\n    Component.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n      if (this.props.pure) {\n        return !shallowEqual(this.props, nextProps) || !shallowEqual(this.state, nextState);\n      }\n\n      return true;\n    };\n  }\n\n  var ConfigedComponent = (_temp = _class = function (_React$Component) {\n    _inherits(ConfigedComponent, _React$Component);\n\n    function ConfigedComponent(props, context) {\n      _classCallCheck(this, ConfigedComponent);\n\n      var _this = _possibleConstructorReturn(this, _React$Component.call(this, props, context));\n\n      _this._getInstance = _this._getInstance.bind(_this);\n      _this._deprecated = _this._deprecated.bind(_this);\n      return _this;\n    }\n\n    ConfigedComponent.prototype._getInstance = function _getInstance(ref) {\n      var _this2 = this;\n\n      this._instance = ref;\n\n      if (this._instance && options.exportNames) {\n        options.exportNames.forEach(function (name) {\n          var field = _this2._instance[name];\n\n          if (typeof field === 'function') {\n            _this2[name] = field.bind(_this2._instance);\n          } else {\n            _this2[name] = field;\n          }\n        });\n      }\n    };\n\n    ConfigedComponent.prototype._deprecated = function _deprecated() {\n      if (this.context.nextWarning !== false) {\n        log.deprecated.apply(log, arguments);\n      }\n    };\n\n    ConfigedComponent.prototype.getInstance = function getInstance() {\n      return this._instance;\n    };\n\n    ConfigedComponent.prototype.render = function render() {\n      var _props = this.props,\n          prefix = _props.prefix,\n          locale = _props.locale,\n          defaultPropsConfig = _props.defaultPropsConfig,\n          pure = _props.pure,\n          rtl = _props.rtl,\n          device = _props.device,\n          popupContainer = _props.popupContainer,\n          errorBoundary = _props.errorBoundary,\n          others = _objectWithoutProperties(_props, ['prefix', 'locale', 'defaultPropsConfig', 'pure', 'rtl', 'device', 'popupContainer', 'errorBoundary']);\n\n      var _context = this.context,\n          nextPrefix = _context.nextPrefix,\n          _context$nextLocale = _context.nextLocale,\n          nextLocale = _context$nextLocale === undefined ? {} : _context$nextLocale,\n          _context$nextDefaultP = _context.nextDefaultPropsConfig,\n          nextDefaultPropsConfig = _context$nextDefaultP === undefined ? {} : _context$nextDefaultP,\n          nextPure = _context.nextPure,\n          nextRtl = _context.nextRtl,\n          nextDevice = _context.nextDevice,\n          nextPopupContainer = _context.nextPopupContainer,\n          nextErrorBoundary = _context.nextErrorBoundary;\n      var displayName = options.componentName || getDisplayName(Component);\n      var contextProps = getContextProps({\n        prefix: prefix,\n        locale: locale,\n        defaultPropsConfig: defaultPropsConfig,\n        pure: pure,\n        device: device,\n        popupContainer: popupContainer,\n        rtl: rtl,\n        errorBoundary: errorBoundary\n      }, {\n        nextPrefix: nextPrefix,\n        nextLocale: _extends({}, currentGlobalLocale, nextLocale),\n        nextDefaultPropsConfig: nextDefaultPropsConfig,\n        nextPure: nextPure,\n        nextDevice: nextDevice,\n        nextPopupContainer: nextPopupContainer,\n        nextRtl: typeof nextRtl === 'boolean' ? nextRtl : currentGlobalRtl === true ? true : undefined,\n        nextErrorBoundary: nextErrorBoundary\n      }, displayName); // errorBoundary is only for <ErrorBoundary>\n\n      var newContextProps = ['prefix', 'locale', 'pure', 'rtl', 'device', 'popupContainer'].reduce(function (ret, name) {\n        if (typeof contextProps[name] !== 'undefined') {\n          ret[name] = contextProps[name];\n        }\n\n        return ret;\n      }, {});\n\n      if ('pure' in newContextProps && newContextProps.pure) {\n        log.warning('pure of ConfigProvider is deprecated, use Function Component or React.PureComponent');\n      } // 对于两个真正消费 popupContainer 的组件来说，正确的名字是 container,\n\n\n      if ('popupContainer' in newContextProps && !('container' in this.props) && ['Overlay', 'Popup'].indexOf(displayName) > -1) {\n        newContextProps.container = newContextProps.popupContainer;\n        delete newContextProps.popupContainer;\n      }\n\n      var newOthers = options.transform ? options.transform(others, this._deprecated) : others;\n      var content = React.createElement(Component, _extends({}, contextProps.defaultPropsConfig[displayName], newOthers, newContextProps, {\n        ref: obj.isClassComponent(Component) ? this._getInstance : null\n      }));\n\n      var _contextProps$errorBo = contextProps.errorBoundary,\n          open = _contextProps$errorBo.open,\n          othersBoundary = _objectWithoutProperties(_contextProps$errorBo, ['open']);\n\n      return open ? React.createElement(ErrorBoundary, othersBoundary, content) : content;\n    };\n\n    return ConfigedComponent;\n  }(React.Component), _class.propTypes = _extends({}, Component.propTypes || {}, {\n    prefix: PropTypes.string,\n    locale: PropTypes.object,\n    defaultPropsConfig: PropTypes.object,\n    pure: PropTypes.bool,\n    rtl: PropTypes.bool,\n    device: PropTypes.oneOf(['tablet', 'desktop', 'phone']),\n    popupContainer: PropTypes.any,\n    errorBoundary: PropTypes.oneOfType([PropTypes.bool, PropTypes.object])\n  }), _class.contextTypes = _extends({}, Component.contextTypes || {}, {\n    nextPrefix: PropTypes.string,\n    nextLocale: PropTypes.object,\n    nextDefaultPropsConfig: PropTypes.object,\n    nextPure: PropTypes.bool,\n    nextRtl: PropTypes.bool,\n    nextWarning: PropTypes.bool,\n    nextDevice: PropTypes.oneOf(['tablet', 'desktop', 'phone']),\n    nextPopupContainer: PropTypes.any,\n    nextErrorBoundary: PropTypes.oneOfType([PropTypes.bool, PropTypes.object])\n  }), _temp);\n  ConfigedComponent.displayName = 'ConfigedComponent';\n  ConfigedComponent.displayName = 'Config(' + getDisplayName(Component) + ')';\n  hoistNonReactStatic(ConfigedComponent, Component);\n  return ConfigedComponent;\n}","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/config-provider/config.js"],"names":["_objectWithoutProperties","_classCallCheck","_possibleConstructorReturn","_inherits","_extends","React","PropTypes","hoistNonReactStatic","obj","log","getContextProps","ErrorBoundary","shallowEqual","getDisplayName","Component","displayName","name","globalLocales","currentGlobalLanguage","currentGlobalLocale","currentGlobalRtl","initLocales","locales","rtl","setLanguage","language","setLocale","locale","setDirection","dir","getLocale","getLanguage","getDirection","config","_class","_temp","options","arguments","length","undefined","isClassComponent","prototype","shouldComponentUpdate","nextProps","nextState","props","pure","state","ConfigedComponent","_React$Component","context","_this","call","_getInstance","bind","_deprecated","ref","_this2","_instance","exportNames","forEach","field","nextWarning","deprecated","apply","getInstance","render","_props","prefix","defaultPropsConfig","device","popupContainer","errorBoundary","others","_context","nextPrefix","_context$nextLocale","nextLocale","_context$nextDefaultP","nextDefaultPropsConfig","nextPure","nextRtl","nextDevice","nextPopupContainer","nextErrorBoundary","componentName","contextProps","newContextProps","reduce","ret","warning","indexOf","container","newOthers","transform","content","createElement","_contextProps$errorBo","open","othersBoundary","propTypes","string","object","bool","oneOf","any","oneOfType","contextTypes"],"mappings":"AAAA,OAAOA,wBAAP,MAAqC,+CAArC;AACA,OAAOC,eAAP,MAA4B,sCAA5B;AACA,OAAOC,0BAAP,MAAuC,iDAAvC;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,mBAAP,MAAgC,yBAAhC;AACA,SAASC,GAAT,EAAcC,GAAd,QAAyB,SAAzB;AACA,OAAOC,eAAP,MAA4B,qBAA5B;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AAEA,IAAIC,YAAY,GAAGJ,GAAG,CAACI,YAAvB;;AAGA,SAASC,cAAT,CAAwBC,SAAxB,EAAmC;AAC/B,SAAOA,SAAS,CAACC,WAAV,IAAyBD,SAAS,CAACE,IAAnC,IAA2C,WAAlD;AACH;;AAED,IAAIC,aAAa,GAAG,KAAK,CAAzB;AACA,IAAIC,qBAAqB,GAAG,OAA5B;AACA,IAAIC,mBAAmB,GAAG,EAA1B;AACA,IAAIC,gBAAgB,GAAG,KAAK,CAA5B;AAEA,OAAO,SAASC,WAAT,CAAqBC,OAArB,EAA8B;AACjCL,EAAAA,aAAa,GAAGK,OAAhB;;AAEA,MAAIA,OAAJ,EAAa;AACTH,IAAAA,mBAAmB,GAAGG,OAAO,CAACJ,qBAAD,CAA7B;;AAEA,QAAI,OAAOE,gBAAP,KAA4B,SAAhC,EAA2C;AACvCA,MAAAA,gBAAgB,GAAGD,mBAAmB,IAAIA,mBAAmB,CAACI,GAA9D;AACH;AACJ;AACJ;AAED,OAAO,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AAClC,MAAIR,aAAJ,EAAmB;AACfC,IAAAA,qBAAqB,GAAGO,QAAxB;AACAN,IAAAA,mBAAmB,GAAGF,aAAa,CAACQ,QAAD,CAAnC;;AAEA,QAAI,OAAOL,gBAAP,KAA4B,SAAhC,EAA2C;AACvCA,MAAAA,gBAAgB,GAAGD,mBAAmB,IAAIA,mBAAmB,CAACI,GAA9D;AACH;AACJ;AACJ;AAED,OAAO,SAASG,SAAT,CAAmBC,MAAnB,EAA2B;AAC9BR,EAAAA,mBAAmB,GAAGf,QAAQ,CAAC,EAAD,EAAKa,aAAa,GAAGA,aAAa,CAACC,qBAAD,CAAhB,GAA0C,EAA5D,EAAgES,MAAhE,CAA9B;;AAEA,MAAI,OAAOP,gBAAP,KAA4B,SAAhC,EAA2C;AACvCA,IAAAA,gBAAgB,GAAGD,mBAAmB,IAAIA,mBAAmB,CAACI,GAA9D;AACH;AACJ;AAED,OAAO,SAASK,YAAT,CAAsBC,GAAtB,EAA2B;AAC9BT,EAAAA,gBAAgB,GAAGS,GAAG,KAAK,KAA3B;AACH;AAED,OAAO,SAASC,SAAT,GAAqB;AACxB,SAAOX,mBAAP;AACH;AAED,OAAO,SAASY,WAAT,GAAuB;AAC1B,SAAOb,qBAAP;AACH;AAED,OAAO,SAASc,YAAT,GAAwB;AAC3B,SAAOZ,gBAAP;AACH;AAED,OAAO,SAASa,MAAT,CAAgBnB,SAAhB,EAA2B;AAC9B,MAAIoB,MAAJ,EAAYC,KAAZ;;AAEA,MAAIC,OAAO,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAlF,CAH8B,CAK9B;;AACA,MAAI7B,GAAG,CAACgC,gBAAJ,CAAqB1B,SAArB,KAAmCA,SAAS,CAAC2B,SAAV,CAAoBC,qBAApB,KAA8CH,SAArF,EAAgG;AAC5F;AACAzB,IAAAA,SAAS,CAAC2B,SAAV,CAAoBC,qBAApB,GAA4C,SAASA,qBAAT,CAA+BC,SAA/B,EAA0CC,SAA1C,EAAqD;AAC7F,UAAI,KAAKC,KAAL,CAAWC,IAAf,EAAqB;AACjB,eAAO,CAAClC,YAAY,CAAC,KAAKiC,KAAN,EAAaF,SAAb,CAAb,IAAwC,CAAC/B,YAAY,CAAC,KAAKmC,KAAN,EAAaH,SAAb,CAA5D;AACH;;AAED,aAAO,IAAP;AACH,KAND;AAOH;;AAED,MAAII,iBAAiB,IAAIb,KAAK,GAAGD,MAAM,GAAG,UAAUe,gBAAV,EAA4B;AAClE9C,IAAAA,SAAS,CAAC6C,iBAAD,EAAoBC,gBAApB,CAAT;;AAEA,aAASD,iBAAT,CAA2BH,KAA3B,EAAkCK,OAAlC,EAA2C;AACvCjD,MAAAA,eAAe,CAAC,IAAD,EAAO+C,iBAAP,CAAf;;AAEA,UAAIG,KAAK,GAAGjD,0BAA0B,CAAC,IAAD,EAAO+C,gBAAgB,CAACG,IAAjB,CAAsB,IAAtB,EAA4BP,KAA5B,EAAmCK,OAAnC,CAAP,CAAtC;;AAEAC,MAAAA,KAAK,CAACE,YAAN,GAAqBF,KAAK,CAACE,YAAN,CAAmBC,IAAnB,CAAwBH,KAAxB,CAArB;AACAA,MAAAA,KAAK,CAACI,WAAN,GAAoBJ,KAAK,CAACI,WAAN,CAAkBD,IAAlB,CAAuBH,KAAvB,CAApB;AACA,aAAOA,KAAP;AACH;;AAEDH,IAAAA,iBAAiB,CAACP,SAAlB,CAA4BY,YAA5B,GAA2C,SAASA,YAAT,CAAsBG,GAAtB,EAA2B;AAClE,UAAIC,MAAM,GAAG,IAAb;;AAEA,WAAKC,SAAL,GAAiBF,GAAjB;;AAEA,UAAI,KAAKE,SAAL,IAAkBtB,OAAO,CAACuB,WAA9B,EAA2C;AACvCvB,QAAAA,OAAO,CAACuB,WAAR,CAAoBC,OAApB,CAA4B,UAAU5C,IAAV,EAAgB;AACxC,cAAI6C,KAAK,GAAGJ,MAAM,CAACC,SAAP,CAAiB1C,IAAjB,CAAZ;;AACA,cAAI,OAAO6C,KAAP,KAAiB,UAArB,EAAiC;AAC7BJ,YAAAA,MAAM,CAACzC,IAAD,CAAN,GAAe6C,KAAK,CAACP,IAAN,CAAWG,MAAM,CAACC,SAAlB,CAAf;AACH,WAFD,MAEO;AACHD,YAAAA,MAAM,CAACzC,IAAD,CAAN,GAAe6C,KAAf;AACH;AACJ,SAPD;AAQH;AACJ,KAfD;;AAiBAb,IAAAA,iBAAiB,CAACP,SAAlB,CAA4Bc,WAA5B,GAA0C,SAASA,WAAT,GAAuB;AAC7D,UAAI,KAAKL,OAAL,CAAaY,WAAb,KAA6B,KAAjC,EAAwC;AACpCrD,QAAAA,GAAG,CAACsD,UAAJ,CAAeC,KAAf,CAAqBvD,GAArB,EAA0B4B,SAA1B;AACH;AACJ,KAJD;;AAMAW,IAAAA,iBAAiB,CAACP,SAAlB,CAA4BwB,WAA5B,GAA0C,SAASA,WAAT,GAAuB;AAC7D,aAAO,KAAKP,SAAZ;AACH,KAFD;;AAIAV,IAAAA,iBAAiB,CAACP,SAAlB,CAA4ByB,MAA5B,GAAqC,SAASA,MAAT,GAAkB;AACnD,UAAIC,MAAM,GAAG,KAAKtB,KAAlB;AAAA,UACIuB,MAAM,GAAGD,MAAM,CAACC,MADpB;AAAA,UAEIzC,MAAM,GAAGwC,MAAM,CAACxC,MAFpB;AAAA,UAGI0C,kBAAkB,GAAGF,MAAM,CAACE,kBAHhC;AAAA,UAIIvB,IAAI,GAAGqB,MAAM,CAACrB,IAJlB;AAAA,UAKIvB,GAAG,GAAG4C,MAAM,CAAC5C,GALjB;AAAA,UAMI+C,MAAM,GAAGH,MAAM,CAACG,MANpB;AAAA,UAOIC,cAAc,GAAGJ,MAAM,CAACI,cAP5B;AAAA,UAQIC,aAAa,GAAGL,MAAM,CAACK,aAR3B;AAAA,UASIC,MAAM,GAAGzE,wBAAwB,CAACmE,MAAD,EAAS,CAAC,QAAD,EAAW,QAAX,EAAqB,oBAArB,EAA2C,MAA3C,EAAmD,KAAnD,EAA0D,QAA1D,EAAoE,gBAApE,EAAsF,eAAtF,CAAT,CATrC;;AAWA,UAAIO,QAAQ,GAAG,KAAKxB,OAApB;AAAA,UACIyB,UAAU,GAAGD,QAAQ,CAACC,UAD1B;AAAA,UAEIC,mBAAmB,GAAGF,QAAQ,CAACG,UAFnC;AAAA,UAGIA,UAAU,GAAGD,mBAAmB,KAAKrC,SAAxB,GAAoC,EAApC,GAAyCqC,mBAH1D;AAAA,UAIIE,qBAAqB,GAAGJ,QAAQ,CAACK,sBAJrC;AAAA,UAKIA,sBAAsB,GAAGD,qBAAqB,KAAKvC,SAA1B,GAAsC,EAAtC,GAA2CuC,qBALxE;AAAA,UAMIE,QAAQ,GAAGN,QAAQ,CAACM,QANxB;AAAA,UAOIC,OAAO,GAAGP,QAAQ,CAACO,OAPvB;AAAA,UAQIC,UAAU,GAAGR,QAAQ,CAACQ,UAR1B;AAAA,UASIC,kBAAkB,GAAGT,QAAQ,CAACS,kBATlC;AAAA,UAUIC,iBAAiB,GAAGV,QAAQ,CAACU,iBAVjC;AAaA,UAAIrE,WAAW,GAAGqB,OAAO,CAACiD,aAAR,IAAyBxE,cAAc,CAACC,SAAD,CAAzD;AACA,UAAIwE,YAAY,GAAG5E,eAAe,CAAC;AAC/B0D,QAAAA,MAAM,EAAEA,MADuB;AAE/BzC,QAAAA,MAAM,EAAEA,MAFuB;AAG/B0C,QAAAA,kBAAkB,EAAEA,kBAHW;AAI/BvB,QAAAA,IAAI,EAAEA,IAJyB;AAK/BwB,QAAAA,MAAM,EAAEA,MALuB;AAM/BC,QAAAA,cAAc,EAAEA,cANe;AAO/BhD,QAAAA,GAAG,EAAEA,GAP0B;AAQ/BiD,QAAAA,aAAa,EAAEA;AARgB,OAAD,EAS/B;AACCG,QAAAA,UAAU,EAAEA,UADb;AAECE,QAAAA,UAAU,EAAEzE,QAAQ,CAAC,EAAD,EAAKe,mBAAL,EAA0B0D,UAA1B,CAFrB;AAGCE,QAAAA,sBAAsB,EAAEA,sBAHzB;AAICC,QAAAA,QAAQ,EAAEA,QAJX;AAKCE,QAAAA,UAAU,EAAEA,UALb;AAMCC,QAAAA,kBAAkB,EAAEA,kBANrB;AAOCF,QAAAA,OAAO,EAAE,OAAOA,OAAP,KAAmB,SAAnB,GAA+BA,OAA/B,GAAyC7D,gBAAgB,KAAK,IAArB,GAA4B,IAA5B,GAAmCmB,SAPtF;AAQC6C,QAAAA,iBAAiB,EAAEA;AARpB,OAT+B,EAkB/BrE,WAlB+B,CAAlC,CA1BmD,CA8CnD;;AACA,UAAIwE,eAAe,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,MAArB,EAA6B,KAA7B,EAAoC,QAApC,EAA8C,gBAA9C,EAAgEC,MAAhE,CAAuE,UAAUC,GAAV,EAAezE,IAAf,EAAqB;AAC9G,YAAI,OAAOsE,YAAY,CAACtE,IAAD,CAAnB,KAA8B,WAAlC,EAA+C;AAC3CyE,UAAAA,GAAG,CAACzE,IAAD,CAAH,GAAYsE,YAAY,CAACtE,IAAD,CAAxB;AACH;;AACD,eAAOyE,GAAP;AACH,OALqB,EAKnB,EALmB,CAAtB;;AAOA,UAAI,UAAUF,eAAV,IAA6BA,eAAe,CAACzC,IAAjD,EAAuD;AACnDrC,QAAAA,GAAG,CAACiF,OAAJ,CAAY,qFAAZ;AACH,OAxDkD,CA0DnD;;;AACA,UAAI,oBAAoBH,eAApB,IAAuC,EAAE,eAAe,KAAK1C,KAAtB,CAAvC,IAAuE,CAAC,SAAD,EAAY,OAAZ,EAAqB8C,OAArB,CAA6B5E,WAA7B,IAA4C,CAAC,CAAxH,EAA2H;AACvHwE,QAAAA,eAAe,CAACK,SAAhB,GAA4BL,eAAe,CAAChB,cAA5C;AACA,eAAOgB,eAAe,CAAChB,cAAvB;AACH;;AAED,UAAIsB,SAAS,GAAGzD,OAAO,CAAC0D,SAAR,GAAoB1D,OAAO,CAAC0D,SAAR,CAAkBrB,MAAlB,EAA0B,KAAKlB,WAA/B,CAApB,GAAkEkB,MAAlF;AAEA,UAAIsB,OAAO,GAAG1F,KAAK,CAAC2F,aAAN,CAAoBlF,SAApB,EAA+BV,QAAQ,CAAC,EAAD,EAAKkF,YAAY,CAACjB,kBAAb,CAAgCtD,WAAhC,CAAL,EAAmD8E,SAAnD,EAA8DN,eAA9D,EAA+E;AAChI/B,QAAAA,GAAG,EAAEhD,GAAG,CAACgC,gBAAJ,CAAqB1B,SAArB,IAAkC,KAAKuC,YAAvC,GAAsD;AADqE,OAA/E,CAAvC,CAAd;;AAIA,UAAI4C,qBAAqB,GAAGX,YAAY,CAACd,aAAzC;AAAA,UACI0B,IAAI,GAAGD,qBAAqB,CAACC,IADjC;AAAA,UAEIC,cAAc,GAAGnG,wBAAwB,CAACiG,qBAAD,EAAwB,CAAC,MAAD,CAAxB,CAF7C;;AAIA,aAAOC,IAAI,GAAG7F,KAAK,CAAC2F,aAAN,CACVrF,aADU,EAEVwF,cAFU,EAGVJ,OAHU,CAAH,GAIPA,OAJJ;AAKH,KA/ED;;AAiFA,WAAO/C,iBAAP;AACH,GA1HyC,CA0HxC3C,KAAK,CAACS,SA1HkC,CAAjB,EA0HLoB,MAAM,CAACkE,SAAP,GAAmBhG,QAAQ,CAAC,EAAD,EAAKU,SAAS,CAACsF,SAAV,IAAuB,EAA5B,EAAgC;AAC3EhC,IAAAA,MAAM,EAAE9D,SAAS,CAAC+F,MADyD;AAE3E1E,IAAAA,MAAM,EAAErB,SAAS,CAACgG,MAFyD;AAG3EjC,IAAAA,kBAAkB,EAAE/D,SAAS,CAACgG,MAH6C;AAI3ExD,IAAAA,IAAI,EAAExC,SAAS,CAACiG,IAJ2D;AAK3EhF,IAAAA,GAAG,EAAEjB,SAAS,CAACiG,IAL4D;AAM3EjC,IAAAA,MAAM,EAAEhE,SAAS,CAACkG,KAAV,CAAgB,CAAC,QAAD,EAAW,SAAX,EAAsB,OAAtB,CAAhB,CANmE;AAO3EjC,IAAAA,cAAc,EAAEjE,SAAS,CAACmG,GAPiD;AAQ3EjC,IAAAA,aAAa,EAAElE,SAAS,CAACoG,SAAV,CAAoB,CAACpG,SAAS,CAACiG,IAAX,EAAiBjG,SAAS,CAACgG,MAA3B,CAApB;AAR4D,GAAhC,CA1HtB,EAmIrBpE,MAAM,CAACyE,YAAP,GAAsBvG,QAAQ,CAAC,EAAD,EAAKU,SAAS,CAAC6F,YAAV,IAA0B,EAA/B,EAAmC;AACjEhC,IAAAA,UAAU,EAAErE,SAAS,CAAC+F,MAD2C;AAEjExB,IAAAA,UAAU,EAAEvE,SAAS,CAACgG,MAF2C;AAGjEvB,IAAAA,sBAAsB,EAAEzE,SAAS,CAACgG,MAH+B;AAIjEtB,IAAAA,QAAQ,EAAE1E,SAAS,CAACiG,IAJ6C;AAKjEtB,IAAAA,OAAO,EAAE3E,SAAS,CAACiG,IAL8C;AAMjEzC,IAAAA,WAAW,EAAExD,SAAS,CAACiG,IAN0C;AAOjErB,IAAAA,UAAU,EAAE5E,SAAS,CAACkG,KAAV,CAAgB,CAAC,QAAD,EAAW,SAAX,EAAsB,OAAtB,CAAhB,CAPqD;AAQjErB,IAAAA,kBAAkB,EAAE7E,SAAS,CAACmG,GARmC;AASjErB,IAAAA,iBAAiB,EAAE9E,SAAS,CAACoG,SAAV,CAAoB,CAACpG,SAAS,CAACiG,IAAX,EAAiBjG,SAAS,CAACgG,MAA3B,CAApB;AAT8C,GAAnC,CAnIT,EA6IrBnE,KA7IiB,CAArB;AA8IAa,EAAAA,iBAAiB,CAACjC,WAAlB,GAAgC,mBAAhC;AAGAiC,EAAAA,iBAAiB,CAACjC,WAAlB,GAAgC,YAAYF,cAAc,CAACC,SAAD,CAA1B,GAAwC,GAAxE;AAEAP,EAAAA,mBAAmB,CAACyC,iBAAD,EAAoBlC,SAApB,CAAnB;AAEA,SAAOkC,iBAAP;AACH","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport hoistNonReactStatic from 'hoist-non-react-statics';\nimport { obj, log } from '../util';\nimport getContextProps from './get-context-props';\nimport ErrorBoundary from './error-boundary';\n\nvar shallowEqual = obj.shallowEqual;\n\n\nfunction getDisplayName(Component) {\n    return Component.displayName || Component.name || 'Component';\n}\n\nvar globalLocales = void 0;\nvar currentGlobalLanguage = 'zh-cn';\nvar currentGlobalLocale = {};\nvar currentGlobalRtl = void 0;\n\nexport function initLocales(locales) {\n    globalLocales = locales;\n\n    if (locales) {\n        currentGlobalLocale = locales[currentGlobalLanguage];\n\n        if (typeof currentGlobalRtl !== 'boolean') {\n            currentGlobalRtl = currentGlobalLocale && currentGlobalLocale.rtl;\n        }\n    }\n}\n\nexport function setLanguage(language) {\n    if (globalLocales) {\n        currentGlobalLanguage = language;\n        currentGlobalLocale = globalLocales[language];\n\n        if (typeof currentGlobalRtl !== 'boolean') {\n            currentGlobalRtl = currentGlobalLocale && currentGlobalLocale.rtl;\n        }\n    }\n}\n\nexport function setLocale(locale) {\n    currentGlobalLocale = _extends({}, globalLocales ? globalLocales[currentGlobalLanguage] : {}, locale);\n\n    if (typeof currentGlobalRtl !== 'boolean') {\n        currentGlobalRtl = currentGlobalLocale && currentGlobalLocale.rtl;\n    }\n}\n\nexport function setDirection(dir) {\n    currentGlobalRtl = dir === 'rtl';\n}\n\nexport function getLocale() {\n    return currentGlobalLocale;\n}\n\nexport function getLanguage() {\n    return currentGlobalLanguage;\n}\n\nexport function getDirection() {\n    return currentGlobalRtl;\n}\n\nexport function config(Component) {\n    var _class, _temp;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    // 非 forwardRef 创建的 class component\n    if (obj.isClassComponent(Component) && Component.prototype.shouldComponentUpdate === undefined) {\n        // class component: 通过定义 shouldComponentUpdate 改写成 pure component, 有refs\n        Component.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n            if (this.props.pure) {\n                return !shallowEqual(this.props, nextProps) || !shallowEqual(this.state, nextState);\n            }\n\n            return true;\n        };\n    }\n\n    var ConfigedComponent = (_temp = _class = function (_React$Component) {\n        _inherits(ConfigedComponent, _React$Component);\n\n        function ConfigedComponent(props, context) {\n            _classCallCheck(this, ConfigedComponent);\n\n            var _this = _possibleConstructorReturn(this, _React$Component.call(this, props, context));\n\n            _this._getInstance = _this._getInstance.bind(_this);\n            _this._deprecated = _this._deprecated.bind(_this);\n            return _this;\n        }\n\n        ConfigedComponent.prototype._getInstance = function _getInstance(ref) {\n            var _this2 = this;\n\n            this._instance = ref;\n\n            if (this._instance && options.exportNames) {\n                options.exportNames.forEach(function (name) {\n                    var field = _this2._instance[name];\n                    if (typeof field === 'function') {\n                        _this2[name] = field.bind(_this2._instance);\n                    } else {\n                        _this2[name] = field;\n                    }\n                });\n            }\n        };\n\n        ConfigedComponent.prototype._deprecated = function _deprecated() {\n            if (this.context.nextWarning !== false) {\n                log.deprecated.apply(log, arguments);\n            }\n        };\n\n        ConfigedComponent.prototype.getInstance = function getInstance() {\n            return this._instance;\n        };\n\n        ConfigedComponent.prototype.render = function render() {\n            var _props = this.props,\n                prefix = _props.prefix,\n                locale = _props.locale,\n                defaultPropsConfig = _props.defaultPropsConfig,\n                pure = _props.pure,\n                rtl = _props.rtl,\n                device = _props.device,\n                popupContainer = _props.popupContainer,\n                errorBoundary = _props.errorBoundary,\n                others = _objectWithoutProperties(_props, ['prefix', 'locale', 'defaultPropsConfig', 'pure', 'rtl', 'device', 'popupContainer', 'errorBoundary']);\n\n            var _context = this.context,\n                nextPrefix = _context.nextPrefix,\n                _context$nextLocale = _context.nextLocale,\n                nextLocale = _context$nextLocale === undefined ? {} : _context$nextLocale,\n                _context$nextDefaultP = _context.nextDefaultPropsConfig,\n                nextDefaultPropsConfig = _context$nextDefaultP === undefined ? {} : _context$nextDefaultP,\n                nextPure = _context.nextPure,\n                nextRtl = _context.nextRtl,\n                nextDevice = _context.nextDevice,\n                nextPopupContainer = _context.nextPopupContainer,\n                nextErrorBoundary = _context.nextErrorBoundary;\n\n\n            var displayName = options.componentName || getDisplayName(Component);\n            var contextProps = getContextProps({\n                prefix: prefix,\n                locale: locale,\n                defaultPropsConfig: defaultPropsConfig,\n                pure: pure,\n                device: device,\n                popupContainer: popupContainer,\n                rtl: rtl,\n                errorBoundary: errorBoundary\n            }, {\n                nextPrefix: nextPrefix,\n                nextLocale: _extends({}, currentGlobalLocale, nextLocale),\n                nextDefaultPropsConfig: nextDefaultPropsConfig,\n                nextPure: nextPure,\n                nextDevice: nextDevice,\n                nextPopupContainer: nextPopupContainer,\n                nextRtl: typeof nextRtl === 'boolean' ? nextRtl : currentGlobalRtl === true ? true : undefined,\n                nextErrorBoundary: nextErrorBoundary\n            }, displayName);\n\n            // errorBoundary is only for <ErrorBoundary>\n            var newContextProps = ['prefix', 'locale', 'pure', 'rtl', 'device', 'popupContainer'].reduce(function (ret, name) {\n                if (typeof contextProps[name] !== 'undefined') {\n                    ret[name] = contextProps[name];\n                }\n                return ret;\n            }, {});\n\n            if ('pure' in newContextProps && newContextProps.pure) {\n                log.warning('pure of ConfigProvider is deprecated, use Function Component or React.PureComponent');\n            }\n\n            // 对于两个真正消费 popupContainer 的组件来说，正确的名字是 container,\n            if ('popupContainer' in newContextProps && !('container' in this.props) && ['Overlay', 'Popup'].indexOf(displayName) > -1) {\n                newContextProps.container = newContextProps.popupContainer;\n                delete newContextProps.popupContainer;\n            }\n\n            var newOthers = options.transform ? options.transform(others, this._deprecated) : others;\n\n            var content = React.createElement(Component, _extends({}, contextProps.defaultPropsConfig[displayName], newOthers, newContextProps, {\n                ref: obj.isClassComponent(Component) ? this._getInstance : null\n            }));\n\n            var _contextProps$errorBo = contextProps.errorBoundary,\n                open = _contextProps$errorBo.open,\n                othersBoundary = _objectWithoutProperties(_contextProps$errorBo, ['open']);\n\n            return open ? React.createElement(\n                ErrorBoundary,\n                othersBoundary,\n                content\n            ) : content;\n        };\n\n        return ConfigedComponent;\n    }(React.Component), _class.propTypes = _extends({}, Component.propTypes || {}, {\n        prefix: PropTypes.string,\n        locale: PropTypes.object,\n        defaultPropsConfig: PropTypes.object,\n        pure: PropTypes.bool,\n        rtl: PropTypes.bool,\n        device: PropTypes.oneOf(['tablet', 'desktop', 'phone']),\n        popupContainer: PropTypes.any,\n        errorBoundary: PropTypes.oneOfType([PropTypes.bool, PropTypes.object])\n    }), _class.contextTypes = _extends({}, Component.contextTypes || {}, {\n        nextPrefix: PropTypes.string,\n        nextLocale: PropTypes.object,\n        nextDefaultPropsConfig: PropTypes.object,\n        nextPure: PropTypes.bool,\n        nextRtl: PropTypes.bool,\n        nextWarning: PropTypes.bool,\n        nextDevice: PropTypes.oneOf(['tablet', 'desktop', 'phone']),\n        nextPopupContainer: PropTypes.any,\n        nextErrorBoundary: PropTypes.oneOfType([PropTypes.bool, PropTypes.object])\n    }), _temp);\n    ConfigedComponent.displayName = 'ConfigedComponent';\n\n\n    ConfigedComponent.displayName = 'Config(' + getDisplayName(Component) + ')';\n\n    hoistNonReactStatic(ConfigedComponent, Component);\n\n    return ConfigedComponent;\n}"]},"metadata":{},"sourceType":"module"}