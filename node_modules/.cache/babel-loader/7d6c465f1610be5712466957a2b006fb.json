{"ast":null,"code":"import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp;\n\nimport { Component, Children } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { func, dom, events } from '../util';\nimport position from './utils/position';\nimport findNode from './utils/find-node';\nvar noop = func.noop,\n    bindCtx = func.bindCtx;\nvar getStyle = dom.getStyle;\nvar place = position.place;\nvar Position = (_temp = _class = function (_Component) {\n  _inherits(Position, _Component);\n\n  function Position(props) {\n    _classCallCheck(this, Position);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.observe = function () {\n      var contentNode = _this.getContentNode();\n\n      contentNode && _this.resizeObserver.observe(contentNode);\n    };\n\n    _this.unobserve = function () {\n      _this.resizeObserver.disconnect();\n    };\n\n    bindCtx(_this, ['handleResize']);\n    _this.resizeObserver = new ResizeObserver(_this.handleResize);\n    return _this;\n  }\n\n  Position.prototype.componentDidMount = function componentDidMount() {\n    this.setPosition();\n\n    if (this.props.needListenResize) {\n      events.on(window, 'resize', this.handleResize);\n      this.observe();\n    }\n  };\n\n  Position.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var props = this.props;\n\n    if ('align' in props && props.align !== prevProps.align || props.shouldUpdatePosition) {\n      this.shouldUpdatePosition = true;\n    }\n\n    if (this.shouldUpdatePosition) {\n      clearTimeout(this.resizeTimeout);\n      this.setPosition();\n      this.shouldUpdatePosition = false;\n    }\n  };\n\n  Position.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.props.needListenResize) {\n      events.off(window, 'resize', this.handleResize);\n      this.unobserve();\n    }\n\n    clearTimeout(this.resizeTimeout);\n  };\n\n  Position.prototype.setPosition = function setPosition() {\n    var _props = this.props,\n        align = _props.align,\n        offset = _props.offset,\n        beforePosition = _props.beforePosition,\n        onPosition = _props.onPosition,\n        needAdjust = _props.needAdjust,\n        container = _props.container,\n        rtl = _props.rtl,\n        pinFollowBaseElementWhenFixed = _props.pinFollowBaseElementWhenFixed,\n        autoFit = _props.autoFit;\n    beforePosition();\n    var contentNode = this.getContentNode();\n    var targetNode = this.getTargetNode();\n\n    if (contentNode && targetNode) {\n      var resultAlign = place({\n        pinElement: contentNode,\n        baseElement: targetNode,\n        pinFollowBaseElementWhenFixed: pinFollowBaseElementWhenFixed,\n        align: align,\n        offset: offset,\n        autoFit: autoFit,\n        container: container,\n        needAdjust: needAdjust,\n        isRtl: rtl\n      });\n      var top = getStyle(contentNode, 'top');\n      var left = getStyle(contentNode, 'left');\n      onPosition({\n        align: resultAlign.split(' '),\n        top: top,\n        left: left\n      }, contentNode);\n    }\n  };\n\n  Position.prototype.getContentNode = function getContentNode() {\n    try {\n      return findDOMNode(this);\n    } catch (err) {\n      return null;\n    }\n  };\n\n  Position.prototype.getTargetNode = function getTargetNode() {\n    var target = this.props.target;\n    return target === position.VIEWPORT ? position.VIEWPORT : findNode(target, this.props);\n  };\n\n  Position.prototype.handleResize = function handleResize() {\n    var _this2 = this;\n\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = setTimeout(function () {\n      _this2.setPosition();\n    }, 200);\n  };\n\n  Position.prototype.render = function render() {\n    return Children.only(this.props.children);\n  };\n\n  return Position;\n}(Component), _class.VIEWPORT = position.VIEWPORT, _class.propTypes = {\n  children: PropTypes.node,\n  target: PropTypes.any,\n  container: PropTypes.any,\n  align: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  offset: PropTypes.array,\n  beforePosition: PropTypes.func,\n  onPosition: PropTypes.func,\n  needAdjust: PropTypes.bool,\n  autoFit: PropTypes.bool,\n  needListenResize: PropTypes.bool,\n  shouldUpdatePosition: PropTypes.bool,\n  rtl: PropTypes.bool,\n  pinFollowBaseElementWhenFixed: PropTypes.bool\n}, _class.defaultProps = {\n  align: 'tl bl',\n  offset: [0, 0],\n  beforePosition: noop,\n  onPosition: noop,\n  needAdjust: true,\n  autoFit: false,\n  needListenResize: true,\n  shouldUpdatePosition: false,\n  rtl: false\n}, _temp);\nPosition.displayName = 'Position';\nexport { Position as default };","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/overlay/position.js"],"names":["_classCallCheck","_possibleConstructorReturn","_inherits","_class","_temp","Component","Children","findDOMNode","PropTypes","ResizeObserver","func","dom","events","position","findNode","noop","bindCtx","getStyle","place","Position","_Component","props","_this","call","observe","contentNode","getContentNode","resizeObserver","unobserve","disconnect","handleResize","prototype","componentDidMount","setPosition","needListenResize","on","window","componentDidUpdate","prevProps","align","shouldUpdatePosition","clearTimeout","resizeTimeout","componentWillUnmount","off","_props","offset","beforePosition","onPosition","needAdjust","container","rtl","pinFollowBaseElementWhenFixed","autoFit","targetNode","getTargetNode","resultAlign","pinElement","baseElement","isRtl","top","left","split","err","target","VIEWPORT","_this2","setTimeout","render","only","children","propTypes","node","any","oneOfType","string","bool","array","defaultProps","displayName","default"],"mappings":"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","sourcesContent":["import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp;\n\nimport { Component, Children } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { func, dom, events } from '../util';\nimport position from './utils/position';\nimport findNode from './utils/find-node';\n\nvar noop = func.noop,\n    bindCtx = func.bindCtx;\nvar getStyle = dom.getStyle;\n\nvar place = position.place;\n\nvar Position = (_temp = _class = function (_Component) {\n    _inherits(Position, _Component);\n\n    function Position(props) {\n        _classCallCheck(this, Position);\n\n        var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n        _this.observe = function () {\n            var contentNode = _this.getContentNode();\n            contentNode && _this.resizeObserver.observe(contentNode);\n        };\n\n        _this.unobserve = function () {\n            _this.resizeObserver.disconnect();\n        };\n\n        bindCtx(_this, ['handleResize']);\n\n        _this.resizeObserver = new ResizeObserver(_this.handleResize);\n        return _this;\n    }\n\n    Position.prototype.componentDidMount = function componentDidMount() {\n        this.setPosition();\n\n        if (this.props.needListenResize) {\n            events.on(window, 'resize', this.handleResize);\n            this.observe();\n        }\n    };\n\n    Position.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n        var props = this.props;\n\n\n        if ('align' in props && props.align !== prevProps.align || props.shouldUpdatePosition) {\n            this.shouldUpdatePosition = true;\n        }\n\n        if (this.shouldUpdatePosition) {\n            clearTimeout(this.resizeTimeout);\n\n            this.setPosition();\n            this.shouldUpdatePosition = false;\n        }\n    };\n\n    Position.prototype.componentWillUnmount = function componentWillUnmount() {\n        if (this.props.needListenResize) {\n            events.off(window, 'resize', this.handleResize);\n            this.unobserve();\n        }\n\n        clearTimeout(this.resizeTimeout);\n    };\n\n    Position.prototype.setPosition = function setPosition() {\n        var _props = this.props,\n            align = _props.align,\n            offset = _props.offset,\n            beforePosition = _props.beforePosition,\n            onPosition = _props.onPosition,\n            needAdjust = _props.needAdjust,\n            container = _props.container,\n            rtl = _props.rtl,\n            pinFollowBaseElementWhenFixed = _props.pinFollowBaseElementWhenFixed,\n            autoFit = _props.autoFit;\n\n\n        beforePosition();\n\n        var contentNode = this.getContentNode();\n        var targetNode = this.getTargetNode();\n\n        if (contentNode && targetNode) {\n            var resultAlign = place({\n                pinElement: contentNode,\n                baseElement: targetNode,\n                pinFollowBaseElementWhenFixed: pinFollowBaseElementWhenFixed,\n                align: align,\n                offset: offset,\n                autoFit: autoFit,\n                container: container,\n                needAdjust: needAdjust,\n                isRtl: rtl\n            });\n            var top = getStyle(contentNode, 'top');\n            var left = getStyle(contentNode, 'left');\n\n            onPosition({\n                align: resultAlign.split(' '),\n                top: top,\n                left: left\n            }, contentNode);\n        }\n    };\n\n    Position.prototype.getContentNode = function getContentNode() {\n        try {\n            return findDOMNode(this);\n        } catch (err) {\n            return null;\n        }\n    };\n\n    Position.prototype.getTargetNode = function getTargetNode() {\n        var target = this.props.target;\n\n\n        return target === position.VIEWPORT ? position.VIEWPORT : findNode(target, this.props);\n    };\n\n    Position.prototype.handleResize = function handleResize() {\n        var _this2 = this;\n\n        clearTimeout(this.resizeTimeout);\n\n        this.resizeTimeout = setTimeout(function () {\n            _this2.setPosition();\n        }, 200);\n    };\n\n    Position.prototype.render = function render() {\n        return Children.only(this.props.children);\n    };\n\n    return Position;\n}(Component), _class.VIEWPORT = position.VIEWPORT, _class.propTypes = {\n    children: PropTypes.node,\n    target: PropTypes.any,\n    container: PropTypes.any,\n    align: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    offset: PropTypes.array,\n    beforePosition: PropTypes.func,\n    onPosition: PropTypes.func,\n    needAdjust: PropTypes.bool,\n    autoFit: PropTypes.bool,\n    needListenResize: PropTypes.bool,\n    shouldUpdatePosition: PropTypes.bool,\n    rtl: PropTypes.bool,\n    pinFollowBaseElementWhenFixed: PropTypes.bool\n}, _class.defaultProps = {\n    align: 'tl bl',\n    offset: [0, 0],\n    beforePosition: noop,\n    onPosition: noop,\n    needAdjust: true,\n    autoFit: false,\n    needListenResize: true,\n    shouldUpdatePosition: false,\n    rtl: false\n}, _temp);\nPosition.displayName = 'Position';\nexport { Position as default };"]},"metadata":{},"sourceType":"module"}