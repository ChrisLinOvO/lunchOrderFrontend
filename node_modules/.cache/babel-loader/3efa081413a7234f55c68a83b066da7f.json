{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp2;\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport Overlay from '../overlay';\nimport ConfigProvider from '../config-provider';\nimport { guid } from '../util';\nimport Message from './message';\nvar config = ConfigProvider.config;\nvar instance = void 0;\nvar timeouts = {};\nvar Mask = (_temp2 = _class = function (_React$Component) {\n  _inherits(Mask, _React$Component);\n\n  function Mask() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Mask);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {\n      visible: true\n    }, _this.handleClose = function () {\n      var silent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      _this.setState({\n        visible: false\n      });\n\n      if (!silent) {\n        _this.props.onClose && _this.props.onClose();\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Mask.prototype.componentWillUnmount = function componentWillUnmount() {\n    var timeoutId = this.props.timeoutId;\n\n    if (timeoutId in timeouts) {\n      var timeout = timeouts[timeoutId];\n      clearTimeout(timeout);\n      delete timeouts[timeoutId];\n    }\n  };\n\n  Mask.prototype.render = function render() {\n    /* eslint-disable no-unused-vars */\n    var _props = this.props,\n        prefix = _props.prefix,\n        type = _props.type,\n        title = _props.title,\n        content = _props.content,\n        align = _props.align,\n        offset = _props.offset,\n        hasMask = _props.hasMask,\n        afterClose = _props.afterClose,\n        animation = _props.animation,\n        overlayProps = _props.overlayProps,\n        timeoutId = _props.timeoutId,\n        className = _props.className,\n        style = _props.style,\n        others = _objectWithoutProperties(_props, ['prefix', 'type', 'title', 'content', 'align', 'offset', 'hasMask', 'afterClose', 'animation', 'overlayProps', 'timeoutId', 'className', 'style']);\n    /* eslint-enable */\n\n\n    var visible = this.state.visible;\n    return React.createElement(Overlay, _extends({}, overlayProps, {\n      prefix: prefix,\n      animation: animation,\n      visible: visible,\n      align: align,\n      offset: offset,\n      hasMask: hasMask,\n      afterClose: afterClose\n    }), React.createElement(Message, _extends({}, others, {\n      prefix: prefix,\n      visible: true,\n      type: type,\n      shape: 'toast',\n      title: title,\n      style: style,\n      className: prefix + 'message-wrapper ' + className,\n      onClose: this.handleClose\n    }), content));\n  };\n\n  return Mask;\n}(React.Component), _class.contextTypes = {\n  prefix: PropTypes.string\n}, _class.propTypes = {\n  prefix: PropTypes.string,\n  type: PropTypes.string,\n  title: PropTypes.node,\n  content: PropTypes.node,\n  align: PropTypes.string,\n  offset: PropTypes.array,\n  hasMask: PropTypes.bool,\n  afterClose: PropTypes.func,\n  animation: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n  overlayProps: PropTypes.object,\n  onClose: PropTypes.func,\n  timeoutId: PropTypes.string,\n  style: PropTypes.object,\n  className: PropTypes.string\n}, _class.defaultProps = {\n  prefix: 'next-',\n  align: 'tc tc',\n  offset: [0, 30],\n  hasMask: false,\n  animation: {\n    in: 'pulse',\n    out: 'zoomOut'\n  },\n  style: {},\n  className: ''\n}, _temp2);\nMask.displayName = 'Mask';\nvar NewMask = config(Mask);\n\nvar create = function create(props) {\n  /* eslint-disable no-unused-vars */\n  var duration = props.duration,\n      afterClose = props.afterClose,\n      contextConfig = props.contextConfig,\n      others = _objectWithoutProperties(props, ['duration', 'afterClose', 'contextConfig']);\n  /* eslint-enable no-unused-vars */\n\n\n  var div = document.createElement('div');\n  document.body.appendChild(div);\n\n  var closeChain = function closeChain() {\n    ReactDOM.unmountComponentAtNode(div);\n    document.body.removeChild(div);\n    afterClose && afterClose();\n  };\n\n  var newContext = contextConfig;\n  if (!newContext) newContext = ConfigProvider.getContext();\n  var mask = void 0,\n      myRef = void 0,\n      destroyed = false;\n\n  var destroy = function destroy() {\n    var inc = mask && mask.getInstance();\n    inc && inc.handleClose(true);\n    destroyed = true;\n  };\n\n  ReactDOM.render(React.createElement(ConfigProvider, newContext, React.createElement(NewMask, _extends({\n    afterClose: closeChain\n  }, others, {\n    ref: function ref(_ref) {\n      myRef = _ref;\n    }\n  }))), div, function () {\n    mask = myRef;\n\n    if (mask && destroyed) {\n      destroy();\n    }\n  });\n  return {\n    component: mask,\n    destroy: destroy\n  };\n};\n\nfunction handleConfig(config, type) {\n  var newConfig = {};\n\n  if (typeof config === 'string' || React.isValidElement(config)) {\n    newConfig.title = config;\n  } else if (isObject(config)) {\n    newConfig = _extends({}, config);\n  }\n\n  if (typeof newConfig.duration !== 'number') {\n    newConfig.duration = 3000;\n  }\n\n  if (type) {\n    newConfig.type = type;\n  }\n\n  return newConfig;\n}\n\nfunction isObject(obj) {\n  return {}.toString.call(obj) === '[object Object]';\n}\n\nfunction open(config, type) {\n  close();\n  config = handleConfig(config, type);\n  var timeoutId = guid();\n  instance = create(_extends({}, config, {\n    timeoutId: timeoutId\n  }));\n\n  if (config.duration > 0) {\n    var timeout = setTimeout(close, config.duration);\n    timeouts[timeoutId] = timeout;\n  }\n}\n\nfunction close() {\n  if (instance) {\n    instance.destroy();\n    instance = null;\n  }\n}\n/**\n * 创建提示弹层\n * @exportName show\n * @param {Object} props 属性对象\n */\n\n\nfunction _show(config) {\n  open(config);\n}\n/**\n * 关闭提示弹层\n * @exportName hide\n */\n\n\nfunction hide() {\n  close();\n}\n/**\n * 创建成功提示弹层\n * @exportName success\n * @param {Object} props 属性对象\n */\n\n\nfunction _success(config) {\n  open(config, 'success');\n}\n/**\n * 创建警告提示弹层\n * @exportName warning\n * @param {Object} props 属性对象\n */\n\n\nfunction _warning(config) {\n  open(config, 'warning');\n}\n/**\n * 创建错误提示弹层\n * @exportName error\n * @param {Object} props 属性对象\n */\n\n\nfunction _error(config) {\n  open(config, 'error');\n}\n/**\n * 创建帮助提示弹层\n * @exportName help\n * @param {Object} props 属性对象\n */\n\n\nfunction _help(config) {\n  open(config, 'help');\n}\n/**\n * 创建加载中提示弹层\n * @exportName loading\n * @param {Object} props 属性对象\n */\n\n\nfunction _loading(config) {\n  open(config, 'loading');\n}\n/**\n * 创建通知提示弹层\n * @exportName notice\n * @param {Object} props 属性对象\n */\n\n\nfunction _notice(config) {\n  open(config, 'notice');\n}\n\nexport default {\n  show: _show,\n  hide: hide,\n  success: _success,\n  warning: _warning,\n  error: _error,\n  help: _help,\n  loading: _loading,\n  notice: _notice\n};\nexport var withContext = function withContext(WrappedComponent) {\n  var HOC = function HOC(props) {\n    return React.createElement(ConfigProvider.Consumer, null, function (contextConfig) {\n      return React.createElement(WrappedComponent, _extends({}, props, {\n        contextMessage: {\n          show: function show() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _show(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          },\n          hide: hide,\n          success: function success() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _success(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          },\n          warning: function warning() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _warning(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          },\n          error: function error() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _error(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          },\n          help: function help() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _help(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          },\n          loading: function loading() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _loading(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          },\n          notice: function notice() {\n            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            return _notice(_extends({}, config, {\n              contextConfig: contextConfig\n            }));\n          }\n        }\n      }));\n    });\n  };\n\n  return HOC;\n};","map":{"version":3,"sources":["/Users/Chris/Project/lunch-order-backstage/node_modules/@alifd/next/es/message/toast.js"],"names":["_extends","_objectWithoutProperties","_classCallCheck","_possibleConstructorReturn","_inherits","_class","_temp2","React","ReactDOM","PropTypes","Overlay","ConfigProvider","guid","Message","config","instance","timeouts","Mask","_React$Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","state","visible","handleClose","silent","undefined","setState","props","onClose","prototype","componentWillUnmount","timeoutId","timeout","clearTimeout","render","_props","prefix","type","title","content","align","offset","hasMask","afterClose","animation","overlayProps","className","style","others","createElement","shape","Component","contextTypes","string","propTypes","node","array","bool","func","oneOfType","object","defaultProps","in","out","displayName","NewMask","create","duration","contextConfig","div","document","body","appendChild","closeChain","unmountComponentAtNode","removeChild","newContext","getContext","mask","myRef","destroyed","destroy","inc","getInstance","ref","_ref","component","handleConfig","newConfig","isValidElement","isObject","obj","toString","open","close","setTimeout","_show","hide","_success","_warning","_error","_help","_loading","_notice","show","success","warning","error","help","loading","notice","withContext","WrappedComponent","HOC","Consumer","contextMessage"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp2;\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport Overlay from '../overlay';\nimport ConfigProvider from '../config-provider';\nimport { guid } from '../util';\nimport Message from './message';\n\nvar config = ConfigProvider.config;\n\n\nvar instance = void 0;\nvar timeouts = {};\n\nvar Mask = (_temp2 = _class = function (_React$Component) {\n    _inherits(Mask, _React$Component);\n\n    function Mask() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, Mask);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {\n            visible: true\n        }, _this.handleClose = function () {\n            var silent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n            _this.setState({\n                visible: false\n            });\n\n            if (!silent) {\n                _this.props.onClose && _this.props.onClose();\n            }\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    Mask.prototype.componentWillUnmount = function componentWillUnmount() {\n        var timeoutId = this.props.timeoutId;\n\n\n        if (timeoutId in timeouts) {\n            var timeout = timeouts[timeoutId];\n            clearTimeout(timeout);\n            delete timeouts[timeoutId];\n        }\n    };\n\n    Mask.prototype.render = function render() {\n        /* eslint-disable no-unused-vars */\n        var _props = this.props,\n            prefix = _props.prefix,\n            type = _props.type,\n            title = _props.title,\n            content = _props.content,\n            align = _props.align,\n            offset = _props.offset,\n            hasMask = _props.hasMask,\n            afterClose = _props.afterClose,\n            animation = _props.animation,\n            overlayProps = _props.overlayProps,\n            timeoutId = _props.timeoutId,\n            className = _props.className,\n            style = _props.style,\n            others = _objectWithoutProperties(_props, ['prefix', 'type', 'title', 'content', 'align', 'offset', 'hasMask', 'afterClose', 'animation', 'overlayProps', 'timeoutId', 'className', 'style']);\n        /* eslint-enable */\n\n\n        var visible = this.state.visible;\n\n        return React.createElement(\n            Overlay,\n            _extends({}, overlayProps, {\n                prefix: prefix,\n                animation: animation,\n                visible: visible,\n                align: align,\n                offset: offset,\n                hasMask: hasMask,\n                afterClose: afterClose\n            }),\n            React.createElement(\n                Message,\n                _extends({}, others, {\n                    prefix: prefix,\n                    visible: true,\n                    type: type,\n                    shape: 'toast',\n                    title: title,\n                    style: style,\n                    className: prefix + 'message-wrapper ' + className,\n                    onClose: this.handleClose\n                }),\n                content\n            )\n        );\n    };\n\n    return Mask;\n}(React.Component), _class.contextTypes = {\n    prefix: PropTypes.string\n}, _class.propTypes = {\n    prefix: PropTypes.string,\n    type: PropTypes.string,\n    title: PropTypes.node,\n    content: PropTypes.node,\n    align: PropTypes.string,\n    offset: PropTypes.array,\n    hasMask: PropTypes.bool,\n    afterClose: PropTypes.func,\n    animation: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n    overlayProps: PropTypes.object,\n    onClose: PropTypes.func,\n    timeoutId: PropTypes.string,\n    style: PropTypes.object,\n    className: PropTypes.string\n}, _class.defaultProps = {\n    prefix: 'next-',\n    align: 'tc tc',\n    offset: [0, 30],\n    hasMask: false,\n    animation: {\n        in: 'pulse',\n        out: 'zoomOut'\n    },\n    style: {},\n    className: ''\n}, _temp2);\nMask.displayName = 'Mask';\n\n\nvar NewMask = config(Mask);\n\nvar create = function create(props) {\n    /* eslint-disable no-unused-vars */\n    var duration = props.duration,\n        afterClose = props.afterClose,\n        contextConfig = props.contextConfig,\n        others = _objectWithoutProperties(props, ['duration', 'afterClose', 'contextConfig']);\n    /* eslint-enable no-unused-vars */\n\n    var div = document.createElement('div');\n    document.body.appendChild(div);\n    var closeChain = function closeChain() {\n        ReactDOM.unmountComponentAtNode(div);\n        document.body.removeChild(div);\n        afterClose && afterClose();\n    };\n\n    var newContext = contextConfig;\n    if (!newContext) newContext = ConfigProvider.getContext();\n\n    var mask = void 0,\n        myRef = void 0,\n        destroyed = false;\n    var destroy = function destroy() {\n        var inc = mask && mask.getInstance();\n        inc && inc.handleClose(true);\n        destroyed = true;\n    };\n\n    ReactDOM.render(React.createElement(\n        ConfigProvider,\n        newContext,\n        React.createElement(NewMask, _extends({\n            afterClose: closeChain\n        }, others, {\n            ref: function ref(_ref) {\n                myRef = _ref;\n            }\n        }))\n    ), div, function () {\n        mask = myRef;\n        if (mask && destroyed) {\n            destroy();\n        }\n    });\n\n    return {\n        component: mask,\n        destroy: destroy\n    };\n};\n\nfunction handleConfig(config, type) {\n    var newConfig = {};\n\n    if (typeof config === 'string' || React.isValidElement(config)) {\n        newConfig.title = config;\n    } else if (isObject(config)) {\n        newConfig = _extends({}, config);\n    }\n    if (typeof newConfig.duration !== 'number') {\n        newConfig.duration = 3000;\n    }\n    if (type) {\n        newConfig.type = type;\n    }\n\n    return newConfig;\n}\n\nfunction isObject(obj) {\n    return {}.toString.call(obj) === '[object Object]';\n}\n\nfunction open(config, type) {\n    close();\n    config = handleConfig(config, type);\n    var timeoutId = guid();\n    instance = create(_extends({}, config, { timeoutId: timeoutId }));\n\n    if (config.duration > 0) {\n        var timeout = setTimeout(close, config.duration);\n        timeouts[timeoutId] = timeout;\n    }\n}\n\nfunction close() {\n    if (instance) {\n        instance.destroy();\n        instance = null;\n    }\n}\n\n/**\n * 创建提示弹层\n * @exportName show\n * @param {Object} props 属性对象\n */\nfunction _show(config) {\n    open(config);\n}\n\n/**\n * 关闭提示弹层\n * @exportName hide\n */\nfunction hide() {\n    close();\n}\n\n/**\n * 创建成功提示弹层\n * @exportName success\n * @param {Object} props 属性对象\n */\nfunction _success(config) {\n    open(config, 'success');\n}\n\n/**\n * 创建警告提示弹层\n * @exportName warning\n * @param {Object} props 属性对象\n */\nfunction _warning(config) {\n    open(config, 'warning');\n}\n\n/**\n * 创建错误提示弹层\n * @exportName error\n * @param {Object} props 属性对象\n */\nfunction _error(config) {\n    open(config, 'error');\n}\n\n/**\n * 创建帮助提示弹层\n * @exportName help\n * @param {Object} props 属性对象\n */\nfunction _help(config) {\n    open(config, 'help');\n}\n\n/**\n * 创建加载中提示弹层\n * @exportName loading\n * @param {Object} props 属性对象\n */\nfunction _loading(config) {\n    open(config, 'loading');\n}\n\n/**\n * 创建通知提示弹层\n * @exportName notice\n * @param {Object} props 属性对象\n */\nfunction _notice(config) {\n    open(config, 'notice');\n}\n\nexport default {\n    show: _show,\n    hide: hide,\n    success: _success,\n    warning: _warning,\n    error: _error,\n    help: _help,\n    loading: _loading,\n    notice: _notice\n};\n\nexport var withContext = function withContext(WrappedComponent) {\n    var HOC = function HOC(props) {\n        return React.createElement(\n            ConfigProvider.Consumer,\n            null,\n            function (contextConfig) {\n                return React.createElement(WrappedComponent, _extends({}, props, {\n                    contextMessage: {\n                        show: function show() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _show(_extends({}, config, { contextConfig: contextConfig }));\n                        },\n                        hide: hide,\n                        success: function success() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _success(_extends({}, config, { contextConfig: contextConfig }));\n                        },\n                        warning: function warning() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _warning(_extends({}, config, { contextConfig: contextConfig }));\n                        },\n                        error: function error() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _error(_extends({}, config, { contextConfig: contextConfig }));\n                        },\n                        help: function help() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _help(_extends({}, config, { contextConfig: contextConfig }));\n                        },\n                        loading: function loading() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _loading(_extends({}, config, { contextConfig: contextConfig }));\n                        },\n                        notice: function notice() {\n                            var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                            return _notice(_extends({}, config, { contextConfig: contextConfig }));\n                        }\n                    }\n                }));\n            }\n        );\n    };\n    return HOC;\n};"]},"metadata":{},"sourceType":"module"}